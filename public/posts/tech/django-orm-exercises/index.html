<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Ultimate Django ORM Cheatsheet &#43; Exercises | Atharva Shah</title>
<meta name="keywords" content="python, django">
<meta name="description" content="Master the basics of Django ORM with this comprehensive cheatsheet and exercises to level up your skills in database querying, model relationships, aggregations, annotations, and more.">
<meta name="author" content="">
<link rel="canonical" href="https://atharvashah.netlify.app/posts/tech/django-orm-exercises/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.57d19ee47fb6afecb8be1197043075c8de7c64e795bf832acdc14c45aab8b56c.css" integrity="sha256-V9Ge5H&#43;2r&#43;y4vhGXBDB1yN58ZOeVv4MqzcFMRaq4tWw=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://atharvashah.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://atharvashah.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://atharvashah.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://atharvashah.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://atharvashah.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9913536001930134" crossorigin="anonymous"></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-216150796-2', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="Ultimate Django ORM Cheatsheet &#43; Exercises" />
<meta property="og:description" content="Master the basics of Django ORM with this comprehensive cheatsheet and exercises to level up your skills in database querying, model relationships, aggregations, annotations, and more." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://atharvashah.netlify.app/posts/tech/django-orm-exercises/" />
<meta property="og:image" content="https://atharvashah.netlify.app/blog/django-orm.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-19T01:18:34+05:30" />
<meta property="article:modified_time" content="2023-02-19T01:18:34+05:30" /><meta property="og:site_name" content="Atharva Shah" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://atharvashah.netlify.app/blog/django-orm.png" />
<meta name="twitter:title" content="Ultimate Django ORM Cheatsheet &#43; Exercises"/>
<meta name="twitter:description" content="Master the basics of Django ORM with this comprehensive cheatsheet and exercises to level up your skills in database querying, model relationships, aggregations, annotations, and more."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "üìö All Posts",
      "item": "https://atharvashah.netlify.app/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "üíª Tech Posts",
      "item": "https://atharvashah.netlify.app/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Ultimate Django ORM Cheatsheet + Exercises",
      "item": "https://atharvashah.netlify.app/posts/tech/django-orm-exercises/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Ultimate Django ORM Cheatsheet + Exercises",
  "name": "Ultimate Django ORM Cheatsheet \u002b Exercises",
  "description": "Master the basics of Django ORM with this comprehensive cheatsheet and exercises to level up your skills in database querying, model relationships, aggregations, annotations, and more.",
  "keywords": [
    "python", "django"
  ],
  "articleBody": "Querying Django Models with Examples In Django, querying the database is an essential task when working with models. Django‚Äôs QuerySet API provides an extensive range of methods to query the database efficiently.\nIn this article, we‚Äôll go over several examples of how to query Django models using the QuerySet API, along with code snippets that demonstrate the functionality of each method.\nTerminology Let us first go over some of the terminology that is used in conjunction with the QuerySet API. The following terms are used in the examples below:\nModels: Django models are Python classes that define the structure and behavior of database tables. They encapsulate fields and relationships and provide methods to interact with the data. QuerySets: QuerySets are objects that allow you to retrieve, filter, and manipulate data from the database. They are lazy, meaning that they only fetch data when needed, and can be chained together to form complex queries. Managers: Managers provide methods for working with QuerySets. They allow you to create reusable queries and define custom methods to retrieve data from the database. Fields: Fields define the type of data that can be stored in a model‚Äôs attribute or database column. They provide validation and conversion of input data and map to the appropriate SQL type. Migrations: Migrations allow you to modify the database schema and keep track of changes to models over time. They provide a convenient way to manage changes to the database schema and apply them to the database. Database routers: Database routers allow you to specify which database to use for different models or queries. They allow you to distribute data across multiple databases or use different databases for read and write operations. Aggregation: Aggregation provides methods for performing calculations on QuerySets, such as Sum, Count, Avg, and Max. They are used to retrieve statistics or summary information about the data in the database. Annotations: Annotations allow you to add calculated fields to QuerySets based on database functions or other fields. They are used to add computed or aggregated data to QuerySets. Meta options: Meta options provide additional settings for models, such as ordering, database table names, and unique constraints. They allow you to customize the behavior of models at the class level. Models Used in the Examples The following models are used in the examples below. Take a look at the code to get a better understanding of the relationships between the models.\nfrom django.db import models class Author(models.Model): firstname = models.CharField(max_length=100) lastname = models.CharField(max_length=100) address = models.CharField(max_length=200, null=True) zipcode = models.IntegerField(null=True) telephone = models.CharField(max_length=100, null=True) recommendedby = models.ForeignKey('Author', on_delete=models.CASCADE, related_name='recommended_authors', related_query_name='recommended_authors', null=True) joindate = models.DateField() popularity_score = models.IntegerField() followers = models.ManyToManyField('User', related_name='followed_authors', related_query_name='followed_authors') def __str__(self): return self.firstname + ' ' + self.lastname class Books(models.Model): title = models.CharField(max_length=100) genre = models.CharField(max_length=200) price = models.IntegerField(null=True) published_date = models.DateField() author = models.ForeignKey('Author', on_delete=models.CASCADE, related_name='books', related_query_name='books') publisher = models.ForeignKey('Publisher', on_delete=models.CASCADE, related_name='books', related_query_name='books') def __str__(self): return self.title class Publisher(models.Model): firstname = models.CharField(max_length=100) lastname = models.CharField(max_length=100) recommendedby = models.ForeignKey('Publisher', on_delete=models.CASCADE, null=True) joindate = models.DateField() popularity_score = models.IntegerField() def __str__(self): return self.firstname + ' ' + self.lastname class User(models.Model): username = models.CharField(max_length=100) email = models.CharField(max_length=100) def __str__(self): return self.username QuerySet API Exercises Query 1: Fetching all books from the database Explanation: The all() method returns all the records from the model it is called on. In this case, it will fetch all the records from the Books model. The Books model is assumed to be defined in the main app.\nresult1 = Books.objects.all() Query 2: Fetching selected columns from the Books table result2 = Books.objects.all().values_list('title', 'published_date') Explanation: The values_list() method is used to retrieve specific columns from the model. In this case, only the title and published_date columns are selected.\nQuery 3: Filtering records based on a condition result3 = Authors.objects.all().filter(popularity_score=0).values_list('firstname', 'lastname') Explanation: The filter() method is used to retrieve records that match a specific condition. In this case, the condition is that popularity_score should be equal to 0. The values_list() method is used to retrieve only the firstname and lastname fields from the retrieved records.\nQuery 4: Filtering records based on multiple conditions result4 = Authors.objects.all().filter(firstname__startswith='a', popularity_score__gte=8).values_list('firstname', 'popularity_score') Explanation: The filter() method is used to retrieve records that match multiple conditions. In this case, the conditions are that firstname should start with ‚Äòa‚Äô and popularity_score should be greater than or equal to 8. The values_list() method is used to retrieve only the firstname and popularity_score fields from the retrieved records.\nQuery 5: Searching records based on a substring result5 = Authors.objects.all().filter(firstname__icontains='aa').values_list('firstname') Explanation: The filter() method is used to retrieve records that contain a specific substring. In this case, the substring is ‚Äòaa‚Äô. The values_list() method is used to retrieve only the firstname field from the retrieved records. The icontains lookup is used to perform a case-insensitive search for the specified substring.\nQuery 6: Retrieve authors with specific primary keys result6 = Authors.objects.all().filter(pk__in=[1, 3, 23, 43, 134, 25]) Explanation: The filter() method is used to retrieve authors with primary keys specified in the pk__in argument. The pk in pk__in stands for primary key. In this case, the primary keys are [1, 3, 23, 43, 134, 25].\nQuery 7: Retrieve authors who joined after a specific date result7 = Authors.objects.all().filter(joindate__gte=datetime.date(year=2012, month=9, day=1)).order_by('joindate').values_list('firstname', 'joindate') Explanation: The filter() method is used to retrieve authors who joined after September 1, 2012, using the joindate__gte lookup. The gte in joindate__gte stands for greater than or equal to. The results are ordered by joindate in ascending order using the order_by() method. Only the firstname and joindate fields are selected using the values_list() method.\nQuery 8: Retrieve distinct publisher last name result8 = Publishers.objects.all().order_by('lastname').values_list('lastname').distinct()[:10] Explanation: The distinct() method is used to retrieve distinct last names of all publishers in ascending order using the order_by() method. Only the lastname field is selected using the values_list() method. The first 10 results are selected using slicing [:10].\nQuery 9: Retrieve the latest joined author and the earliest joined publisher result9 = [Authors.objects.all().order_by('joindate').last(), Publishers.objects.all().order_by('-joindate').first()] Explanation: Two queries are executed here, one to retrieve the latest joined author and one to retrieve the earliest joined publisher. In the first query, the last() method is used to retrieve the latest joined author. In the second query, the order_by('-joindate') method is used to order the publishers by joindate in descending order, and the first() method is used to retrieve the earliest joined publisher.\nQuery 10: Retrieve the first name, last name, and join date of the most recently joined author result10 = Authors.objects.all().order_by('-joindate').values_list('firstname', 'lastname', 'joindate').first() Explanation: The order_by('-joindate') method is used to order the authors by joindate in descending order. Only the firstname, lastname, and joindate fields are selected using the values_list() method. The first() method is used to retrieve the first row of the resulting queryset, which contains the most recent joined author in the database.\nQuery 11: Retrieve Authors Joined After 2013 result11 = Authors.objects.all().filter(joindate__year__gte=2013) Explanation: This query retrieves all authors who joined after 2013. The filter() method is used to specify the condition. Here, the joindate field is filtered by its year attribute to retrieve all authors who joined after 2013.\nresult11 = Authors.objects.all().filter(joindate__year__gte=2013) Query 12: Calculate Total Price of Books Written by Popular Authors result12 = Books.objects.all().filter(author__popularity_score__gte=7).aggregate(total_book_price=Sum('price')) Explanation: This query calculates the total price of all books written by authors with a popularity score of 7 or greater. The filter() method is used to filter the books based on the popularity_score of their respective authors. The aggregate() method is used to calculate the total price of all books using the Sum() function.\nresult12 = Books.objects.all().filter(author__popularity_score__gte=7).aggregate(total_book_price=Sum('price')) Query 13: Retrieve Titles of Books Written by Authors with ‚Äòa‚Äô in their Firstname result13 = Books.objects.all().filter(author__firstname__icontains='a').values_list('title', flat=True) Explanation: This query retrieves the titles of all books written by authors whose firstname contains the lowercase letter ‚Äòa‚Äô. The filter() method is used to filter the books based on the firstname of their respective authors. The values_list() method is used to retrieve only the title field of the resulting queryset. The flat=True parameter is used to return the resulting queryset as a flat list.\nresult13 = Books.objects.all().filter(author__firstname__contains='a').values_list('title', flat=True) Query 14: Calculate Average Book Price of Selected Authors result14 = Books.objects.all().filter(author__pk__in=[1, 3, 4]).aggregate('price') Explanation: This query calculates the average price of all books written by a selected group of authors. The filter() method is used to select the authors based on their primary key values. The aggregate() method is used to calculate the average price of all books using the Avg() function.\nQuery 15: Retrieve first name of authors and their recommended author‚Äôs first name result15 = Authors.objects.all().values_list('firstname', 'recommendedby__firstname') Explanation: This query uses the values_list() method to retrieve the first name of authors and their recommended author‚Äôs first name. The recommendedby__firstname attribute is used to access the first name of the recommended author.\nQuery 16: Retrieve authors whose books are published by a specific publisher result16 = Authors.objects.all().filter(books__publisher__pk=1) Explanation: This query uses the filter() method to retrieve all authors whose books are published by a specific publisher. The books__publisher__pk attribute is used to access the publisher‚Äôs primary key.\nQuery 17: Add followers to an author user1 = Users.objects.create(username='user1', email='user1@test.com') user2 = Users.objects.create(username='user2', email='user2@test.com') user3 = Users.objects.create(username='user3', email='user3@test.com') result17 = Authors.objects.get(pk=1).followers.add(user1, user2, user3) Explanation: This query uses the add() method to add multiple followers to an author. The get() method is used to retrieve the author with the specified primary key.\nQuery 18: Set followers for an author user1 = Users.objects.create(username='user1', email='user1@test.com') result18 = Authors.objects.get(pk=2).followers.set(user1) Explanation: This query uses the set() method to set the followers for an author. The get() method is used to retrieve the author with the specified primary key.\nQuery 19: Add a follower to an author user1 = Users.objects.create(username='user1', email='user1@test.com') result19 = Authors.objects.get(pk=1).followers.add(user1) Explanation: This query uses the add() method to add a follower to an author. The get() method is used to retrieve the author with the specified primary key.\nQuery 20: Remove a follower from an author user1 = Users.objects.create(username='user1', email='user1@test.com') result20 = Authors.objects.get(pk=1).followers.remove(user1) Explanation: This query uses the remove() method to remove a follower from an author. The get() method is used to retrieve the author with the specified primary key.\nQuery 21: Retrieve the first names of all authors followed by the user with primary key (pk) equal to 1 result21 = Users.objects.get(pk=1).followed_authors.all().values_list('firstname', flat=True) Explanation: This code uses a foreign key relationship between the Users and Authors models to retrieve all authors followed by a specific user with a primary key of 1. The values_list method with flat=True is used to return a flat list of only the first names of the authors.\nQuery 22: Retrieve all authors who have books with titles containing the string ‚Äútle‚Äù result22 = Authors.objects.all().filter(books__title__icontains='tle') Explanation: This code uses a reverse foreign key relationship between the Authors and Books models to retrieve all authors who have books with titles containing the string ‚Äútle‚Äù. The filter method is used to apply the filter condition. The __icontains lookup is used to perform a case-insensitive match on the book title.\nQuery 23: Retrieve all authors whose first name starts with the letter ‚Äúa‚Äù and either have a popularity score greater than 5 or joined the platform after the year 2014 result23 = Authors.objects.filter(Q(firstname__istartswith='a') \u0026 (Q(popularity_score__gt=5) | Q(joindate__year__gt=2014))) Explanation: This code retrieves all authors whose first name starts with the letter ‚Äúa‚Äù and satisfies at least one of the two conditions:\npopularity score greater than 5 joined the platform after the year 2014. It uses the filter method with a combination of Q objects to create a complex query with multiple conditions. The __istartswith lookup is used to perform a case-insensitive match on the author‚Äôs first name, and the __gt lookup is used to retrieve records with a value greater than the specified number or date. Query 24: Retrieve the author with primary key (pk) equal to 1 result24 = Authors.objects.all().get(pk=1) Explanation: This code retrieves the author record with a primary key (pk) equal to 1 using the get method. It assumes that the Authors model has a primary key field named pk.\nQuery 25: Retrieve the first 10 authors in the database result25 = Authors.objects.all().order_by('joindate')[:10] Explanation: This code retrieves the first 10 authors in the database using the slice notation [:10]. It returns a queryset containing the first 10 records from the Authors model in the order they were created.\nQuery 26: Retrieve the first and last author in the database with a popularity score of 7 qs = Authors.objects.all().filter(popularity_scre=7) author1 = qs.first() author2 = qs.last() result26 = [author1, author2] Explanation: This query retrieves all the authors with a popularity_score of 7, then gets the first and last author in that queryset, and stores them in a list.\nQuery 27: Retrieve all authors whose joindate year is greater than or equal to 2012, popularity_score is greater than or equal to 4, joindate day is greater than or equal to 12, and firstname starts with ‚Äòa‚Äô result27 = Authors.objects.all().filter(joindate__year__gte=2012, popularity_score__gte=4, joindate__day__gte=12, firstame__istartswith='a') Explanation: This query retrieves all the authors whose joindate year is greater than or equal to 2012, popularity_score is greater than or equal to 4, joindate day is greater than or equal to 12, and firstname starts with ‚Äòa‚Äô.\nQuery 28: Retrieve all authors whose joindate year is not equal to 2012 result28 = Authors.objects.all().exclude(joindate__year=2012) Explanation: This query retrieves all the authors whose joindate year is not equal to 2012.\nQuery 29: Retrieve the oldest joindate among all authors, the newest joindate among all authors, the average popularity_score of all authors, and the sum of price of all books oldest_author = Authors.objects.all().aggregate(Min('joindate')) newest_author = Authors.objects.all().aggregate(Max('joindate')) avg_pop_score = Authors.objects.all().aggregate(Avg('popularity_score')) sum_price = Books.objects.all().aggregate(Sum('price')) result29 = [oldest_author, newest_author, avg_pop_score, sum_price] Explanation: This query retrieves the oldest joindate among all authors, the newest joindate among all authors, the average popularity_score of all authors, and the sum of price of all books, and stores them in a list.\nQuery 30: Retrieve all authors who have not been recommended by anyone result30 = Authors.objects.all().filter(recommendedby__isnull=True) Explanation: This query selects all authors who have not been recommended by anyone (i.e., they don‚Äôt have a recommendedby field value).\nQuery 31: Retrieve all books that have an author, and all books that have an author who has not been recommended by anyone one = Books.objects.all().filter(author__isnull=False) two = Books.objects.all().filter(author__isnull=False, author__recommender__isnull=True) result31 = [one, two] Explanation: This query retrieves all books that have an author (i.e., author__isnull=False). The first query in the list (one) retrieves all books with an author, while the second query (two) filters the first query to only include books where the author has not been recommended by anyone (i.e., author__recommender__isnull=True).\nQuery 32: Calculate the sum of the price of all books authored by the author with primary key (pk) equal to 1 result32 = Books.objects.all().filter(author__pk=1).aggregate(Sum('price')) Explanation: This query calculates the sum of the price of all books authored by the author with primary key (PK) equal to 1. It uses the aggregate() method to compute the sum, and the Sum() function to specify the aggregation operation.\nQuery 33: Retrieve the title of the most recently published book result33 = Books.objects.all().order_by('published_date').last().title Explanation: This query retrieves the title of the most recently published book. It does so by first ordering all the books by their published date in ascending order, and then selecting the last book from this list.\nQuery 34: Calculate the average price of all books result34 = Books.objects.all().aggregate(Avg('price')) Explanation: This query computes the average price of all the books in the database. It does so by using the aggregate() method on the queryset, with the Avg() function as the argument. The Avg() function is a database function that computes the average of a given column.\nQuery 35: Calculate the maximum popularity score of all the publishers that have published a book written by the author with primary key 1 result35 = Publishers.objects.filter(books__author__pk=1).aggregate(Max('popularity_score')) Explanation: This query computes the maximum popularity score of all the publishers that have published a book written by the author with primary key 1. It does so by first filtering the Publishers queryset by the books that have been authored by the author with primary key 1. Then, it uses the aggregate() method with the Max() function to compute the maximum popularity score of these publishers.\nQuery 36: Count Authors with Books containing ‚Äòab‚Äô in the title result36 = Authors.objects.filter(books__title__icontains='ab').count() Explanation: This query counts the number of authors who have written at least one book that contains ‚Äòab‚Äô (case-insensitive) in the title.\nQuery 37: Filter Authors by Number of Followers result37 = Authors.objects.annotate(f_count=Count('followers')).filter(f_count__gt=216) Explanation: This query annotates each author with the number of followers they have and then filters the authors to only include those with more than 216 followers.\nQuery 38: Average Popularity Score of Authors who joined after 20th Sep 2014 result38 = Authors.objects.filter(joindate__gt=datetime.date(year=2014, month=9, day=20)).aggregate(Avg('popularity_score')) Explanation: This query filters authors who joined after 20th Sep 2014 and then calculates the average popularity score of those authors.\nQuery 39: Filter Books by Authors who have written more than 10 Books result39 = Books.objects.all().annotate(bk_count=Count('author__books')).filter(bk_count__gt=10).distinct() Explanation: This query annotates each book with the number of authors who have written the book, then filters the books to only include those written by authors who have written more than 10 books. The distinct() method is called to eliminate duplicate books that have multiple authors.\nQuery 40: Filter Books by Title Count result40 = Books.objects.all().annotate(count_title=Count('title')).filter(count_title__gt=1) Explanation: This query annotates each book with the count of books that share the same title, then filters the books to only include those with a title count greater than 1. This could be useful, for example, to find books that have been republished under different titles.\nConclusion In conclusion, this Django ORM cheatsheet and exercises blog post provided an overview of the essential elements of Django‚Äôs ORM. We covered models, querysets, managers, fields, migrations, database routers, aggregation, annotations, and meta options. Each of these elements plays a crucial role in developing robust and scalable applications with Django.\nBy working through the exercises, we learned how to use these elements to query and manipulate data from the database. These exercises provided practical examples of how to use Django‚Äôs ORM to solve real-world problems.\nDjango‚Äôs ORM is a powerful tool that provides a high-level, intuitive interface for interacting with databases. It enables developers to write concise and readable code while also handling complex queries and transactions. By mastering Django‚Äôs ORM, developers can build robust, scalable, and maintainable applications with ease.\n",
  "wordCount" : "3045",
  "inLanguage": "en",
  "image":"https://atharvashah.netlify.app/blog/django-orm.png","datePublished": "2023-02-19T01:18:34+05:30",
  "dateModified": "2023-02-19T01:18:34+05:30",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://atharvashah.netlify.app/posts/tech/django-orm-exercises/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Atharva Shah",
    "logo": {
      "@type": "ImageObject",
      "url": "https://atharvashah.netlify.app/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://atharvashah.netlify.app/" accesskey="h" title="Atharva Shah (Alt + H)">
            <img src="https://atharvashah.netlify.app/profile/header_button.webp" alt="logo" aria-label="logo"
                 height="30">Atharva Shah</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://atharvashah.netlify.app/posts/tech/" title="üíªTech">
                <span>üíªTech</span>
                </a>
            </li>
            <li>
                <a href="https://atharvashah.netlify.app/posts/personal/" title="üçøPersonal">
                <span>üçøPersonal</span>
                </a>
            </li>
            <li>
                <a href="https://atharvashah.netlify.app/about/" title="üë®üèªAbout">
                <span>üë®üèªAbout</span>
                </a>
            </li>
            <li>
                <a href="https://atharvashah.netlify.app/tags/" title="üè∑Ô∏èTags">
                <span>üè∑Ô∏èTags</span>
                </a>
            </li>
            <li>
                <a href="https://atharvashah.netlify.app/archives/" title="üìúArchive">
                <span>üìúArchive</span>
                </a>
            </li>
            <li>
                <a href="https://atharvashah.netlify.app/search/" title="üîçSearch (Alt &#43; /)" accesskey=/>
                <span>üîçSearch</span>
                </a>
            </li>
        </ul>
    </nav>
</header><main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://atharvashah.netlify.app/">Home</a>&nbsp;¬ª&nbsp;<a href="https://atharvashah.netlify.app/posts/">üìö All Posts</a>&nbsp;¬ª&nbsp;<a href="https://atharvashah.netlify.app/posts/tech/">üíª Tech Posts</a></div>
    <h1 class="post-title">
      Ultimate Django ORM Cheatsheet &#43; Exercises
    </h1>
    <div class="post-description">
      Master the basics of Django ORM with this comprehensive cheatsheet and exercises to level up your skills in database querying, model relationships, aggregations, annotations, and more.
    </div>
    <div class="post-meta">

<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>February 19, 2023
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>3045 words
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>15 mins
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
            <span class="post-tags-meta">
                <a href="https://atharvashah.netlify.app/tags/python/" style="color: var(--secondary)!important;">python</a>
                &nbsp;<a href="https://atharvashah.netlify.app/tags/django/" style="color: var(--secondary)!important;">django</a>
            </span>
        </span>
    </span>
</span>

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://atharvashah.netlify.app/blog/django-orm.png" alt="Django ORM Cheatsheet &#43; Exercises">
        <p>Master the basics of Django ORM with this comprehensive cheatsheet and exercises to level up your skills in database querying, model relationships, aggregations, annotations, and more.</p>
</figure><aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#querying-django-models-with-examples" aria-label="Querying Django Models with Examples">Querying Django Models with Examples</a></li>
                <li>
                    <a href="#terminology" aria-label="Terminology">Terminology</a></li>
                <li>
                    <a href="#models-used-in-the-examples" aria-label="Models Used in the Examples">Models Used in the Examples</a></li>
                <li>
                    <a href="#queryset-api-exercises" aria-label="QuerySet API Exercises">QuerySet API Exercises</a><ul>
                        
                <li>
                    <a href="#query-1-fetching-all-books-from-the-database" aria-label="Query 1: Fetching all books from the database">Query 1: Fetching all books from the database</a></li>
                <li>
                    <a href="#query-2-fetching-selected-columns-from-the-books-table" aria-label="Query 2: Fetching selected columns from the Books table">Query 2: Fetching selected columns from the Books table</a></li>
                <li>
                    <a href="#query-3-filtering-records-based-on-a-condition" aria-label="Query 3: Filtering records based on a condition">Query 3: Filtering records based on a condition</a></li>
                <li>
                    <a href="#query-4-filtering-records-based-on-multiple-conditions" aria-label="Query 4: Filtering records based on multiple conditions">Query 4: Filtering records based on multiple conditions</a></li>
                <li>
                    <a href="#query-5-searching-records-based-on-a-substring" aria-label="Query 5: Searching records based on a substring">Query 5: Searching records based on a substring</a></li>
                <li>
                    <a href="#query-6-retrieve-authors-with-specific-primary-keys" aria-label="Query 6: Retrieve authors with specific primary keys">Query 6: Retrieve authors with specific primary keys</a></li>
                <li>
                    <a href="#query-7-retrieve-authors-who-joined-after-a-specific-date" aria-label="Query 7: Retrieve authors who joined after a specific date">Query 7: Retrieve authors who joined after a specific date</a></li>
                <li>
                    <a href="#query-8-retrieve-distinct-publisher-last-name" aria-label="Query 8: Retrieve distinct publisher last name">Query 8: Retrieve distinct publisher last name</a></li>
                <li>
                    <a href="#query-9-retrieve-the-latest-joined-author-and-the-earliest-joined-publisher" aria-label="Query 9: Retrieve the latest joined author and the earliest joined publisher">Query 9: Retrieve the latest joined author and the earliest joined publisher</a></li>
                <li>
                    <a href="#query-10-retrieve-the-first-name-last-name-and-join-date-of-the-most-recently-joined-author" aria-label="Query 10: Retrieve the first name, last name, and join date of the most recently joined author">Query 10: Retrieve the first name, last name, and join date of the most recently joined author</a></li>
                <li>
                    <a href="#query-11-retrieve-authors-joined-after-2013" aria-label="Query 11: Retrieve Authors Joined After 2013">Query 11: Retrieve Authors Joined After 2013</a></li>
                <li>
                    <a href="#query-12-calculate-total-price-of-books-written-by-popular-authors" aria-label="Query 12: Calculate Total Price of Books Written by Popular Authors">Query 12: Calculate Total Price of Books Written by Popular Authors</a></li>
                <li>
                    <a href="#query-13-retrieve-titles-of-books-written-by-authors-with-a-in-their-firstname" aria-label="Query 13: Retrieve Titles of Books Written by Authors with &amp;lsquo;a&amp;rsquo; in their Firstname">Query 13: Retrieve Titles of Books Written by Authors with &lsquo;a&rsquo; in their Firstname</a></li>
                <li>
                    <a href="#query-14-calculate-average-book-price-of-selected-authors" aria-label="Query 14: Calculate Average Book Price of Selected Authors">Query 14: Calculate Average Book Price of Selected Authors</a></li>
                <li>
                    <a href="#query-15-retrieve-first-name-of-authors-and-their-recommended-authors-first-name" aria-label="Query 15: Retrieve first name of authors and their recommended author&amp;rsquo;s first name">Query 15: Retrieve first name of authors and their recommended author&rsquo;s first name</a></li>
                <li>
                    <a href="#query-16-retrieve-authors-whose-books-are-published-by-a-specific-publisher" aria-label="Query 16: Retrieve authors whose books are published by a specific publisher">Query 16: Retrieve authors whose books are published by a specific publisher</a></li>
                <li>
                    <a href="#query-17-add-followers-to-an-author" aria-label="Query 17: Add followers to an author">Query 17: Add followers to an author</a></li>
                <li>
                    <a href="#query-18-set-followers-for-an-author" aria-label="Query 18: Set followers for an author">Query 18: Set followers for an author</a></li>
                <li>
                    <a href="#query-19-add-a-follower-to-an-author" aria-label="Query 19: Add a follower to an author">Query 19: Add a follower to an author</a></li>
                <li>
                    <a href="#query-20-remove-a-follower-from-an-author" aria-label="Query 20: Remove a follower from an author">Query 20: Remove a follower from an author</a></li>
                <li>
                    <a href="#query-21-retrieve-the-first-names-of-all-authors-followed-by-the-user-with-primary-key-pk-equal-to-1" aria-label="Query 21: Retrieve the first names of all authors followed by the user with primary key (pk) equal to 1">Query 21: Retrieve the first names of all authors followed by the user with primary key (pk) equal to 1</a></li>
                <li>
                    <a href="#query-22-retrieve-all-authors-who-have-books-with-titles-containing-the-string-tle" aria-label="Query 22: Retrieve all authors who have books with titles containing the string &amp;ldquo;tle&amp;rdquo;">Query 22: Retrieve all authors who have books with titles containing the string &ldquo;tle&rdquo;</a></li>
                <li>
                    <a href="#query-23-retrieve-all-authors-whose-first-name-starts-with-the-letter-a-and-either-have-a-popularity-score-greater-than-5-or-joined-the-platform-after-the-year-2014" aria-label="Query 23: Retrieve all authors whose first name starts with the letter &amp;ldquo;a&amp;rdquo; and either have a popularity score greater than 5 or joined the platform after the year 2014">Query 23: Retrieve all authors whose first name starts with the letter &ldquo;a&rdquo; and either have a popularity score greater than 5 or joined the platform after the year 2014</a></li>
                <li>
                    <a href="#query-24-retrieve-the-author-with-primary-key-pk-equal-to-1" aria-label="Query 24: Retrieve the author with primary key (pk) equal to 1">Query 24: Retrieve the author with primary key (pk) equal to 1</a></li>
                <li>
                    <a href="#query-25-retrieve-the-first-10-authors-in-the-database" aria-label="Query 25: Retrieve the first 10 authors in the database">Query 25: Retrieve the first 10 authors in the database</a></li>
                <li>
                    <a href="#query-26-retrieve-the-first-and-last-author-in-the-database-with-a-popularity-score-of-7" aria-label="Query 26: Retrieve the first and last author in the database with a popularity score of 7">Query 26: Retrieve the first and last author in the database with a popularity score of 7</a></li>
                <li>
                    <a href="#query-27-retrieve-all-authors-whose-joindate-year-is-greater-than-or-equal-to-2012-popularity_score-is-greater-than-or-equal-to-4-joindate-day-is-greater-than-or-equal-to-12-and-firstname-starts-with-a" aria-label="Query 27: Retrieve all authors whose joindate year is greater than or equal to 2012, popularity_score is greater than or equal to 4, joindate day is greater than or equal to 12, and firstname starts with &amp;lsquo;a&amp;rsquo;">Query 27: Retrieve all authors whose joindate year is greater than or equal to 2012, popularity_score is greater than or equal to 4, joindate day is greater than or equal to 12, and firstname starts with &lsquo;a&rsquo;</a></li>
                <li>
                    <a href="#query-28-retrieve-all-authors-whose-joindate-year-is-not-equal-to-2012" aria-label="Query 28: Retrieve all authors whose joindate year is not equal to 2012">Query 28: Retrieve all authors whose joindate year is not equal to 2012</a></li>
                <li>
                    <a href="#query-29-retrieve-the-oldest-joindate-among-all-authors-the-newest-joindate-among-all-authors-the-average-popularity_score-of-all-authors-and-the-sum-of-price-of-all-books" aria-label="Query 29: Retrieve the oldest joindate among all authors, the newest joindate among all authors, the average popularity_score of all authors, and the sum of price of all books">Query 29: Retrieve the oldest <code>joindate</code> among all authors, the newest <code>joindate</code> among all authors, the average <code>popularity_score</code> of all authors, and the sum of <code>price</code> of all books</a></li>
                <li>
                    <a href="#query-30-retrieve-all-authors-who-have-not-been-recommended-by-anyone" aria-label="Query 30: Retrieve all authors who have not been recommended by anyone">Query 30: Retrieve all authors who have not been recommended by anyone</a></li>
                <li>
                    <a href="#query-31-retrieve-all-books-that-have-an-author-and-all-books-that-have-an-author-who-has-not-been-recommended-by-anyone" aria-label="Query 31: Retrieve all books that have an author, and all books that have an author who has not been recommended by anyone">Query 31: Retrieve all books that have an author, and all books that have an author who has not been recommended by anyone</a></li>
                <li>
                    <a href="#query-32-calculate-the-sum-of-the-price-of-all-books-authored-by-the-author-with-primary-key-pk-equal-to-1" aria-label="Query 32: Calculate the sum of the price of all books authored by the author with primary key (pk) equal to 1">Query 32: Calculate the sum of the price of all books authored by the author with primary key (pk) equal to 1</a></li>
                <li>
                    <a href="#query-33-retrieve-the-title-of-the-most-recently-published-book" aria-label="Query 33: Retrieve the title of the most recently published book">Query 33: Retrieve the title of the most recently published book</a></li>
                <li>
                    <a href="#query-34-calculate-the-average-price-of-all-books" aria-label="Query 34: Calculate the average price of all books">Query 34: Calculate the average price of all books</a></li>
                <li>
                    <a href="#query-35-calculate-the-maximum-popularity-score-of-all-the-publishers-that-have-published-a-book-written-by-the-author-with-primary-key-1" aria-label="Query 35: Calculate the maximum popularity score of all the publishers that have published a book written by the author with primary key 1">Query 35: Calculate the maximum popularity score of all the publishers that have published a book written by the author with primary key 1</a></li>
                <li>
                    <a href="#query-36-count-authors-with-books-containing-ab-in-the-title" aria-label="Query 36: Count Authors with Books containing &amp;lsquo;ab&amp;rsquo; in the title">Query 36: Count Authors with Books containing &lsquo;ab&rsquo; in the title</a></li>
                <li>
                    <a href="#query-37-filter-authors-by-number-of-followers" aria-label="Query 37: Filter Authors by Number of Followers">Query 37: Filter Authors by Number of Followers</a></li>
                <li>
                    <a href="#query-38-average-popularity-score-of-authors-who-joined-after-20th-sep-2014" aria-label="Query 38: Average Popularity Score of Authors who joined after 20th Sep 2014">Query 38: Average Popularity Score of Authors who joined after 20th Sep 2014</a></li>
                <li>
                    <a href="#query-39-filter-books-by-authors-who-have-written-more-than-10-books" aria-label="Query 39: Filter Books by Authors who have written more than 10 Books">Query 39: Filter Books by Authors who have written more than 10 Books</a></li>
                <li>
                    <a href="#query-40-filter-books-by-title-count" aria-label="Query 40: Filter Books by Title Count">Query 40: Filter Books by Title Count</a></li></ul>
                </li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        if (elements) {
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                    (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                    return element;
                }
            }) || activeElement

            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                if (element === activeElement){
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
                } else {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
                }
            })
        }
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
  <div class="post-content"><h2 id="querying-django-models-with-examples">Querying Django Models with Examples<a hidden class="anchor" aria-hidden="true" href="#querying-django-models-with-examples">#</a></h2>
<p>In Django, querying the database is an essential task when working with models. Django&rsquo;s QuerySet API provides an extensive range of methods to query the database efficiently.</p>
<p>In this article, we&rsquo;ll go over several examples of how to query Django models using the QuerySet API, along with code snippets that demonstrate the functionality of each method.</p>
<h2 id="terminology">Terminology<a hidden class="anchor" aria-hidden="true" href="#terminology">#</a></h2>
<p>Let us first go over some of the terminology that is used in conjunction with the QuerySet API. The following terms are used in the examples below:</p>
<ul>
<li><strong>Models:</strong> Django models are Python classes that define the structure and behavior of database tables. They encapsulate fields and relationships and provide methods to interact with the data.</li>
<li><strong>QuerySets:</strong> QuerySets are objects that allow you to retrieve, filter, and manipulate data from the database. They are lazy, meaning that they only fetch data when needed, and can be chained together to form complex queries.</li>
<li><strong>Managers:</strong> Managers provide methods for working with QuerySets. They allow you to create reusable queries and define custom methods to retrieve data from the database.</li>
<li><strong>Fields:</strong> Fields define the type of data that can be stored in a model&rsquo;s attribute or database column. They provide validation and conversion of input data and map to the appropriate SQL type.</li>
<li><strong>Migrations:</strong> Migrations allow you to modify the database schema and keep track of changes to models over time. They provide a convenient way to manage changes to the database schema and apply them to the database.</li>
<li><strong>Database routers:</strong> Database routers allow you to specify which database to use for different models or queries. They allow you to distribute data across multiple databases or use different databases for read and write operations.</li>
<li><strong>Aggregation:</strong> Aggregation provides methods for performing calculations on QuerySets, such as Sum, Count, Avg, and Max. They are used to retrieve statistics or summary information about the data in the database.</li>
<li><strong>Annotations:</strong> Annotations allow you to add calculated fields to QuerySets based on database functions or other fields. They are used to add computed or aggregated data to QuerySets.</li>
<li><strong>Meta options:</strong> Meta options provide additional settings for models, such as ordering, database table names, and unique constraints. They allow you to customize the behavior of models at the class level.</li>
</ul>
<h2 id="models-used-in-the-examples">Models Used in the Examples<a hidden class="anchor" aria-hidden="true" href="#models-used-in-the-examples">#</a></h2>
<p>The following models are used in the examples below. Take a look at the code to get a better understanding of the relationships between the models.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> django.db <span style="color:#f92672">import</span> models
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Author</span>(models<span style="color:#f92672">.</span>Model):
</span></span><span style="display:flex;"><span>  firstname <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  lastname <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  address <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>, null<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>  zipcode <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>IntegerField(null<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>  telephone <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>, null<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>  recommendedby <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>ForeignKey(<span style="color:#e6db74">&#39;Author&#39;</span>, on_delete<span style="color:#f92672">=</span>models<span style="color:#f92672">.</span>CASCADE, related_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;recommended_authors&#39;</span>, related_query_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;recommended_authors&#39;</span>, null<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>  joindate <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>DateField()
</span></span><span style="display:flex;"><span>  popularity_score <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>IntegerField()
</span></span><span style="display:flex;"><span>  followers <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>ManyToManyField(<span style="color:#e6db74">&#39;User&#39;</span>, related_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;followed_authors&#39;</span>, related_query_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;followed_authors&#39;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> __str__(self):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>firstname <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; &#39;</span> <span style="color:#f92672">+</span> self<span style="color:#f92672">.</span>lastname
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Books</span>(models<span style="color:#f92672">.</span>Model):
</span></span><span style="display:flex;"><span>  title <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  genre <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>)
</span></span><span style="display:flex;"><span>  price <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>IntegerField(null<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>  published_date <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>DateField()
</span></span><span style="display:flex;"><span>  author <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>ForeignKey(<span style="color:#e6db74">&#39;Author&#39;</span>, on_delete<span style="color:#f92672">=</span>models<span style="color:#f92672">.</span>CASCADE, related_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;books&#39;</span>, related_query_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;books&#39;</span>)
</span></span><span style="display:flex;"><span>  publisher <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>ForeignKey(<span style="color:#e6db74">&#39;Publisher&#39;</span>, on_delete<span style="color:#f92672">=</span>models<span style="color:#f92672">.</span>CASCADE, related_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;books&#39;</span>, related_query_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;books&#39;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> __str__(self):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>title
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Publisher</span>(models<span style="color:#f92672">.</span>Model):
</span></span><span style="display:flex;"><span>  firstname <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  lastname <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  recommendedby <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>ForeignKey(<span style="color:#e6db74">&#39;Publisher&#39;</span>, on_delete<span style="color:#f92672">=</span>models<span style="color:#f92672">.</span>CASCADE, null<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>   joindate <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>DateField()
</span></span><span style="display:flex;"><span>  popularity_score <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>IntegerField()
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> __str__(self):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>firstname <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; &#39;</span> <span style="color:#f92672">+</span> self<span style="color:#f92672">.</span>lastname
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span>(models<span style="color:#f92672">.</span>Model):
</span></span><span style="display:flex;"><span>  username <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  email <span style="color:#f92672">=</span> models<span style="color:#f92672">.</span>CharField(max_length<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">def</span> __str__(self):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>username
</span></span></code></pre></div><h2 id="queryset-api-exercises">QuerySet API Exercises<a hidden class="anchor" aria-hidden="true" href="#queryset-api-exercises">#</a></h2>
<h3 id="query-1-fetching-all-books-from-the-database">Query 1: Fetching all books from the database<a hidden class="anchor" aria-hidden="true" href="#query-1-fetching-all-books-from-the-database">#</a></h3>
<p><strong>Explanation</strong>: The <code>all()</code> method returns all the records from the model it is called on. In this case, it will fetch all the records from the <code>Books</code> model. The <code>Books</code> model is assumed to be defined in the <code>main</code> app.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result1 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()
</span></span></code></pre></div><h3 id="query-2-fetching-selected-columns-from-the-books-table">Query 2: Fetching selected columns from the Books table<a hidden class="anchor" aria-hidden="true" href="#query-2-fetching-selected-columns-from-the-books-table">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result2 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;title&#39;</span>, <span style="color:#e6db74">&#39;published_date&#39;</span>)
</span></span></code></pre></div><p><strong>Explanation</strong>: The <code>values_list()</code> method is used to retrieve specific columns from the model. In this case, only the <code>title</code> and <code>published_date</code> columns are selected.</p>
<h3 id="query-3-filtering-records-based-on-a-condition">Query 3: Filtering records based on a condition<a hidden class="anchor" aria-hidden="true" href="#query-3-filtering-records-based-on-a-condition">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result3 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(popularity_score<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;firstname&#39;</span>, <span style="color:#e6db74">&#39;lastname&#39;</span>)
</span></span></code></pre></div><p><strong>Explanation</strong>: The <code>filter()</code> method is used to retrieve records that match a specific condition. In this case, the condition is that <code>popularity_score</code> should be equal to 0. The <code>values_list()</code> method is used to retrieve only the <code>firstname</code> and <code>lastname</code> fields from the retrieved records.</p>
<h3 id="query-4-filtering-records-based-on-multiple-conditions">Query 4: Filtering records based on multiple conditions<a hidden class="anchor" aria-hidden="true" href="#query-4-filtering-records-based-on-multiple-conditions">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result4 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(firstname__startswith<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;a&#39;</span>, popularity_score__gte<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>)<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;firstname&#39;</span>, <span style="color:#e6db74">&#39;popularity_score&#39;</span>)
</span></span></code></pre></div><p><strong>Explanation</strong>: The <code>filter()</code> method is used to retrieve records that match multiple conditions. In this case, the conditions are that <code>firstname</code> should start with &lsquo;a&rsquo; and <code>popularity_score</code> should be greater than or equal to 8. The <code>values_list()</code> method is used to retrieve only the <code>firstname</code> and <code>popularity_score</code> fields from the retrieved records.</p>
<h3 id="query-5-searching-records-based-on-a-substring">Query 5: Searching records based on a substring<a hidden class="anchor" aria-hidden="true" href="#query-5-searching-records-based-on-a-substring">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result5 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(firstname__icontains<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;aa&#39;</span>)<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;firstname&#39;</span>)
</span></span></code></pre></div><p><strong>Explanation</strong>: The <code>filter()</code> method is used to retrieve records that contain a specific substring. In this case, the substring is &lsquo;aa&rsquo;. The <code>values_list()</code> method is used to retrieve only the <code>firstname</code> field from the retrieved records. The <code>icontains</code> lookup is used to perform a case-insensitive search for the specified substring.</p>
<h3 id="query-6-retrieve-authors-with-specific-primary-keys">Query 6: Retrieve authors with specific primary keys<a hidden class="anchor" aria-hidden="true" href="#query-6-retrieve-authors-with-specific-primary-keys">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result6 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(pk__in<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">43</span>, <span style="color:#ae81ff">134</span>, <span style="color:#ae81ff">25</span>])
</span></span></code></pre></div><p><strong>Explanation</strong>: The filter() method is used to retrieve authors with primary keys specified in the <code>pk__in</code> argument. The <code>pk</code> in <code>pk__in</code> stands for primary key. In this case, the primary keys are <code>[1, 3, 23, 43, 134, 25]</code>.</p>
<h3 id="query-7-retrieve-authors-who-joined-after-a-specific-date">Query 7: Retrieve authors who joined after a specific date<a hidden class="anchor" aria-hidden="true" href="#query-7-retrieve-authors-who-joined-after-a-specific-date">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result7 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(joindate__gte<span style="color:#f92672">=</span>datetime<span style="color:#f92672">.</span>date(year<span style="color:#f92672">=</span><span style="color:#ae81ff">2012</span>, month<span style="color:#f92672">=</span><span style="color:#ae81ff">9</span>, day<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>))<span style="color:#f92672">.</span>order_by(<span style="color:#e6db74">&#39;joindate&#39;</span>)<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;firstname&#39;</span>, <span style="color:#e6db74">&#39;joindate&#39;</span>)
</span></span></code></pre></div><p><strong>Explanation</strong>: The filter() method is used to retrieve authors who joined after September 1, 2012, using the <code>joindate__gte</code> lookup. The <code>gte</code> in <code>joindate__gte</code> stands for greater than or equal to. The results are ordered by <code>joindate</code> in ascending order using the <code>order_by()</code> method. Only the <code>firstname</code> and <code>joindate</code> fields are selected using the <code>values_list()</code> method.</p>
<h3 id="query-8-retrieve-distinct-publisher-last-name">Query 8: Retrieve distinct publisher last name<a hidden class="anchor" aria-hidden="true" href="#query-8-retrieve-distinct-publisher-last-name">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result8 <span style="color:#f92672">=</span> Publishers<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>order_by(<span style="color:#e6db74">&#39;lastname&#39;</span>)<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;lastname&#39;</span>)<span style="color:#f92672">.</span>distinct()[:<span style="color:#ae81ff">10</span>]
</span></span></code></pre></div><p><strong>Explanation</strong>: The <code>distinct()</code> method is used to retrieve distinct last names of all publishers in ascending order using the <code>order_by()</code> method. Only the <code>lastname</code> field is selected using the <code>values_list()</code> method. The first 10 results are selected using slicing <code>[:10]</code>.</p>
<h3 id="query-9-retrieve-the-latest-joined-author-and-the-earliest-joined-publisher">Query 9: Retrieve the latest joined author and the earliest joined publisher<a hidden class="anchor" aria-hidden="true" href="#query-9-retrieve-the-latest-joined-author-and-the-earliest-joined-publisher">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result9 <span style="color:#f92672">=</span> [Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>order_by(<span style="color:#e6db74">&#39;joindate&#39;</span>)<span style="color:#f92672">.</span>last(),
</span></span><span style="display:flex;"><span>        Publishers<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>order_by(<span style="color:#e6db74">&#39;-joindate&#39;</span>)<span style="color:#f92672">.</span>first()]
</span></span></code></pre></div><p><strong>Explanation</strong>: Two queries are executed here, one to retrieve the latest joined author and one to retrieve the earliest joined publisher. In the first query, the <code>last()</code> method is used to retrieve the latest joined author. In the second query, the <code>order_by('-joindate')</code> method is used to order the publishers by <code>joindate</code> in descending order, and the <code>first()</code> method is used to retrieve the earliest joined publisher.</p>
<h3 id="query-10-retrieve-the-first-name-last-name-and-join-date-of-the-most-recently-joined-author">Query 10: Retrieve the first name, last name, and join date of the most recently joined author<a hidden class="anchor" aria-hidden="true" href="#query-10-retrieve-the-first-name-last-name-and-join-date-of-the-most-recently-joined-author">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result10 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>order_by(<span style="color:#e6db74">&#39;-joindate&#39;</span>)<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;firstname&#39;</span>, <span style="color:#e6db74">&#39;lastname&#39;</span>, <span style="color:#e6db74">&#39;joindate&#39;</span>)<span style="color:#f92672">.</span>first()
</span></span></code></pre></div><p><strong>Explanation</strong>: The <code>order_by('-joindate')</code> method is used to order the authors by <code>joindate</code> in descending order. Only the <code>firstname</code>, <code>lastname</code>, and <code>joindate</code> fields are selected using the <code>values_list()</code> method. The <code>first()</code> method is used to retrieve the first row of the resulting queryset, which contains the most recent joined author in the database.</p>
<h3 id="query-11-retrieve-authors-joined-after-2013">Query 11: Retrieve Authors Joined After 2013<a hidden class="anchor" aria-hidden="true" href="#query-11-retrieve-authors-joined-after-2013">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result11 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(joindate__year__gte<span style="color:#f92672">=</span><span style="color:#ae81ff">2013</span>)
</span></span></code></pre></div><p><strong>Explanation:</strong> This query retrieves all authors who joined after 2013. The filter() method is used to specify the condition. Here, the joindate field is filtered by its year attribute to retrieve all authors who joined after 2013.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result11 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(joindate__year__gte<span style="color:#f92672">=</span><span style="color:#ae81ff">2013</span>)
</span></span></code></pre></div><h3 id="query-12-calculate-total-price-of-books-written-by-popular-authors">Query 12: Calculate Total Price of Books Written by Popular Authors<a hidden class="anchor" aria-hidden="true" href="#query-12-calculate-total-price-of-books-written-by-popular-authors">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result12 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(author__popularity_score__gte<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span>)<span style="color:#f92672">.</span>aggregate(total_book_price<span style="color:#f92672">=</span>Sum(<span style="color:#e6db74">&#39;price&#39;</span>))
</span></span></code></pre></div><p><strong>Explanation:</strong> This query calculates the total price of all books written by authors with a popularity score of 7 or greater. The filter() method is used to filter the books based on the popularity_score of their respective authors. The aggregate() method is used to calculate the total price of all books using the Sum() function.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result12 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(author__popularity_score__gte<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span>)<span style="color:#f92672">.</span>aggregate(total_book_price<span style="color:#f92672">=</span>Sum(<span style="color:#e6db74">&#39;price&#39;</span>))
</span></span></code></pre></div><h3 id="query-13-retrieve-titles-of-books-written-by-authors-with-a-in-their-firstname">Query 13: Retrieve Titles of Books Written by Authors with &lsquo;a&rsquo; in their Firstname<a hidden class="anchor" aria-hidden="true" href="#query-13-retrieve-titles-of-books-written-by-authors-with-a-in-their-firstname">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result13 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(author__firstname__icontains<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;a&#39;</span>)<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;title&#39;</span>, flat<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><p><strong>Explanation:</strong> This query retrieves the titles of all books written by authors whose firstname contains the lowercase letter &lsquo;a&rsquo;. The filter() method is used to filter the books based on the firstname of their respective authors. The values_list() method is used to retrieve only the title field of the resulting queryset. The flat=True parameter is used to return the resulting queryset as a flat list.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result13 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(author__firstname__contains<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;a&#39;</span>)<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;title&#39;</span>, flat<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><h3 id="query-14-calculate-average-book-price-of-selected-authors">Query 14: Calculate Average Book Price of Selected Authors<a hidden class="anchor" aria-hidden="true" href="#query-14-calculate-average-book-price-of-selected-authors">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result14 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(author__pk__in<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>])<span style="color:#f92672">.</span>aggregate(<span style="color:#e6db74">&#39;price&#39;</span>)
</span></span></code></pre></div><p><strong>Explanation:</strong> This query calculates the average price of all books written by a selected group of authors. The filter() method is used to select the authors based on their primary key values. The aggregate() method is used to calculate the average price of all books using the Avg() function.</p>
<h3 id="query-15-retrieve-first-name-of-authors-and-their-recommended-authors-first-name">Query 15: Retrieve first name of authors and their recommended author&rsquo;s first name<a hidden class="anchor" aria-hidden="true" href="#query-15-retrieve-first-name-of-authors-and-their-recommended-authors-first-name">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result15 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;firstname&#39;</span>, <span style="color:#e6db74">&#39;recommendedby__firstname&#39;</span>)
</span></span></code></pre></div><p><strong>Explanation:</strong>  This query uses the <code>values_list()</code> method to retrieve the first name of authors and their recommended author&rsquo;s first name. The <code>recommendedby__firstname</code> attribute is used to access the first name of the recommended author.</p>
<h3 id="query-16-retrieve-authors-whose-books-are-published-by-a-specific-publisher">Query 16: Retrieve authors whose books are published by a specific publisher<a hidden class="anchor" aria-hidden="true" href="#query-16-retrieve-authors-whose-books-are-published-by-a-specific-publisher">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result16 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(books__publisher__pk<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><p><strong>Explanation:</strong> This query uses the <code>filter()</code> method to retrieve all authors whose books are published by a specific publisher. The <code>books__publisher__pk</code> attribute is used to access the publisher&rsquo;s primary key.</p>
<h3 id="query-17-add-followers-to-an-author">Query 17: Add followers to an author<a hidden class="anchor" aria-hidden="true" href="#query-17-add-followers-to-an-author">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>user1 <span style="color:#f92672">=</span> Users<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>create(username<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user1&#39;</span>, email<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user1@test.com&#39;</span>)
</span></span><span style="display:flex;"><span>user2 <span style="color:#f92672">=</span> Users<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>create(username<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user2&#39;</span>, email<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user2@test.com&#39;</span>)
</span></span><span style="display:flex;"><span>user3 <span style="color:#f92672">=</span> Users<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>create(username<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user3&#39;</span>, email<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user3@test.com&#39;</span>)
</span></span><span style="display:flex;"><span>result17 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(pk<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>followers<span style="color:#f92672">.</span>add(user1, user2, user3)
</span></span></code></pre></div><p><strong>Explanation:</strong> This query uses the <code>add()</code> method to add multiple followers to an author. The <code>get()</code> method is used to retrieve the author with the specified primary key.</p>
<h3 id="query-18-set-followers-for-an-author">Query 18: Set followers for an author<a hidden class="anchor" aria-hidden="true" href="#query-18-set-followers-for-an-author">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>user1 <span style="color:#f92672">=</span> Users<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>create(username<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user1&#39;</span>, email<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user1@test.com&#39;</span>)
</span></span><span style="display:flex;"><span>result18 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(pk<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)<span style="color:#f92672">.</span>followers<span style="color:#f92672">.</span>set(user1)
</span></span></code></pre></div><p><strong>Explanation</strong>: This query uses the <code>set()</code> method to set the followers for an author. The <code>get()</code> method is used to retrieve the author with the specified primary key.</p>
<h3 id="query-19-add-a-follower-to-an-author">Query 19: Add a follower to an author<a hidden class="anchor" aria-hidden="true" href="#query-19-add-a-follower-to-an-author">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>user1 <span style="color:#f92672">=</span> Users<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>create(username<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user1&#39;</span>, email<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user1@test.com&#39;</span>)
</span></span><span style="display:flex;"><span>result19 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(pk<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>followers<span style="color:#f92672">.</span>add(user1)
</span></span></code></pre></div><p><strong>Explanation</strong>: This query uses the <code>add()</code> method to add a follower to an author. The <code>get()</code> method is used to retrieve the author with the specified primary key.</p>
<h3 id="query-20-remove-a-follower-from-an-author">Query 20: Remove a follower from an author<a hidden class="anchor" aria-hidden="true" href="#query-20-remove-a-follower-from-an-author">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>user1 <span style="color:#f92672">=</span> Users<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>create(username<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user1&#39;</span>, email<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user1@test.com&#39;</span>)
</span></span><span style="display:flex;"><span>result20 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(pk<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>followers<span style="color:#f92672">.</span>remove(user1)
</span></span></code></pre></div><p><strong>Explanation</strong>: This query uses the <code>remove()</code> method to remove a follower from an author. The <code>get()</code> method is used to retrieve the author with the specified primary key.</p>
<h3 id="query-21-retrieve-the-first-names-of-all-authors-followed-by-the-user-with-primary-key-pk-equal-to-1">Query 21: Retrieve the first names of all authors followed by the user with primary key (pk) equal to 1<a hidden class="anchor" aria-hidden="true" href="#query-21-retrieve-the-first-names-of-all-authors-followed-by-the-user-with-primary-key-pk-equal-to-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result21 <span style="color:#f92672">=</span> Users<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(pk<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>followed_authors<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>values_list(<span style="color:#e6db74">&#39;firstname&#39;</span>, flat<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><p><strong>Explanation:</strong> This code uses a foreign key relationship between the <code>Users</code> and <code>Authors</code> models to retrieve all authors followed by a specific user with a primary key of 1. The <code>values_list</code> method with <code>flat=True</code> is used to return a flat list of only the first names of the authors.</p>
<h3 id="query-22-retrieve-all-authors-who-have-books-with-titles-containing-the-string-tle">Query 22: Retrieve all authors who have books with titles containing the string &ldquo;tle&rdquo;<a hidden class="anchor" aria-hidden="true" href="#query-22-retrieve-all-authors-who-have-books-with-titles-containing-the-string-tle">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result22 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(books__title__icontains<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;tle&#39;</span>)
</span></span></code></pre></div><p><strong>Explanation:</strong> This code uses a reverse foreign key relationship between the <code>Authors</code> and <code>Books</code> models to retrieve all authors who have books with titles containing the string &ldquo;tle&rdquo;. The <code>filter</code> method is used to apply the filter condition. The <code>__icontains</code> lookup is used to perform a case-insensitive match on the book title.</p>
<h3 id="query-23-retrieve-all-authors-whose-first-name-starts-with-the-letter-a-and-either-have-a-popularity-score-greater-than-5-or-joined-the-platform-after-the-year-2014">Query 23: Retrieve all authors whose first name starts with the letter &ldquo;a&rdquo; and either have a popularity score greater than 5 or joined the platform after the year 2014<a hidden class="anchor" aria-hidden="true" href="#query-23-retrieve-all-authors-whose-first-name-starts-with-the-letter-a-and-either-have-a-popularity-score-greater-than-5-or-joined-the-platform-after-the-year-2014">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result23 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(Q(firstname__istartswith<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;a&#39;</span>) <span style="color:#f92672">&amp;</span> (Q(popularity_score__gt<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>) <span style="color:#f92672">|</span> Q(joindate__year__gt<span style="color:#f92672">=</span><span style="color:#ae81ff">2014</span>)))
</span></span></code></pre></div><p><strong>Explanation:</strong>  This code retrieves all authors whose first name starts with the letter &ldquo;a&rdquo; and satisfies at least one of the two conditions:</p>
<ul>
<li>popularity score greater than 5</li>
<li>joined the platform after the year 2014. It uses the <code>filter</code> method with a combination of <code>Q</code> objects to create a complex query with multiple conditions. The <code>__istartswith</code> lookup is used to perform a case-insensitive match on the author&rsquo;s first name, and the <code>__gt</code> lookup is used to retrieve records with a value greater than the specified number or date.</li>
</ul>
<h3 id="query-24-retrieve-the-author-with-primary-key-pk-equal-to-1">Query 24: Retrieve the author with primary key (pk) equal to 1<a hidden class="anchor" aria-hidden="true" href="#query-24-retrieve-the-author-with-primary-key-pk-equal-to-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result24 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>get(pk<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><p><strong>Explanation:</strong> This code retrieves the author record with a primary key (pk) equal to 1 using the <code>get</code> method. It assumes that the <code>Authors</code> model has a primary key field named <code>pk</code>.</p>
<h3 id="query-25-retrieve-the-first-10-authors-in-the-database">Query 25: Retrieve the first 10 authors in the database<a hidden class="anchor" aria-hidden="true" href="#query-25-retrieve-the-first-10-authors-in-the-database">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result25 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>order_by(<span style="color:#e6db74">&#39;joindate&#39;</span>)[:<span style="color:#ae81ff">10</span>]
</span></span></code></pre></div><p><strong>Explanation:</strong> This code retrieves the first 10 authors in the database using the slice notation <code>[:10]</code>. It returns a queryset containing the first 10 records from the <code>Authors</code> model in the order they were created.</p>
<h3 id="query-26-retrieve-the-first-and-last-author-in-the-database-with-a-popularity-score-of-7">Query 26: Retrieve the first and last author in the database with a popularity score of 7<a hidden class="anchor" aria-hidden="true" href="#query-26-retrieve-the-first-and-last-author-in-the-database-with-a-popularity-score-of-7">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>qs <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(popularity_scre<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span>)
</span></span><span style="display:flex;"><span>author1 <span style="color:#f92672">=</span> qs<span style="color:#f92672">.</span>first()
</span></span><span style="display:flex;"><span>author2 <span style="color:#f92672">=</span> qs<span style="color:#f92672">.</span>last()
</span></span><span style="display:flex;"><span>result26 <span style="color:#f92672">=</span> [author1, author2]
</span></span></code></pre></div><p><strong>Explanation:</strong> This query retrieves all the authors with a <code>popularity_score</code> of 7, then gets the first and last author in that queryset, and stores them in a list.</p>
<h3 id="query-27-retrieve-all-authors-whose-joindate-year-is-greater-than-or-equal-to-2012-popularity_score-is-greater-than-or-equal-to-4-joindate-day-is-greater-than-or-equal-to-12-and-firstname-starts-with-a">Query 27: Retrieve all authors whose joindate year is greater than or equal to 2012, popularity_score is greater than or equal to 4, joindate day is greater than or equal to 12, and firstname starts with &lsquo;a&rsquo;<a hidden class="anchor" aria-hidden="true" href="#query-27-retrieve-all-authors-whose-joindate-year-is-greater-than-or-equal-to-2012-popularity_score-is-greater-than-or-equal-to-4-joindate-day-is-greater-than-or-equal-to-12-and-firstname-starts-with-a">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result27 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(joindate__year__gte<span style="color:#f92672">=</span><span style="color:#ae81ff">2012</span>, popularity_score__gte<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>, joindate__day__gte<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>, firstame__istartswith<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;a&#39;</span>)
</span></span></code></pre></div><p><strong>Explanation:</strong> This query retrieves all the authors whose <code>joindate</code> year is greater than or equal to 2012, <code>popularity_score</code> is greater than or equal to 4, <code>joindate</code> day is greater than or equal to 12, and <code>firstname</code> starts with &lsquo;a&rsquo;.</p>
<h3 id="query-28-retrieve-all-authors-whose-joindate-year-is-not-equal-to-2012">Query 28: Retrieve all authors whose joindate year is not equal to 2012<a hidden class="anchor" aria-hidden="true" href="#query-28-retrieve-all-authors-whose-joindate-year-is-not-equal-to-2012">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result28 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>exclude(joindate__year<span style="color:#f92672">=</span><span style="color:#ae81ff">2012</span>)
</span></span></code></pre></div><p><strong>Explanation:</strong> This query retrieves all the authors whose <code>joindate</code> year is not equal to 2012.</p>
<h3 id="query-29-retrieve-the-oldest-joindate-among-all-authors-the-newest-joindate-among-all-authors-the-average-popularity_score-of-all-authors-and-the-sum-of-price-of-all-books">Query 29: Retrieve the oldest <code>joindate</code> among all authors, the newest <code>joindate</code> among all authors, the average <code>popularity_score</code> of all authors, and the sum of <code>price</code> of all books<a hidden class="anchor" aria-hidden="true" href="#query-29-retrieve-the-oldest-joindate-among-all-authors-the-newest-joindate-among-all-authors-the-average-popularity_score-of-all-authors-and-the-sum-of-price-of-all-books">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>oldest_author <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>aggregate(Min(<span style="color:#e6db74">&#39;joindate&#39;</span>))
</span></span><span style="display:flex;"><span>newest_author <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>aggregate(Max(<span style="color:#e6db74">&#39;joindate&#39;</span>))
</span></span><span style="display:flex;"><span>avg_pop_score <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>aggregate(Avg(<span style="color:#e6db74">&#39;popularity_score&#39;</span>))
</span></span><span style="display:flex;"><span>sum_price <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>aggregate(Sum(<span style="color:#e6db74">&#39;price&#39;</span>))
</span></span><span style="display:flex;"><span>result29 <span style="color:#f92672">=</span> [oldest_author, newest_author, avg_pop_score, sum_price]
</span></span></code></pre></div><p><strong>Explanation:</strong> This query retrieves the oldest <code>joindate</code> among all authors, the newest <code>joindate</code> among all authors, the average <code>popularity_score</code> of all authors, and the sum of <code>price</code> of all books, and stores them in a list.</p>
<h3 id="query-30-retrieve-all-authors-who-have-not-been-recommended-by-anyone">Query 30: Retrieve all authors who have not been recommended by anyone<a hidden class="anchor" aria-hidden="true" href="#query-30-retrieve-all-authors-who-have-not-been-recommended-by-anyone">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result30 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(recommendedby__isnull<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><p><strong>Explanation</strong>: This query selects all authors who have not been recommended by anyone (i.e., they don&rsquo;t have a <code>recommendedby</code> field value).</p>
<h3 id="query-31-retrieve-all-books-that-have-an-author-and-all-books-that-have-an-author-who-has-not-been-recommended-by-anyone">Query 31: Retrieve all books that have an author, and all books that have an author who has not been recommended by anyone<a hidden class="anchor" aria-hidden="true" href="#query-31-retrieve-all-books-that-have-an-author-and-all-books-that-have-an-author-who-has-not-been-recommended-by-anyone">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>one <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(author__isnull<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>two <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(author__isnull<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>, author__recommender__isnull<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>result31 <span style="color:#f92672">=</span> [one, two]
</span></span></code></pre></div><p><strong>Explanation</strong>: This query retrieves all books that have an author (i.e., <code>author__isnull=False</code>). The first query in the list (<code>one</code>) retrieves all books with an author, while the second query (<code>two</code>) filters the first query to only include books where the author has not been recommended by anyone (i.e., <code>author__recommender__isnull=True</code>).</p>
<h3 id="query-32-calculate-the-sum-of-the-price-of-all-books-authored-by-the-author-with-primary-key-pk-equal-to-1">Query 32: Calculate the sum of the price of all books authored by the author with primary key (pk) equal to 1<a hidden class="anchor" aria-hidden="true" href="#query-32-calculate-the-sum-of-the-price-of-all-books-authored-by-the-author-with-primary-key-pk-equal-to-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result32 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>filter(author__pk<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>aggregate(Sum(<span style="color:#e6db74">&#39;price&#39;</span>))
</span></span></code></pre></div><p><strong>Explanation</strong>: This query calculates the sum of the price of all books authored by the author with primary key (PK) equal to 1. It uses the <code>aggregate()</code> method to compute the sum, and the <code>Sum()</code> function to specify the aggregation operation.</p>
<h3 id="query-33-retrieve-the-title-of-the-most-recently-published-book">Query 33: Retrieve the title of the most recently published book<a hidden class="anchor" aria-hidden="true" href="#query-33-retrieve-the-title-of-the-most-recently-published-book">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result33 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>order_by(<span style="color:#e6db74">&#39;published_date&#39;</span>)<span style="color:#f92672">.</span>last()<span style="color:#f92672">.</span>title
</span></span></code></pre></div><p><strong>Explanation</strong>: This query retrieves the title of the most recently published book. It does so by first ordering all the books by their published date in ascending order, and then selecting the last book from this list.</p>
<h3 id="query-34-calculate-the-average-price-of-all-books">Query 34: Calculate the average price of all books<a hidden class="anchor" aria-hidden="true" href="#query-34-calculate-the-average-price-of-all-books">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result34 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>aggregate(Avg(<span style="color:#e6db74">&#39;price&#39;</span>))
</span></span></code></pre></div><p><strong>Explanation</strong>: This query computes the average price of all the books in the database. It does so by using the <code>aggregate()</code> method on the queryset, with the <code>Avg()</code> function as the argument. The <code>Avg()</code> function is a database function that computes the average of a given column.</p>
<h3 id="query-35-calculate-the-maximum-popularity-score-of-all-the-publishers-that-have-published-a-book-written-by-the-author-with-primary-key-1">Query 35: Calculate the maximum popularity score of all the publishers that have published a book written by the author with primary key 1<a hidden class="anchor" aria-hidden="true" href="#query-35-calculate-the-maximum-popularity-score-of-all-the-publishers-that-have-published-a-book-written-by-the-author-with-primary-key-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result35 <span style="color:#f92672">=</span> Publishers<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(books__author__pk<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>aggregate(Max(<span style="color:#e6db74">&#39;popularity_score&#39;</span>))
</span></span></code></pre></div><p><strong>Explanation</strong>: This query computes the maximum popularity score of all the publishers that have published a book written by the author with primary key 1. It does so by first filtering the <code>Publishers</code> queryset by the books that have been authored by the author with primary key 1. Then, it uses the <code>aggregate()</code> method with the <code>Max()</code> function to compute the maximum popularity score of these publishers.</p>
<h3 id="query-36-count-authors-with-books-containing-ab-in-the-title">Query 36: Count Authors with Books containing &lsquo;ab&rsquo; in the title<a hidden class="anchor" aria-hidden="true" href="#query-36-count-authors-with-books-containing-ab-in-the-title">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result36 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(books__title__icontains<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ab&#39;</span>)<span style="color:#f92672">.</span>count()
</span></span></code></pre></div><p><strong>Explanation</strong>: This query counts the number of authors who have written at least one book that contains &lsquo;ab&rsquo; (case-insensitive) in the title.</p>
<h3 id="query-37-filter-authors-by-number-of-followers">Query 37: Filter Authors by Number of Followers<a hidden class="anchor" aria-hidden="true" href="#query-37-filter-authors-by-number-of-followers">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result37 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>annotate(f_count<span style="color:#f92672">=</span>Count(<span style="color:#e6db74">&#39;followers&#39;</span>))<span style="color:#f92672">.</span>filter(f_count__gt<span style="color:#f92672">=</span><span style="color:#ae81ff">216</span>)
</span></span></code></pre></div><p><strong>Explanation</strong>: This query annotates each author with the number of followers they have and then filters the authors to only include those with more than 216 followers.</p>
<h3 id="query-38-average-popularity-score-of-authors-who-joined-after-20th-sep-2014">Query 38: Average Popularity Score of Authors who joined after 20th Sep 2014<a hidden class="anchor" aria-hidden="true" href="#query-38-average-popularity-score-of-authors-who-joined-after-20th-sep-2014">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result38 <span style="color:#f92672">=</span> Authors<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(joindate__gt<span style="color:#f92672">=</span>datetime<span style="color:#f92672">.</span>date(year<span style="color:#f92672">=</span><span style="color:#ae81ff">2014</span>, month<span style="color:#f92672">=</span><span style="color:#ae81ff">9</span>, day<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>))<span style="color:#f92672">.</span>aggregate(Avg(<span style="color:#e6db74">&#39;popularity_score&#39;</span>))
</span></span></code></pre></div><p><strong>Explanation</strong>: This query filters authors who joined after 20th Sep 2014 and then calculates the average popularity score of those authors.</p>
<h3 id="query-39-filter-books-by-authors-who-have-written-more-than-10-books">Query 39: Filter Books by Authors who have written more than 10 Books<a hidden class="anchor" aria-hidden="true" href="#query-39-filter-books-by-authors-who-have-written-more-than-10-books">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result39 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>annotate(bk_count<span style="color:#f92672">=</span>Count(<span style="color:#e6db74">&#39;author__books&#39;</span>))<span style="color:#f92672">.</span>filter(bk_count__gt<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)<span style="color:#f92672">.</span>distinct()
</span></span></code></pre></div><p><strong>Explanation</strong>: This query annotates each book with the number of authors who have written the book, then filters the books to only include those written by authors who have written more than 10 books. The <code>distinct()</code> method is called to eliminate duplicate books that have multiple authors.</p>
<h3 id="query-40-filter-books-by-title-count">Query 40: Filter Books by Title Count<a hidden class="anchor" aria-hidden="true" href="#query-40-filter-books-by-title-count">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>result40 <span style="color:#f92672">=</span> Books<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>all()<span style="color:#f92672">.</span>annotate(count_title<span style="color:#f92672">=</span>Count(<span style="color:#e6db74">&#39;title&#39;</span>))<span style="color:#f92672">.</span>filter(count_title__gt<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><p><strong>Explanation</strong>: This query annotates each book with the count of books that share the same title, then filters the books to only include those with a title count greater than 1. This could be useful, for example, to find books that have been republished under different titles.</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>In conclusion, this Django ORM cheatsheet and exercises blog post provided an overview of the essential elements of Django&rsquo;s ORM. We covered models, querysets, managers, fields, migrations, database routers, aggregation, annotations, and meta options. Each of these elements plays a crucial role in developing robust and scalable applications with Django.</p>
<p>By working through the exercises, we learned how to use these elements to query and manipulate data from the database. These exercises provided practical examples of how to use Django&rsquo;s ORM to solve real-world problems.</p>
<p>Django&rsquo;s ORM is a powerful tool that provides a high-level, intuitive interface for interacting with databases. It enables developers to write concise and readable code while also handling complex queries and transactions. By mastering Django&rsquo;s ORM, developers can build robust, scalable, and maintainable applications with ease.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://atharvashah.netlify.app/tags/python/">python</a></li>
      <li><a href="https://atharvashah.netlify.app/tags/django/">django</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://atharvashah.netlify.app/posts/personal/movie-review/february-2023/">
    <span class="title">¬´ Prev</span>
    <br>
    <span>February 2023 Movies: Love and the Big Screen</span>
  </a>
  <a class="next" href="https://atharvashah.netlify.app/posts/tech/uml-diagrams-with-chatgpt/">
    <span class="title">Next ¬ª</span>
    <br>
    <span>UML Diagrams with ChatGPT: Step-by-Step Tutorial</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Ultimate Django ORM Cheatsheet &#43; Exercises on twitter"
        href="https://twitter.com/intent/tweet/?text=Ultimate%20Django%20ORM%20Cheatsheet%20%2b%20Exercises&amp;url=https%3a%2f%2fatharvashah.netlify.app%2fposts%2ftech%2fdjango-orm-exercises%2f&amp;hashtags=python%2cdjango">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Ultimate Django ORM Cheatsheet &#43; Exercises on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fatharvashah.netlify.app%2fposts%2ftech%2fdjango-orm-exercises%2f&amp;title=Ultimate%20Django%20ORM%20Cheatsheet%20%2b%20Exercises&amp;summary=Ultimate%20Django%20ORM%20Cheatsheet%20%2b%20Exercises&amp;source=https%3a%2f%2fatharvashah.netlify.app%2fposts%2ftech%2fdjango-orm-exercises%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Ultimate Django ORM Cheatsheet &#43; Exercises on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fatharvashah.netlify.app%2fposts%2ftech%2fdjango-orm-exercises%2f&title=Ultimate%20Django%20ORM%20Cheatsheet%20%2b%20Exercises">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Ultimate Django ORM Cheatsheet &#43; Exercises on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fatharvashah.netlify.app%2fposts%2ftech%2fdjango-orm-exercises%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Ultimate Django ORM Cheatsheet &#43; Exercises on whatsapp"
        href="https://api.whatsapp.com/send?text=Ultimate%20Django%20ORM%20Cheatsheet%20%2b%20Exercises%20-%20https%3a%2f%2fatharvashah.netlify.app%2fposts%2ftech%2fdjango-orm-exercises%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Ultimate Django ORM Cheatsheet &#43; Exercises on telegram"
        href="https://telegram.me/share/url?text=Ultimate%20Django%20ORM%20Cheatsheet%20%2b%20Exercises&amp;url=https%3a%2f%2fatharvashah.netlify.app%2fposts%2ftech%2fdjango-orm-exercises%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer><div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "https-atharvashah-netlify-app" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    (function() {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        var disqus_shortname = 'https-atharvashah-netlify-app';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://atharvashah.netlify.app/">Atharva Shah</a></span> 
    | <span><a href="/privacy-policy/" target="_blank">Privacy Policy</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function() {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function(e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function() {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {};
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>
