<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Django Crypto App Part 2: Templates, Views and URLs | Atharva Shah</title>
<meta name="keywords" content="Django, Python, tutorial">
<meta name="description" content="Introduction Setting up the URLs Setting Up Templates Setting Up Views Signup Login Screen Forgot Password Page Password Reset Email Password Reset Success Home Page Add Currency / Search Result Page Wallet Page Run the crypto app Conclusion Introduction Welcome to the second part of the 3-part technical tutorial series, where we&rsquo;ll be building a Django project that enables users to manage their cryptocurrency portfolios. To implement the functionalities and additional features, we&rsquo;ll be utilizing API calls to coingecko or any other cryptocurrency API.">
<meta name="author" content="">
<link rel="canonical" href="https://atharvashah.netlify.app/tech/django-crypto-app/part2/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.c1a57f9a48dd49bab0703659ec92ef9980e4cbac2bd524742439e68d260d9d27.css" integrity="sha256-waV/mkjdSbqwcDZZ7JLvmYDky6wr1SR0JDnmjSYNnSc=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://atharvashah.netlify.app/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://atharvashah.netlify.app/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://atharvashah.netlify.app/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://atharvashah.netlify.app/apple-touch-icon.png">
<link rel="mask-icon" href="https://atharvashah.netlify.app/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-216150796-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-216150796-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9913536001930134" crossorigin="anonymous"></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-216150796-2', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="Django Crypto App Part 2: Templates, Views and URLs" />
<meta property="og:description" content="Introduction Setting up the URLs Setting Up Templates Setting Up Views Signup Login Screen Forgot Password Page Password Reset Email Password Reset Success Home Page Add Currency / Search Result Page Wallet Page Run the crypto app Conclusion Introduction Welcome to the second part of the 3-part technical tutorial series, where we&rsquo;ll be building a Django project that enables users to manage their cryptocurrency portfolios. To implement the functionalities and additional features, we&rsquo;ll be utilizing API calls to coingecko or any other cryptocurrency API." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://atharvashah.netlify.app/tech/django-crypto-app/part2/" />
<meta property="og:image" content="https://atharvashah.netlify.app/blog/django-crypto-app/cover-2.png" /><meta property="article:section" content="Tech" />
<meta property="article:published_time" content="2023-05-01T23:19:34+05:30" />
<meta property="article:modified_time" content="2023-05-01T23:19:34+05:30" /><meta property="og:site_name" content="Atharva Shah" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://atharvashah.netlify.app/blog/django-crypto-app/cover-2.png" />
<meta name="twitter:title" content="Django Crypto App Part 2: Templates, Views and URLs"/>
<meta name="twitter:description" content="Introduction Setting up the URLs Setting Up Templates Setting Up Views Signup Login Screen Forgot Password Page Password Reset Email Password Reset Success Home Page Add Currency / Search Result Page Wallet Page Run the crypto app Conclusion Introduction Welcome to the second part of the 3-part technical tutorial series, where we&rsquo;ll be building a Django project that enables users to manage their cryptocurrency portfolios. To implement the functionalities and additional features, we&rsquo;ll be utilizing API calls to coingecko or any other cryptocurrency API."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Teches",
      "item": "https://atharvashah.netlify.app/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Django Crypto App Part 2: Templates, Views and URLs",
      "item": "https://atharvashah.netlify.app/tech/django-crypto-app/part2/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Django Crypto App Part 2: Templates, Views and URLs",
  "name": "Django Crypto App Part 2: Templates, Views and URLs",
  "description": "Introduction Setting up the URLs Setting Up Templates Setting Up Views Signup Login Screen Forgot Password Page Password Reset Email Password Reset Success Home Page Add Currency / Search Result Page Wallet Page Run the crypto app Conclusion Introduction Welcome to the second part of the 3-part technical tutorial series, where we\u0026rsquo;ll be building a Django project that enables users to manage their cryptocurrency portfolios. To implement the functionalities and additional features, we\u0026rsquo;ll be utilizing API calls to coingecko or any other cryptocurrency API.",
  "keywords": [
    "Django", "Python", "tutorial"
  ],
  "articleBody": " Introduction Setting up the URLs Setting Up Templates Setting Up Views Signup Login Screen Forgot Password Page Password Reset Email Password Reset Success Home Page Add Currency / Search Result Page Wallet Page Run the crypto app Conclusion Introduction Welcome to the second part of the 3-part technical tutorial series, where weâ€™ll be building a Django project that enables users to manage their cryptocurrency portfolios. To implement the functionalities and additional features, weâ€™ll be utilizing API calls to coingecko or any other cryptocurrency API.\nIn the previous part, we set up the project and created the models. Now, we will continue off from that point and add the templates, views and urls and code up the entire project. This will be the most complex and detailed part of this series.\nThe code for the entirety of the project can be found here -\u003e Github Repo for Django Crypto App\nSetting up the URLs In Django, URLs are defined in the urls.py file for each app. The URL patterns are matched to a view function that will handle the request/response.\nIn the given code snippet, we can see the import statements for the path and views modules. We are also importing auth_views which is a Django module for handling authentication views. Additionally, we are importing the admin module from Djangoâ€™s contrib package.\nThe urlpatterns list contains all of the URL patterns for our app. Each URL pattern is defined using the path() function, which takes the following parameters:\nroute: A string that contains a URL pattern. view: The view function that should be called when the URL pattern is matched. name: A unique name for the URL pattern. For our project, we have defined URLs for several views:\nhome_view: The default view for our app, accessed at the root URL. login_view, logout_view: Views for user authentication. signup_view, signup_with_referrer_view: Views for user registration. portfolio_view: View for displaying userâ€™s portfolio. search_view: View for searching and adding new cryptocurrencies to a userâ€™s portfolio. add_to_portfolio_view, delete_from_portfolio_view: Views for adding/deleting cryptocurrencies from a userâ€™s portfolio. password_reset: View for resetting the userâ€™s password. password_reset_done: View displayed after password reset email is sent. password_reset_confirm: View for confirming the password reset. password_reset_complete: View displayed after the password has been reset. from django.contrib import admin from django.contrib.auth import views as auth_views from django.urls import path from . import views urlpatterns = [ path(\"\", views.home_view, name=\"home\"), # user authentication path(\"login/\", views.login_view, name=\"login\"), path(\"logout/\", views.logout_view, name=\"logout\"), path(\"signup/\", views.signup_view, name=\"signup\"), path('signup//', views.signup_with_referrer_view, name='signup_with_referrer_view'), # wallet page path(\"portfolio/\", views.portfolio_view, name=\"portfolio\"), # CRUD operations on cryptos path(\"search/\", views.search_view, name=\"search\"), path(\"add_to_portfolio/\", views.add_to_portfolio_view, name=\"add_to_portfolio\"), path('delete_from_portfolio//', views.delete_from_portfolio_view, name='delete_from_portfolio'), # password reset stuff path('password_reset/', auth_views.PasswordResetView.as_view(template_name=\"reset/password_reset.html\"), name='password_reset'), path('password_reset_done/', auth_views.PasswordResetDoneView.as_view(template_name=\"reset/password_reset_done.html\"), name='password_reset_done'), path('password_reset_confirm///', auth_views.PasswordResetConfirmView.as_view( template_name='reset/password_reset_confirm.html'), name='password_reset_confirm'), path('password_reset_complete/', auth_views.PasswordResetCompleteView.as_view( template_name='reset/password_reset_complete.html'), name='password_reset_complete'), ] Overall, the urlpatterns list provides a clear mapping between URLs and the corresponding views, allowing us to easily navigate and use our web application.\nSetting Up Templates Views and templates are important components of the Model-View-Template (MVT) architecture in Django. Views handle the request/response flow and business logic of the application, while templates provide the presentation layer for the user interface.\nWe will be using some custom CSS and JavaScript files in our templates. These files are located in the static directory of our app. We can import these files using the static template tag in our templates. So go ahead and create a static directory in the main app and add the following files to it:\nstyle.css We will not be covering a ton of CSS explanation since Django is the focus of this article. The content of the style.css file is as follows:\n@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700\u0026display=swap'); ::-webkit-scrollbar { width: 10px; } ::-webkit-scrollbar-track { background: #f1f1f1; } ::-webkit-scrollbar-thumb { background: #888; border-radius: 10px; } ::-webkit-scrollbar-thumb:hover { background: #555; } body { overflow-x: hidden !important; color: white !important; font-family: 'Roboto', sans-serif !important; background-color: #130f40 !important; background-image: linear-gradient(315deg, #130f40 0%, #000000 74%) !important; background-repeat: no-repeat !important; background-attachment: fixed !important; background-size: cover !important; min-height: 100vh !important; } .green-arrow { font-size: 18px; color: green } .red-arrow { font-size: 18px; color: red } .flex-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; } .crypto-item { display: flex; flex-direction: row; justify-content: space-between; align-items: center; border: 1px solid gray; padding: 10px; width: 300px; } .crypto-info { margin-left: 10px; } .tt-menu { width: 100%; } .tt-suggestion { padding: 10px; font-size: 16px; cursor: pointer; background-color: #fff; } .tt-suggestion:hover { background-color: #f5f5f5; } .tt-suggestion.tt-cursor { background-color: #f5f5f5; } .typeahead { border-radius: 0; } .custom-nav-logo { font-family: 'Roboto', sans-serif; font-size: 24px; font-weight: 500; } nav { box-shadow: -10px 8px 0px rgb(196 181 253); background: #0f0f0f; color: white; margin-bottom: 50px; position: fixed ; top: 0; width: 100%; z-index: 1; } footer { position: fixed; left: 0; bottom: 0; width: 100%; background-color: rgb(0, 0, 0); color: white; text-align: center; } .referral-code { background-color: #080808; border-radius: 5px; padding: 1rem; margin-bottom: 1rem; border: 1px solid #fff; } .referral-code p { font-size: 1.1rem; } .custom-heading { font-family: 'Montserrat', sans-serif; font-size: 2.5rem; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; text-decoration: underline #fff solid 1px; text-underline-offset: 10px; margin-bottom: 1rem; } .custom-table { text-transform: uppercase; width: 100%; margin-bottom: 1rem; color: #fff; background-color: rgba(255, 255, 255); box-shadow: 10px -8px 0px rgb(253 230 138); } th, td { padding: 0.75rem; vertical-align: middle; border-top: 1px solid rgba(255, 255, 255, 0.1); } th { font-weight: bold; text-transform: uppercase; border-bottom: 5px solid rgb(0, 0, 0) text-align: center; font-family: 'Roboto', sans-serif; } tbody tr:hover { background-color: rgba(255, 255, 255, 0.1); } .alert { border-radius: 2px !important; color: #fff !important; font-weight: bold !important; font-size: 1rem !important; letter-spacing: 0.05em !important; font-weight: 300 !important; padding: 0.5rem 1rem !important; } .alert-success { background-color: #007f1e; color: rgb(0, 0, 0) !important; font-weight: bold !important; } .alert-info { background-color: #009cb4; color: rgb(0, 0, 0) !important; font-weight: bold !important; } .alert-danger { background-color: #520008 !important; color: rgb(0, 0, 0) !important; font-weight: bold !important; } .fancy-color { background-color: #4158D0; background-image: linear-gradient(43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%); } .custom-title { margin-left: -175px !important; margin-top: -30px !important; margin-bottom: 50px !important; padding: 0.5rem 0.5rem !important; width: fit-content !important; background: rgba(255, 255, 255, 0.9); } .welcome-user-text { font-size: 1rem !important; font-weight: 500 !important; letter-spacing: 0.05em !important; } Remember we defined the urlpatterns list in the urls.py file? Each URL pattern in the list is mapped to a view function. For example, the home_view function is mapped to the root URL of our app. And we also made a templates folder in our app directory. This is where we will store all of our HTML templates and link them to the corresponding views.\nJust to give you a peek into the structure of our app, here is a screenshot of the templates folder:\nWe will be creating the following templates in our app so you can go ahead and make empty HTML files for them. Now letâ€™s start writing our views and templates.\nBefore writing the views, let us first create a base.html file in the templates folder. This file will contain the common HTML code that will be used in all of our templates. We will be using the Bootstrap CSS framework for styling our templates. So we will add the Bootstrap CDN link in the base.html file. We will also add the CSS code that we wrote in the style.css file in the base.html file. The base.html file will look like this:\n{% load static %} \u003c!doctype html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\"\u003e \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"\u003e \u003clink href=\"{% static 'css/custom.css' %}\" rel=\"stylesheet\"\u003e \u003clink href=\"{% static 'css/style.css' %}\" rel=\"stylesheet\"\u003e \u003clink rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\"\u003e \u003clink href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" rel=\"stylesheet\"\u003e \u003cscript src=\"https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"https://unpkg.com/sweetalert/dist/sweetalert.min.js\"\u003e\u003c/script\u003e \u003ctitle\u003eCrypto App | {% block title %}{% endblock title %}\u003c/title\u003e \u003c/head\u003e \u003cbody\u003e {% include 'navbar.html' %} \u003cdiv class=\"container\"\u003e {% block content %} {% endblock content %} \u003c/div\u003e {% include 'footer.html' %} {% block scripts %} {% endblock scripts %} \u003cscript src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\" integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\" crossorigin=\"anonymous\"\u003e\u003c/script\u003e \u003cscript src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\" integrity=\"sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1\" crossorigin=\"anonymous\"\u003e\u003c/script\u003e \u003cscript src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js\" integrity=\"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM\" crossorigin=\"anonymous\"\u003e\u003c/script\u003e \u003c/body\u003e \u003c/html\u003e Now, since we are referencing the navbar.html and footer.html files in the base.html file, we need to create these files in the templates folder. The navbar.html file will contain the navigation bar of our app and the footer.html file will contain the footer of our app. The navbar.html file will look like this:\n\u003cnav class=\"navbar navbar-expand-md\"\u003e \u003ca class=\"navbar-brand text-light my-2 my-sm-0 custom-nav-logo\" href=\"{% url 'home' %}\"\u003eCrypto App\u003c/a\u003e \u003cbutton class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"\u003e \u003cspan class=\"navbar-toggler-icon\"\u003e\u003c/span\u003e \u003c/button\u003e \u003cdiv class=\"collapse navbar-collapse\" id=\"navbarNav\"\u003e \u003cul class=\"navbar-nav mr-auto\"\u003e \u003c/ul\u003e \u003cul class=\"navbar-nav\"\u003e {% if user.is_authenticated %} \u003cdiv class=\"btn-group\" role=\"group\"\u003e \u003ca class=\"btn btn-primary my-2 my-sm-0 mr-2\" href=\"{% url 'portfolio' %}\"\u003eView My Wallet\u003c/a\u003e \u003ca class=\"btn btn-danger my-2 my-sm-0 mr-2\" href=\"{% url 'logout' %}\"\u003eLogout\u003c/a\u003e \u003c/div\u003e {% else %} \u003cdiv class=\"btn-group\" role=\"group\"\u003e \u003ca class=\"btn btn-primary my-2 my-sm-0 mr-2\" href=\"{% url 'login' %}\"\u003eLogin\u003c/a\u003e \u003ca class=\"btn btn-success my-2 my-sm-0\" href=\"{% url 'signup' %}\"\u003eSignup\u003c/a\u003e \u003c/div\u003e {% endif %} \u003c/ul\u003e \u003c/div\u003e \u003c/nav\u003e The footer.html file will look like this:\n{% load static %} \u003cfooter\u003e \u003cdiv class=\"row justify-content-center\"\u003e \u003cdiv class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\"\u003e \u003cdiv class=\"copy-right text-center\"\u003e \u003cp\u003eÂ© 2023 Crypto App. Developed By \u003ca href=\"#\" class=\"text-light\"\u003eAtharva Shah\u003c/a\u003e\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/footer\u003e \u003c/div\u003e Now, the final step for the template setup is to write the alerts.html file. This file will contain the code for displaying alerts to the user. In Django, alerts are messages that can be displayed to users after certain events or actions have occurred, such as a successful login or a failed form submission. They are a way to provide feedback to the user about what has happened, and can be used to convey important information or instructions.\nDjango provides a built-in messaging framework that makes it easy to use alerts in your application. This framework allows you to create different types of messages, such as success, warning, or error messages, and to customize the way they are displayed.\nThe alerts.html file will look like this:\n{% if messages %} {% for message in messages %} \u003cdiv class=\"alert alert-{{message.tags}} alert-dismissible fade show w-50 d-flex justify-content-center align-items-center ml-auto mr-auto \" role=\"alert\"\u003e {{ message }} \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"\u003e \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e \u003c/button\u003e \u003c/div\u003e {% endfor %} {% endif %} Setting Up Views To use views and templates in Django, we first need to import the necessary modules. The requests module is used for sending HTTP requests to external APIs. The auth module is used for user authentication related functionality. The messages module is used for displaying messages to the user. The decorators module is used for adding functionality to views based on certain conditions, such as requiring the user to be logged in or having certain permissions. The forms module is used for creating HTML forms that map to Django models. The models module is used for defining the database schema and ORM of the application.\nWe can import these modules using the following code snippet in views.py since we will be using them in our views:\nimport requests from django.contrib import auth, messages from django.contrib.auth import authenticate, login, logout from django.contrib.auth.decorators import login_required, user_passes_test from django.contrib.auth.forms import AuthenticationForm, UserCreationForm from django.contrib.auth.hashers import make_password from django.contrib.auth.models import User from django.contrib.auth.tokens import default_token_generator from django.core.exceptions import PermissionDenied from django.db import IntegrityError from django.http import HttpResponse, HttpResponseNotAllowed from django.shortcuts import redirect, render from django.template.defaultfilters import slugify from django.utils.http import urlsafe_base64_decode from .forms import CustomUserCreationForm from .models import Cryptocurrency, Portfolio, Profile, Referal Once we have imported these modules, we can start writing our views and templates to create the desired functionality for our application.\nðŸš¨ Please note that most of these views depend on each other so we recommend that you follow the order in which they are presented here. and test them at the very end since they are all interconnected and you may get errors if the dependent views/templates are not created yet.\nSignup Letâ€™s start with the signup_view function. This view is mapped to the /signup/ URL pattern in the urls.py file. The signup_view function is responsible for displaying the signup form to the user and creating a new user account if the form is valid.\ndef signup_view(request): # check if user is already logged in if request.user.is_authenticated: return redirect('portfolio') if request.method == 'POST': form = CustomUserCreationForm(request.POST) if form.is_valid(): user = form.save(commit=False) user.password = make_password(form.cleaned_data['password1']) user.email = form.cleaned_data['email'] user.save() messages.success(request, 'You have successfully signed up!', extra_tags='success') return redirect('login') else: form = CustomUserCreationForm() return render(request, 'signup.html', {'form': form}) # block access to signup page if user is already logged in def signup_with_referrer_view(request, referral_code): # check if user is already logged in if request.user.is_authenticated: return redirect('portfolio') try: # get the User Profile of the referrer referrer = User.objects.get(profile__referral_code=referral_code) except User.DoesNotExist: # show error message if referrer does not exist return HttpResponse(\"Referrer does not exist\") if request.method == 'POST': form = CustomUserCreationForm(request.POST) if form.is_valid(): user = form.save(commit=False) user.password = make_password(form.cleaned_data['password1']) user.email = form.cleaned_data['email'] user.save() # create a referral instance referral = Referal.objects.create(user=user, referrer=referrer) referral.save() if referrer is not None: referrer.profile.bonus += 100 # add referral bonus to referrer referrer.profile.save() messages.success(request, f'{referrer.username} recieved a bonus of 100 points from you because you signed up using their referral link!') messages.success(request, 'You have successfully signed up!') return redirect('login') else: form = CustomUserCreationForm() return render(request, 'signup.html', {'form': form, 'referrer': referrer}) These are two views that handle user signup with and without a referral code.\nThe first view is signup_view. It checks whether the user is already logged in. If the user is logged in, then they will be redirected to their portfolio page. If the request method is POST, it will validate the userâ€™s input, create a new user, and save them in the database. The password is hashed before it is saved. If the form is not valid, it will render the same template with the form and display the errors. If the request method is not POST, then the view will render the signup form. In both cases, the view will render the signup.html template with the form.\nThe second view is signup_with_referrer_view. It first checks if the user is already logged in. If they are, they will be redirected to their portfolio page. Then it will try to find the referrer user using the referral code passed in the URL. If the referrer doesnâ€™t exist, it will display an error message. If the request method is POST, it will validate the form input and create a new user and save it in the database. It will also create a new referral instance and save it in the database. The referral instance will link the new user to the referrer. It will also add a referral bonus of 100 points to the referrerâ€™s profile. Finally, it will redirect the user to the login page with a success message. If the request method is not POST, then the view will render the signup form with the referrerâ€™s username displayed on the page. In both cases, the view will render the signup.html template with the form and the referrerâ€™s username (if present).\nNow, the signup.html template will be rendered by both views. It will display the signup form to the user. To make the form and render it in the template, we will use the Django forms module. We will create a new file called forms.py in the cryptoapp directory and add the following code to it.\nfrom django import forms from django.contrib.auth.forms import UserCreationForm from django.contrib.auth.models import User class CustomUserCreationForm(UserCreationForm): username = forms.CharField(required=True, label='Username', help_text='Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.', widget=forms.TextInput(attrs={'class': 'form-control'})) email = forms.EmailField(required=True, label='Email', help_text='Required. Enter a valid email address.', widget=forms.TextInput(attrs={'class': 'form-control'})) password1 = forms.CharField(required=True, label='Password', help_text='Required. Enter a valid password.', widget=forms.PasswordInput(attrs={'class': 'form-control'})) password2 = forms.CharField(required=True, label='Password confirmation', help_text='Enter the same password as before, for verification.', widget=forms.PasswordInput(attrs={'class': 'form-control'})) class Meta: model = User fields = ['username', 'email', 'password1', 'password2'] Now that the form is ready, we can render it in the signup.html template. We will create a new file called signup.html in the templates directory and add the following code to it.\n{% extends 'base.html' %} {% block title %} Sign Up {% endblock title %} {% block content %} \u003ch1 class=\"mb-4\"\u003eSignup\u003c/h1\u003e \u003cform method=\"post\" class=\"my-4 p-4 border border-dark rounded\"\u003e {% csrf_token %} \u003cdiv class=\"form-group\"\u003e \u003clabel for=\"username\"\u003eUsername\u003c/label\u003e {{ form.username }} \u003c/div\u003e \u003cdiv class=\"form-group\"\u003e \u003clabel for=\"email\"\u003eEmail address\u003c/label\u003e {{ form.email }} \u003c/div\u003e \u003cdiv class=\"form-group\"\u003e \u003clabel for=\"password1\"\u003ePassword\u003c/label\u003e {{ form.password1 }} \u003c/div\u003e \u003cdiv class=\"form-group\"\u003e \u003clabel for=\"password2\"\u003eConfirm Password\u003c/label\u003e {{ form.password2 }} \u003c/div\u003e \u003cbutton type=\"submit\" class=\"btn btn-primary mt-3\"\u003eSignup\u003c/button\u003e \u003c/form\u003e {% if form.errors %} \u003cdiv class=\"alert alert-danger mt-3 mb-5\"\u003e \u003cstrong\u003eError:\u003c/strong\u003e {{ form.errors }} \u003c/div\u003e {% endif %} \u003cdiv class=\"mt-3\"\u003e Already have an account? \u003ca href=\"{% url 'login' %}\" class=\"text-primary font-weight-bold\"\u003eLogin\u003c/a\u003e \u003c/div\u003e {% endblock %} This is a Django template for the sign-up page that extends the base template. It displays a sign-up form with fields for username, email, password and confirm password. If there are any form errors, they are displayed in an alert box. It also includes a link to the login page. The template uses Djangoâ€™s template language to display the form fields and errors.\nSince after the user signup we want to make a profile for them, we will create a new file called signals.py in the cryptoapp directory and add the following code to it.\nimport shortuuid from django.contrib.auth.models import User from django.db.models.signals import post_save from django.dispatch import receiver from .models import Profile # This file is used to generate a referral code for each user as soon as they sign up. def generate_referral_code(): return shortuuid.ShortUUID().random(length=10) @receiver(post_save, sender=User) def create_profile(sender, instance, created, **kwargs): if created: profile = Profile.objects.create(user=instance, referral_code=generate_referral_code()) profile.save() This signal code generates a referral code for a user as soon as they sign up. It does this by listening for the \"post_save\" signal sent by the User model. When a new User instance is created, this signal triggers the \"create_profile\" function which creates a Profile instance for that user and generates a unique referral code using shortuuid library. This generated referral code is then saved to the Profile instance.\nNow to register this signal, we will change the apps.py file.\nfrom django.apps import AppConfig class MainappConfig(AppConfig): default_auto_field = \"django.db.models.BigAutoField\" name = \"mainapp\" def ready(self): import mainapp.signals Login Screen The view for the login page will be similar to the signup view. In views.py continue to add the following code.\ndef login_view(request): # check if user is already logged in if request.user.is_authenticated: return redirect('portfolio') if request.method == 'POST': form = AuthenticationForm(request, data=request.POST) if form.is_valid(): username = form.cleaned_data.get('username') raw_password = form.cleaned_data.get('password') user = authenticate(request, username=username, password=raw_password) if user is not None: login(request, user) return redirect('portfolio') else: messages.error(request, \"Invalid username or password.\", extra_tags='danger') else: form = AuthenticationForm() return render(request, 'login.html', {'form': form}) @login_required(login_url=\"login\") def logout_view(request): logout(request) messages.success(request, 'You have successfully logged out!') return redirect('home') These are two views related to user authentication in a Django web application.\nlogin_view handles the user login process. It checks if the user is already logged in, and if not, it accepts a POST request with login credentials (username and password) from a form, validates them using Djangoâ€™s built-in AuthenticationForm form, and logs the user in if they are authenticated. If the form is invalid, it displays an error message. If the request is not a POST request, it displays the login form.\nlogout_view handles the user logout process. It logs out the user using Djangoâ€™s logout function, displays a success message, and redirects the user to the home page. This view requires the user to be logged in, and if they are not, it redirects them to the login page specified in the login_url argument of the login_required decorator.\nThe html template for the login page is similar to the signup page. Create a new file called login.html in the templates directory and add the following code to it.\n{% extends 'base.html' %} {% block title %} Login {% endblock title %} {% block content %} \u003ch1\u003eLogin\u003c/h1\u003e {% for message in messages %} \u003cp class=\"alert alert-{{ message.tags }}\"\u003e{{ message }}\u003c/p\u003e {% endfor %} \u003cform method=\"post\" class=\"my-4 p-4 border border-dark rounded\"\u003e {% csrf_token %} \u003cdiv class=\"form-group\"\u003e \u003clabel for=\"username\"\u003eUsername\u003c/label\u003e \u003cinput type=\"text\" name=\"username\" class=\"form-control\"\u003e \u003c/div\u003e \u003cdiv class=\"form-group\"\u003e \u003clabel for=\"password\"\u003ePassword\u003c/label\u003e \u003cinput type=\"password\" name=\"password\" class=\"form-control\"\u003e \u003c/div\u003e \u003cbutton type=\"submit\" class=\"btn btn-primary btn-block my-2\"\u003eLogin\u003c/button\u003e \u003c/form\u003e \u003cp\u003eDon't have an account? \u003ca href=\"{% url 'signup' %}\"\u003eRegister\u003c/a\u003e\u003c/p\u003e \u003cp\u003eForgot your password? \u003ca href=\"{% url 'password_reset' %}\"\u003eReset Password\u003c/a\u003e\u003c/p\u003e {% endblock %} Now that the login view is ready, we can also take care of the forgot password functionality.\nForgot Password Page Password Reset Email For convience, we will group the forgot password view templates and save them in the reset folder inside the templates directory. Create a new file called password_reset.html in the reset directory and add the following code to it.\n{% extends \"base.html\" %} {% load crispy_forms_tags %} {% block content %} \u003cdiv class=\"content-section\"\u003e \u003cform method=\"POST\"\u003e {% csrf_token %} \u003cfieldset class=\"form-group\"\u003e \u003clegend class=\"border-bottom mb-4\"\u003eReset Password\u003c/legend\u003e {{ form|crispy }} \u003c/fieldset\u003e \u003cdiv class=\"form-group\"\u003e \u003cbutton class=\"btn btn-outline-info\" type=\"submit\"\u003eRequest Password Reset\u003c/button\u003e \u003c/div\u003e \u003c/form\u003e \u003c/div\u003e {% endblock content %} Now, make a file called password_reset_done.html. It will show a message that an email has been sent to the userâ€™s email ID.\n{% extends \"base.html\" %} {% block content %} \u003cdiv class=\"alert alert-info\"\u003e An email has been sent with instructions to reset your password \u003c/div\u003e {% endblock content %} Once the user clicks this link he will be redirected to the password reset page. Here he can enter his new password and confirm it. So for this purpose\nNow,make a file called password_reset_confirm.html. It will prompt for the new password.\n{% extends \"base.html\" %} {% load crispy_forms_tags %} {% block content %} \u003cdiv class=\"content-section\"\u003e \u003cform method=\"POST\"\u003e {% csrf_token %} \u003cfieldset class=\"form-group\"\u003e \u003clegend class=\"border-bottom mb-4\"\u003eReset Password\u003c/legend\u003e {{ form|crispy }} \u003c/fieldset\u003e \u003cdiv class=\"form-group\"\u003e \u003cbutton class=\"btn btn-outline-info\" type=\"submit\"\u003eReset Password\u003c/button\u003e \u003c/div\u003e \u003c/form\u003e \u003c/div\u003e {% endblock content %} Make a final file called password_reset_complete.html. It will show a message that the password has been changed successfully.\n{% extends \"base.html\" %} {% block content %} \u003cdiv class=\"alert alert-info\"\u003e Your password has been set. \u003c/div\u003e \u003ca href=\"{% url 'login' %}\"\u003eSign In Here\u003c/a\u003e {% endblock content %} Password Reset Success Remember we need not define any custom views here since Django provides us with the default views for password reset. Please refer the urls.py file.\nHome Page Now let us focus on the home page. We will show the top 10 cryptocurrencies on the home page. We will use the CoinGecko API to fetch the data.\nThe view for this page will be:\ndef home_view(request): # get the top 10 crypto currencies by market cap top_10_crypto_url_global = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=USD\u0026order=market_cap_desc\u0026per_page=10\u0026page=1\u0026sparkline=true' top_10_crypto_data_global = requests.get(top_10_crypto_url_global).json() # check if user is logged in if request.user.is_authenticated: # get user's crypto currencies user_cryptocurrencies = Cryptocurrency.objects.filter(user=request.user) user_portfolio = Portfolio.objects.filter(user=request.user).first() # get the prices and price changes for user's cryptocurrencies names = [crypto.name for crypto in user_cryptocurrencies] symbols = [crypto.symbol for crypto in user_cryptocurrencies] ids = [crypto.id_from_api for crypto in user_cryptocurrencies] prices=[] # NOTE: Only showing the price change for the last 24 hours for now and not the percentage change to reduce the number of api calls. Only 10-20 api calls per minute are allowed for free users. Otherwise, I could have used the /coins/{id}/market_chart?vs_currency=usd\u0026days=1 endpoint to get the price change for the last 24 hours and calculate the percentage change from that. for crytpo_id in ids: prices_url = f'https://api.coingecko.com/api/v3/simple/price?ids={crytpo_id}\u0026vs_currencies=usd\u0026include_24hr_change=true' prices_data = requests.get(prices_url).json() price_change = prices_data[crytpo_id]['usd_24h_change'] prices.append(price_change) # make a dictionary out of the names and prices crypto_price_changes = dict(zip(names, prices)) context = { 'top_10_crypto_data_global': top_10_crypto_data_global, 'user_cryptocurrencies': user_cryptocurrencies, 'user_portfolio': user_portfolio, 'crypto_price_changes': crypto_price_changes, } else: context = {'top_10_crypto_data_global': top_10_crypto_data_global} return render(request, 'home.html', context) The function does the following:\nSends a GET request to the Coingecko API to retrieve data for the top 10 cryptocurrencies by market capitalization in USD. Checks if the user is authenticated. If the user is authenticated, it retrieves the userâ€™s cryptocurrencies from the database and makes an API call to get their prices and price changes for the last 24 hours. Creates a dictionary mapping the cryptocurrenciesâ€™ names to their price changes. Renders the home page template with a context dictionary containing the top 10 cryptocurrencies data, userâ€™s cryptocurrencies, userâ€™s portfolio, and cryptocurrenciesâ€™ price changes. The view function handles the case where the user is not authenticated, in which case it only renders the home page template with the top 10 cryptocurrencies data.\nThe json response for the CoinGecko API can be found here.\nCreate a new file called home.html in the templates directory and add the following code to it.\n{% extends 'base.html' %} {% block title %} Home {% endblock title %} {% block content %} {% if messages %} {% for message in messages %} \u003cdiv class=\"alert alert-success alert-dismissible fade show\" role=\"alert\"\u003e {{ message }} \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"\u003e \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e \u003c/button\u003e \u003c/div\u003e {% endfor %} {% endif %} {% if user.is_authenticated %} \u003cdiv class=\"row justify-content-left custom-title\"\u003e \u003ch2 class=\"text-uppercase text-primary welcome-user-text\"\u003eWelcome {{ user.username | capfirst }} \u003c/h2\u003e \u003c/div\u003e {% endif %} \u003cdiv class=\"container mt-5 mb-5\"\u003e \u003cdiv class=\"row justify-content-center\"\u003e \u003ch2 class=\"text-center custom-heading\"\u003eSearch Cryptocurrency\u003c/h2\u003e \u003c/div\u003e \u003cdiv class=\"row mt-3 justify-content-center\"\u003e \u003cdiv class=\"col-md-6 col-lg-4\"\u003e \u003cform action=\"{% url 'search' %}\" method=\"post\"\u003e {% csrf_token %} \u003cdiv class=\"input-group\"\u003e \u003cinput class=\"form-control\" type=\"text\" placeholder=\"Search cryptocurrencies...\" name=\"search_query\" required\u003e \u003cdiv class=\"input-group-append\"\u003e \u003cbutton class=\"btn btn-primary\" type=\"submit\"\u003eSearch\u003c/button\u003e \u003c/div\u003e \u003c/div\u003e \u003c/form\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"row justify-content-center\"\u003e \u003ch2 class=\"text-center mt-5 mb-0 custom-heading\"\u003e Top 10 CryptoCurrency Rankings \u003c/h2\u003e \u003c/div\u003e \u003cbr\u003e\u003cbr\u003e\u003cbr\u003e \u003cdiv class=\"flex-container\"\u003e {% if top_10_crypto_data_global %} {% for obj in top_10_crypto_data_global %} \u003cdiv class=\"crypto-item\"\u003e \u003cimg src={{obj.image}} height='70'\u003e \u003cdiv class=\"crypto-info\"\u003e \u003ch3\u003e{{obj.name}}\u003c/h3\u003e \u003cp\u003e\u003cb\u003eRank\u003c/b\u003e: {{obj.market_cap_rank}}\u003c/p\u003e \u003cp\u003e\u003cb\u003eMarket\u003c/b\u003e cap: {{obj.market_cap}}\u003c/p\u003e \u003cp\u003e\u003cb\u003ePrice\u003c/b\u003e: {{obj.current_price}}\u003c/p\u003e \u003cp\u003e\u003cb\u003ePrice Change 24H\u003c/b\u003e: {{obj.price_change_24h|floatformat:5 }} {% if obj.price_change_percentage_24h \u003e 0 %} \u003ci class=\"fa fa-arrow-up green-arrow\"\u003e\u003c/i\u003e {% else %} \u003ci class=\"fa fa-arrow-down red-arrow\"\u003e\u003c/i\u003e {% endif %} \u003c/p\u003cb\u003e \u003cp\u003e\u003cb\u003ePrice Change 24H (%)\u003c/b\u003e: {{obj.price_change_percentage_24h|floatformat:3 }} {% if obj.price_change_percentage_24h \u003e 0 %} \u003ci class=\"fa fa-arrow-up green-arrow\"\u003e\u003c/i\u003e {% else %} \u003ci class=\"fa fa-arrow-down red-arrow\"\u003e\u003c/i\u003e {% endif %} \u003c/p\u003e \u003c/div\u003e \u003c/div\u003e {% endfor %} {% else %} \u003ch3\u003eNo data\u003c/h3\u003e {% endif %} \u003c/div\u003e {% if user.is_authenticated %} \u003cdiv class=\"row justify-content-center\"\u003e \u003ch2 class=\"text-center mt-5 mb-3 custom-heading\"\u003e24H Summary of Your Cryptos \u003c/h2\u003e \u003c/div\u003e {% if user_cryptocurrencies %} \u003cdiv class=\"table-responsive\"\u003e \u003ctable class=\"table table-striped table-bordered custom-table\"\u003e \u003cthead\u003e \u003ctr\u003e \u003cth\u003e#\u003c/th\u003e \u003cth\u003eOwned\u003c/th\u003e \u003cth\u003ePrice Shift\u003c/th\u003e \u003c/tr\u003e \u003c/thead\u003e \u003ctbody\u003e {% for k, v in crypto_price_changes.items %} \u003ctr\u003e \u003ctd\u003e{{ forloop.counter }}\u003c/td\u003e \u003ctd\u003e{{ k }}\u003c/td\u003e \u003ctd\u003e{{ v | floatformat:5}} {% if v \u003e 0 %} \u003ci class=\"fa fa-arrow-up green-arrow\"\u003e\u003c/i\u003e {% else %} \u003ci class=\"fa fa-arrow-down red-arrow\"\u003e\u003c/i\u003e {% endif %} \u003c/td\u003e \u003c/tr\u003e {% endfor %} \u003c/tbody\u003e \u003c/table\u003e {% else %} \u003ch3 class=\"text-center alert alert-danger\"\u003eNo Cryptocurrencies added to wallet. Use the search bar above. \u003c/h3\u003e \u003c/div\u003e {% endif %} {% endif %} \u003cbr\u003e\u003cbr\u003e\u003cbr\u003e {% endblock content %} {% block scripts %} {% endblock scripts %} This Django template is used to display a cryptocurrency dashboard with two sections: global top 10 cryptocurrencies and userâ€™s owned cryptocurrencies with their price changes in the last 24 hours. It also includes a search bar to find specific cryptocurrencies. The logic involves checking if the user is authenticated, displaying data using a for loop, and using conditional statements to display appropriate messages and symbols.\nAdd Currency / Search Result Page Let us move to the search page which can be accessed via looking up a cryptocurrency in the home page search box at the top. Add the following view:\n@login_required(login_url=\"login\") def search_view(request): if request.method != 'POST': # return HTTP status code 405 if the request method is not POST along with a message return HttpResponseNotAllowed(['POST'], 'Only POST requests are allowed for this view. Go back and search a cryptocurrency.') if not (search_query := request.POST.get('search_query')): return HttpResponse('No crypto currency found based on your search query.') api_url = f'https://api.coingecko.com/api/v3/search?query={search_query}' response = requests.get(api_url) search_results = response.json() try: data = search_results['coins'][0] except IndexError: return HttpResponse('No crypto currency found based on your search query.') coin_id = data['id'] image = data['large'] symbol = data['symbol'] market_cap = data['market_cap_rank'] # check if the crypto currency is already in the users portfolio and pass that information to the template current_user = request.user is_already_in_portfolio = False user_cryptocurrencies = Cryptocurrency.objects.filter(user=current_user) for cryptocurrency in user_cryptocurrencies: if cryptocurrency.name.lower() == coin_id.lower(): is_already_in_portfolio = True context = { 'data': data, 'coin_id': coin_id, 'image': image, 'symbol': symbol, 'market_cap': market_cap, 'is_already_in_portfolio': is_already_in_portfolio, } return render(request, 'search.html', context) @login_required(login_url=\"login\") def add_to_portfolio_view(request): if request.method != 'POST': return HttpResponse('Need a crypto currency to add to your portfolio. Go back to the home page and search for a crypto currency.') # get values from the form coin_id = request.POST.get('id') quantity = request.POST.get('quantity') print(coin_id) # get the crypto currency data from the coingecko api based on the coin id api_url = f'https://api.coingecko.com/api/v3/coins/{coin_id}' response = requests.get(api_url) data = response.json() print(data) # store the name, symbol, current price, and market cap rank of the crypto currency user = request.user name = data['name'] id_from_api = data['id'] symbol = data['symbol'] current_price = data['market_data']['current_price']['usd'] try: # save the crypto currency to the database crypto_currency = Cryptocurrency.objects.create( user = user, name= name, id_from_api= id_from_api, symbol= symbol, quantity= quantity, current_price=current_price, ) except IntegrityError: crypto_currency = Cryptocurrency.objects.get(user=user, name=name) crypto_currency.quantity += int(quantity) crypto_currency.save() # calculate the total value of the crypto currency total_value = int(quantity) * int(current_price) # save the total value of the crypto currency to the database in the portfolio model # check if the user already has a portfolio if Portfolio.objects.filter(user=user).exists(): portfolio = Portfolio.objects.get(user=user) portfolio.total_value += total_value else: portfolio = Portfolio(user=user, total_value=total_value) portfolio.save() messages.success(request, f'{name} has been added to your portfolio.') # if all the above steps are successful, redirect the user to the portfolio page return redirect('portfolio') The code provided consists of two Django views: search_view and add_to_portfolio_view. Both views require users to be logged in before accessing them, which is enforced by the @login_required decorator.\nThe search_view allows users to search for a cryptocurrency by sending a POST request to the view with a search query. The view then queries the Coingecko API with the search query to retrieve data on the cryptocurrency. If the query returns a result, the view extracts relevant information from the response and renders a template with the retrieved data.\nIf the user has already added the searched cryptocurrency to their portfolio, the view passes that information to the template to inform the user.\nThe add_to_portfolio_view is responsible for adding a cryptocurrency to the userâ€™s portfolio. The view expects a POST request with the cryptocurrency ID and quantity. Once received, the view queries the Coingecko API to retrieve data on the cryptocurrency and saves it to the database. If the cryptocurrency already exists in the userâ€™s portfolio, the view updates the quantity. The view then calculates the total value of the cryptocurrency based on the current price and quantity and saves it to the userâ€™s portfolio. Finally, the view redirects the user to their portfolio page.\nIf the user tries to access the view with a GET request, the view returns an error message.\nBoth views make use of the requests library to query the Coingecko API and the HttpResponse and HttpResponseNotAllowed classes to send HTTP responses to the user. The views also make use of the Django messages framework to send success messages to the user.\nNow, the template for the search page -\u003e search.html:\n{% extends 'base.html' %} {% block title %} Search Results {% endblock title %} {% block content %} \u003cdiv class=\"text-white border-0 col-md-8 mx-auto mt-5\"\u003e {% if is_already_in_portfolio %} \u003cdiv class=\"card-body\"\u003e \u003cp class=\"card-text text-uppercase mb-0\"\u003e\u003csmall\u003e{{ coin_id }} is already in your portfolio.\u003c/small\u003e\u003c/p\u003e \u003cp class=\"card-text\"\u003e\u003csmall\u003eAny changes to the quantity will be reflected in your portfolio. Units will be added to the existing quantity.\u003c/small\u003e\u003c/p\u003e \u003chr class=\"border-white\"\u003e \u003c/div\u003e {% endif %} \u003cdiv class=\"card mb-3 text-center border-0\"\u003e \u003cdiv class=\"row justify-content-center align-items-center p-5\"\u003e \u003cdiv class=\"col-md-4\"\u003e \u003cimg src=\"{{ image }}\" height=\"150\" width=\"150\" class=\"img-fluid\" alt=\"{{ symbol }}\"\u003e \u003c/div\u003e \u003cdiv class=\"col-md-4\"\u003e \u003cdiv class=\"card-body text-dark\"\u003e \u003ch5 class=\"card-title text-uppercase mb-2\"\u003e\u003cb\u003e{{ coin_id }}\u003c/b\u003e\u003cp class=\"card-subtitle mb-2 text-muted\"\u003e\u003cb\u003e[{{ symbol }}]\u003c/b\u003e\u003c/p\u003e\u003c/h5\u003e \u003cp class=\"card-text text-uppercase mb-2\"\u003e\u003csmall\u003e\u003cb\u003eMARKET CAP:\u003c/b\u003e {{ market_cap }}\u003c/small\u003e\u003c/p\u003e \u003cform action=\"{% url 'add_to_portfolio' %}\" method=\"post\" class=\"d-inline-block\"\u003e {% csrf_token %} \u003cinput type=\"hidden\" name=\"id\" value=\"{{ coin_id }}\"\u003e \u003clabel class=\"mr-2 font-weight-bold text-uppercase\"\u003eUnits Owned\u003c/label\u003e \u003cinput type=\"number\" name=\"quantity\" min=\"1\" max=\"500\" value=\"1\" class=\"form-control d-inline-block w-auto mr-2 mb-2\"\u003e\u003cbr\u003e \u003cbutton type=\"submit\" class=\"btn btn-primary text-uppercase\"\u003eAdd to Portfolio\u003c/button\u003e \u003c/form\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e {% endblock content %} {% block scripts %} {% endblock scripts %} This template is used for displaying search results for a cryptocurrency in a portfolio management application. It allows the user to add the selected cryptocurrency to their portfolio by specifying the quantity owned. If the cryptocurrency is already in the portfolio, the template notifies the user and provides an option to increment the quantity. The template uses Bootstrap classes for styling and Django tags to handle form submissions.\nWallet Page Now, moving on to the final and the most important part of the project, the wallet page. The wallet page is the page where the user can see all the cryptocurrencies they have added to their portfolio. The wallet page also displays the total value of the userâ€™s portfolio. The wallet page is the most important page of the application as it is the page where the user can see the total value of their portfolio and the profit/loss they have made on their investments.\nThe view for the wallet page is as follows:\n@login_required(login_url=\"login\") def portfolio_view(request): # get the current logged in user current_user = request.user # get the referal code of the current user referral_code = current_user.profile.referral_code # get a list of all users who have the current user as their referrer referrals = Referal.objects.filter(referrer=current_user) # get total bonus earned by the current user total_bonus = current_user.profile.bonus # get the list of cryptocurrencies owned by the current user user_cryptocurrencies = Cryptocurrency.objects.filter(user=current_user) if user_portfolio := Portfolio.objects.filter(user=current_user).first(): portfolio = Portfolio.objects.get(user=current_user) # get all the crypto currencies in the portfolio and recalculate the total value of the portfolio new_portfolio_value = 0 user_cryptocurrencies = Cryptocurrency.objects.filter(user=current_user) for cryptocurrency in user_cryptocurrencies: total_value = cryptocurrency.quantity * cryptocurrency.current_price new_portfolio_value += total_value portfolio.total_value = new_portfolio_value portfolio.save() context = { 'current_user': current_user, 'referral_code': referral_code, 'user_cryptocurrencies': user_cryptocurrencies, 'user_portfolio': user_portfolio, 'referrals': referrals, 'total_bonus': total_bonus, 'new_portfolio_value': new_portfolio_value, } else: context = { 'current_user': current_user, 'referral_code': referral_code, 'user_cryptocurrencies': user_cryptocurrencies, 'user_portfolio': user_portfolio, 'referrals': referrals, 'total_bonus': total_bonus, } return render(request, 'portfolio.html', context) @login_required(login_url=\"login\") def delete_from_portfolio_view(request, pk): # get the current logged in user user = request.user # get the crypto currency object from the database crypto_currency = Cryptocurrency.objects.get(pk=pk) # delete the crypto currency from the database crypto_currency.delete() # update the total value of the portfolio portfolio = Portfolio.objects.get(user=user) # get all the crypto currencies in the portfolio and recalculate the total value of the portfolio user_cryptocurrencies = Cryptocurrency.objects.filter(user=user) for cryptocurrency in user_cryptocurrencies: total_value = cryptocurrency.quantity * cryptocurrency.current_price portfolio.total_value += total_value portfolio.save() # send an alert to the user that the crypto currency has been deleted from the portfolio messages.warning(request, f'{crypto_currency.name} has been deleted from your portfolio.') return redirect('portfolio') The first function, portfolio_view, is responsible for rendering the userâ€™s portfolio page. It retrieves the current userâ€™s information and their cryptocurrency holdings from the database, as well as their referral code, referrals, and total bonus. If the user has a portfolio, the function recalculates its total value based on the current prices of the cryptocurrencies they own, updates the portfolio in the database, and adds the new value to the context. Finally, it renders the portfolio.html template with the retrieved information.\nThe second function, delete_from_portfolio_view, handles deleting a specific cryptocurrency from the userâ€™s portfolio. It first retrieves the current userâ€™s information and the specific cryptocurrency object from the database based on its primary key. Then, it deletes the cryptocurrency from the database and recalculates the total value of the userâ€™s portfolio based on their remaining holdings. Finally, it sends a warning message to the user notifying them that the cryptocurrency has been deleted, and redirects them back to their portfolio page.\nNow, all that remains is to make the HTML template for the portfolio page. The template is as follows:\n{% extends 'base.html' %} {% block title %} Wallet {% endblock title %} {% block content %} {% if messages %} {% for message in messages %} \u003cdiv class=\"alert alert-success\" role=\"alert\"\u003e {{ message }} \u003c/div\u003e {% endfor %} {% endif %} \u003ch1 class=\"mb-4 custom-heading\"\u003eREFERRALS\u003c/h1\u003e \u003cdiv class=\"my-4 py-3 px-4 rounded-lg referral-code\"\u003e \u003cdiv class=\"d-flex align-items-center justify-content-between\"\u003e \u003cp class=\"mb-0\"\u003eYour Referral Code is \u003cstrong\u003ehttp://localhost:8000/signup/{{ referral_code }}\u003c/strong\u003e\u003c/p\u003e \u003cbutton class=\"btn btn-dark btn-md copy-btn\" onclick=\"sendToClipboard()\"\u003e\u003ci class=\"fas fa-copy\"\u003e\u003c/i\u003e\u003c/button\u003e \u003c/div\u003e \u003cp class=\"ml-0 mt-3 mb-0\"\u003e\u003ca href=\"http://localhost:8000/signup/{{ referral_code }}\"\u003eShare this link with your friends to earn 100 points for each friend who signs up!\u003c/a\u003e\u003c/p\u003e \u003c/div\u003e {% if referrals %} \u003cdiv class=\"mb-5\"\u003e \u003ctable class=\"table table-striped table-hover custom-table mt-5\"\u003e \u003cthead\u003e \u003ctr\u003e \u003cth scope=\"col\"\u003e#\u003c/th\u003e \u003cth scope=\"col\"\u003eReferral User\u003c/th\u003e \u003cth scope=\"col\"\u003eDate Joined\u003c/th\u003e \u003c/tr\u003e \u003c/thead\u003e \u003ctbody\u003e {% for referral in referrals %} \u003ctr\u003e \u003ctd\u003e{{ forloop.counter }}\u003c/td\u003e \u003ctd\u003e{{ referral.user }}\u003c/td\u003e \u003ctd\u003e{{ referral.user.date_joined }}\u003c/td\u003e \u003c/tr\u003e {% endfor %} \u003c/tbody\u003e \u003c/table\u003e \u003cdiv class=\"row mt-5\"\u003e \u003cdiv class=\"col-md-6\"\u003e \u003cdiv class=\"alert alert-success py-3 mb-3\"\u003e \u003ch4 class=\"mb-0\"\u003eTotal Referrals\u003c/h4\u003e \u003cp class=\"mb-0 display-4\"\u003e{{ referrals|length }}\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"col-md-6\"\u003e \u003cdiv class=\"alert alert-info py-3 mb-3\"\u003e \u003ch4 class=\"mb-0 text-dark\"\u003eTotal Points Earned\u003c/h4\u003e \u003cp class=\"mb-0 display-4 text-dark\"\u003e{{ total_bonus }}\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e {% else %} \u003cdiv class=\"alert alert-danger my-4 p-3 rounded text-center text-light\"\u003e You have not referred any friends yet. \u003c/div\u003e {% endif %} \u003ch1 class=\"mb-4 mt-5 custom-heading\"\u003eWallet for {{ current_user|upper }}\u003c/h1\u003e {% if user_cryptocurrencies %} \u003cdiv class=\"table-responsive\"\u003e \u003ctable class=\"table table-striped mb-4 mt-2 custom-table\"\u003e \u003cthead\u003e \u003ctr\u003e \u003cth scope=\"col\"\u003eCryptocurrency\u003c/th\u003e \u003cth scope=\"col\"\u003eCurrent Price\u003c/th\u003e \u003cth scope=\"col\"\u003eAmount Owned\u003c/th\u003e \u003cth scope=\"col\"\u003eAction\u003c/th\u003e \u003c/tr\u003e \u003c/thead\u003e \u003ctbody\u003e {% for crypto in user_cryptocurrencies %} \u003ctr\u003e \u003ctd\u003e{{ crypto.name }}\u003c/td\u003e \u003ctd\u003e{{ crypto.current_price }}\u003c/td\u003e \u003ctd\u003e{{ crypto.quantity }}\u003c/td\u003e \u003ctd\u003e\u003ca href=\"{% url 'delete_from_portfolio' crypto.id %}\"\u003e\u003ci class=\"fa fa-trash red-arrow\"\u003e\u003c/i\u003e\u003c/a\u003e\u003c/td\u003e \u003c/tr\u003e {% endfor %} \u003c/tbody\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"alert alert-info py-3 mb-3 fancy-color\"\u003e \u003ch4 class=\"mb-0 text-light\"\u003eTotal Portfolio Value\u003c/h4\u003e \u003cp class=\"mt-2 display-4 text-light\"\u003e${{ new_portfolio_value }}\u003c/p\u003e \u003c/div\u003e {% else %} \u003cdiv class=\"alert alert-danger my-3 p-3 rounded text-center text-light\"\u003e You have not added any cryptocurrencies to your portfolio yet. \u003c/div\u003e \u003cp\u003e\u003ca class=\"btn btn-primary\" href=\"{% url 'home' %}\"\u003eAdd Cryptocurrencies\u003c/a\u003e\u003c/p\u003e {% endif %} \u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e \u003cscript\u003e function sendToClipboard() { var copyText = document.querySelector(\".referral-code strong\"); copyText.textContent = \"http://localhost:8000/signup/\" + copyText.textContent; var textArea = document.createElement(\"textarea\"); textArea.value = copyText.textContent; document.body.appendChild(textArea); textArea.select(); document.execCommand(\"Copy\"); textArea.remove(); alert(\"Copied to clipboard\"); } \u003c/script\u003e {% endblock %} This Django template generates a web page that displays two main sections: referrals and cryptocurrency portfolio. The referral section shows the userâ€™s referral link and a table of all the referrals made by the user. The user can copy the referral link to share with friends and earn bonus points for each successful referral. The cryptocurrency portfolio section displays a table of all the cryptocurrencies owned by the user along with their current price and quantity. The total portfolio value is also shown. If the user has not added any cryptocurrencies to the portfolio, a message is displayed prompting them to add some. The template also includes a JavaScript function to copy the referral link to the clipboard when the user clicks on the copy button.\nRun the crypto app Now that about wraps up the crypto app. Letâ€™s run the app and see how it looks. Run the following command in the terminal:\npython manage.py makemigrations python manage.py migrate python manage.py runserver Now, open the following URL http://localhost:8000/signup in your browser. The app should show you the home page of the application. You can sign up for a new account and then log in to the application. Once you log in, you will be redirected to the home page. You can add cryptocurrencies to your portfolio and then view your portfolio and referrals on the portfolio page. You can also copy your referral link to the clipboard and share it with your friends to earn bonus points.\nConclusion In the second part of this massive tutorial we learned how to build a cryptocurrency portfolio web application using Django.\nIn our Django development journey, we covered the following topics:\nUsing the CoinGecko API to fetch the latest cryptocurrency prices and how to use the Django ORM to store the data in the database. Djangoâ€™s authentication system to create user accounts. Django messages framework to display messages to the user. Djangoâ€™s template system to generate dynamic web pages. Django ORM to query the database and perform various operations such as fetch data, update and delete data from the database, as well as write complex queries. perform aggregate queries and joins on the database using the Django ORM. perform transactions, date and time queries, and queries on specific data types such as JSON, arrays , UUID in the database. Writing highly specifc views, decorators and request methods to handle complex business backend logic such as adding cryptocurrencies to the portfolio, deleting cryptocurrencies from the portfolio, and so on. Overall, we covered various aspects of Django development that will help us build robust and scalable web applications. In the final part of this tutorial, in the next post we will cover testing all endpoints, views and models so definitely do not miss that.\n",
  "wordCount" : "6748",
  "inLanguage": "en",
  "image":"https://atharvashah.netlify.app/blog/django-crypto-app/cover-2.png","datePublished": "2023-05-01T23:19:34+05:30",
  "dateModified": "2023-05-01T23:19:34+05:30",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://atharvashah.netlify.app/tech/django-crypto-app/part2/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Atharva Shah",
    "logo": {
      "@type": "ImageObject",
      "url": "https://atharvashah.netlify.app/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://atharvashah.netlify.app/" accesskey="h" title="Atharva Shah (Alt + H)">
                <img src="https://atharvashah.netlify.app/profile/header_button.gif" alt="" aria-label="logo"
                    height="30">Atharva Shah</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://atharvashah.netlify.app/tech/" title="Tech">
                    <span>Tech</span>
                </a>
            </li>
            <li>
                <a href="https://atharvashah.netlify.app/personal/" title="Personal">
                    <span>Personal</span>
                </a>
            </li>
            <li>
                <a href="https://atharvashah.netlify.app/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://atharvashah.netlify.app/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://atharvashah.netlify.app/">Home</a>&nbsp;Â»&nbsp;<a href="https://atharvashah.netlify.app/tech/">Teches</a></div>
    <h1 class="post-title">
      Django Crypto App Part 2: Templates, Views and URLs
    </h1>
    <div class="post-meta"><span title='2023-05-01 23:19:34 +0530 IST'>May 1, 2023</span>&nbsp;Â·&nbsp;32 min&nbsp;Â·&nbsp;6748 words

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://atharvashah.netlify.app/blog/django-crypto-app/cover-2.png" alt="Part 2 - Templates, Views and URLs">
        <p>Here, we will add the templates, views and urls and code up the entire project. This will be the most complex and detailed part of this series.</p>
</figure>
  <div class="post-content"><ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#setting-up-the-urls">Setting up the URLs</a></li>
<li><a href="#setting-up-templates">Setting Up Templates</a></li>
<li><a href="#setting-up-views">Setting Up Views</a>
<ul>
<li><a href="#signup">Signup</a></li>
<li><a href="#login-screen">Login Screen</a></li>
<li><a href="#forgot-password-page">Forgot Password Page</a></li>
<li><a href="#password-reset-email">Password Reset Email</a></li>
<li><a href="#password-reset-success">Password Reset Success</a></li>
<li><a href="#home-page">Home Page</a></li>
<li><a href="#add-currency--search-result-page">Add Currency / Search Result Page</a></li>
<li><a href="#wallet-page">Wallet Page</a></li>
<li><a href="#run-the-crypto-app">Run the crypto app</a></li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
<p><a href="https://www.buymeacoffee.com/AtharvaShah"><img loading="lazy" src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee"  title="Buy Me A Coffee"  />
</a></p>
<h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>Welcome to the second part of the 3-part technical tutorial series, where we&rsquo;ll be building a Django project that enables users to manage their cryptocurrency portfolios. To implement the functionalities and additional features, we&rsquo;ll be utilizing API calls to coingecko or any other cryptocurrency API.</p>
<p>In the previous part, we set up the project and created the models. Now, we will continue off from that point and add the templates, views and urls and code up the entire project. This will be the most complex and detailed part of this series.</p>
<p>The code for the entirety of the project can be found here -&gt;  <strong><a href="https://github.com/HighnessAtharva/django-crypto-app">Github Repo for Django Crypto App</a></strong></p>
<h2 id="setting-up-the-urls">Setting up the URLs<a hidden class="anchor" aria-hidden="true" href="#setting-up-the-urls">#</a></h2>
<p>In Django, URLs are defined in the <code>urls.py</code> file for each app. The URL patterns are matched to a view function that will handle the request/response.</p>
<p>In the given code snippet, we can see the import statements for the <code>path</code> and <code>views</code> modules. We are also importing <code>auth_views</code> which is a Django module for handling authentication views. Additionally, we are importing the <code>admin</code> module from Django&rsquo;s <code>contrib</code> package.</p>
<p>The <code>urlpatterns</code> list contains all of the URL patterns for our app. Each URL pattern is defined using the <code>path()</code> function, which takes the following parameters:</p>
<ul>
<li><code>route</code>: A string that contains a URL pattern.</li>
<li><code>view</code>: The view function that should be called when the URL pattern is matched.</li>
<li><code>name</code>: A unique name for the URL pattern.</li>
</ul>
<p>For our project, we have defined URLs for several views:</p>
<ul>
<li><code>home_view</code>: The default view for our app, accessed at the root URL.</li>
<li><code>login_view</code>, <code>logout_view</code>: Views for user authentication.</li>
<li><code>signup_view</code>, <code>signup_with_referrer_view</code>: Views for user registration.</li>
<li><code>portfolio_view</code>: View for displaying user&rsquo;s portfolio.</li>
<li><code>search_view</code>: View for searching and adding new cryptocurrencies to a user&rsquo;s portfolio.</li>
<li><code>add_to_portfolio_view</code>, <code>delete_from_portfolio_view</code>: Views for adding/deleting cryptocurrencies from a user&rsquo;s portfolio.</li>
<li><code>password_reset</code>: View for resetting the user&rsquo;s password.</li>
<li><code>password_reset_done</code>: View displayed after password reset email is sent.</li>
<li><code>password_reset_confirm</code>: View for confirming the password reset.</li>
<li><code>password_reset_complete</code>: View displayed after the password has been reset.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib <span style="color:#f92672">import</span> admin
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib.auth <span style="color:#f92672">import</span> views <span style="color:#66d9ef">as</span> auth_views
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.urls <span style="color:#f92672">import</span> path
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> . <span style="color:#f92672">import</span> views
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>urlpatterns <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#34;&#34;</span>, views<span style="color:#f92672">.</span>home_view, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;home&#34;</span>),
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># user authentication</span>
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#34;login/&#34;</span>, views<span style="color:#f92672">.</span>login_view, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;login&#34;</span>),
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#34;logout/&#34;</span>, views<span style="color:#f92672">.</span>logout_view, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;logout&#34;</span>),
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#34;signup/&#34;</span>, views<span style="color:#f92672">.</span>signup_view, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;signup&#34;</span>),
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;signup/&lt;str:referral_code&gt;/&#39;</span>, views<span style="color:#f92672">.</span>signup_with_referrer_view, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;signup_with_referrer_view&#39;</span>),
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># wallet page</span>
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#34;portfolio/&#34;</span>, views<span style="color:#f92672">.</span>portfolio_view, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;portfolio&#34;</span>),
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># CRUD operations on cryptos</span>
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#34;search/&#34;</span>, views<span style="color:#f92672">.</span>search_view, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;search&#34;</span>),
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#34;add_to_portfolio/&#34;</span>, views<span style="color:#f92672">.</span>add_to_portfolio_view, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;add_to_portfolio&#34;</span>),
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;delete_from_portfolio/&lt;int:pk&gt;/&#39;</span>, views<span style="color:#f92672">.</span>delete_from_portfolio_view, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;delete_from_portfolio&#39;</span>),
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># password reset stuff</span>
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;password_reset/&#39;</span>, auth_views<span style="color:#f92672">.</span>PasswordResetView<span style="color:#f92672">.</span>as_view(template_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;reset/password_reset.html&#34;</span>), name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;password_reset&#39;</span>),
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;password_reset_done/&#39;</span>, auth_views<span style="color:#f92672">.</span>PasswordResetDoneView<span style="color:#f92672">.</span>as_view(template_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;reset/password_reset_done.html&#34;</span>), name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;password_reset_done&#39;</span>),
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;password_reset_confirm/&lt;uidb64&gt;/&lt;token&gt;/&#39;</span>, auth_views<span style="color:#f92672">.</span>PasswordResetConfirmView<span style="color:#f92672">.</span>as_view(
</span></span><span style="display:flex;"><span>    template_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;reset/password_reset_confirm.html&#39;</span>), name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;password_reset_confirm&#39;</span>),
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    path(<span style="color:#e6db74">&#39;password_reset_complete/&#39;</span>, auth_views<span style="color:#f92672">.</span>PasswordResetCompleteView<span style="color:#f92672">.</span>as_view(
</span></span><span style="display:flex;"><span>    template_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;reset/password_reset_complete.html&#39;</span>), name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;password_reset_complete&#39;</span>),
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>Overall, the <code>urlpatterns</code> list provides a clear mapping between URLs and the corresponding views, allowing us to easily navigate and use our web application.</p>
<h2 id="setting-up-templates">Setting Up Templates<a hidden class="anchor" aria-hidden="true" href="#setting-up-templates">#</a></h2>
<p>Views and templates are important components of the Model-View-Template (MVT) architecture in Django. Views handle the request/response flow and business logic of the application, while templates provide the presentation layer for the user interface.</p>
<p>We will be using some custom CSS and JavaScript files in our templates. These files are located in the <code>static</code> directory of our app. We can import these files using the <code>static</code> template tag in our templates. So go ahead and create a <code>static</code> directory in the main app and add the following files to it:</p>
<ul>
<li><code>style.css</code></li>
</ul>
<p>We will not be covering a ton of CSS explanation since Django is the focus of this article. The content of the <code>style.css</code> file is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>@<span style="color:#66d9ef">import</span> <span style="color:#f92672">url</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;display=swap&#39;</span><span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>::<span style="color:#a6e22e">-webkit-scrollbar</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>::<span style="color:#a6e22e">-webkit-scrollbar-track</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#f1f1f1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>::<span style="color:#a6e22e">-webkit-scrollbar-thumb</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#888</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>::<span style="color:#a6e22e">-webkit-scrollbar-thumb</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#555</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">body</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">overflow-x</span>: <span style="color:#66d9ef">hidden</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">white</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-family</span>: <span style="color:#e6db74">&#39;Roboto&#39;</span>, <span style="color:#66d9ef">sans-serif</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#130f40</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-image</span>: linear-gradient(<span style="color:#ae81ff">315</span><span style="color:#66d9ef">deg</span>, <span style="color:#ae81ff">#130f40</span> <span style="color:#ae81ff">0</span><span style="color:#66d9ef">%</span>, <span style="color:#ae81ff">#000000</span> <span style="color:#ae81ff">74</span><span style="color:#66d9ef">%</span>) <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-repeat</span>: <span style="color:#66d9ef">no-repeat</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-attachment</span>: <span style="color:#66d9ef">fixed</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-size</span>: <span style="color:#66d9ef">cover</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">min-height</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">vh</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">green-arrow</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">18</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">green</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">red-arrow</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">18</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">red</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">flex-container</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">flex-wrap</span>: <span style="color:#66d9ef">wrap</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">gap</span>: <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">crypto-item</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">row</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">space-between</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">align-items</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#66d9ef">gray</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">300</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">crypto-info</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-left</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">tt-menu</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">tt-suggestion</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">16</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">cursor</span>: <span style="color:#66d9ef">pointer</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#fff</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">tt-suggestion</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#f5f5f5</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">tt-suggestion</span>.<span style="color:#a6e22e">tt-cursor</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#f5f5f5</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">typeahead</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">custom-nav-logo</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-family</span>: <span style="color:#e6db74">&#39;Roboto&#39;</span>, <span style="color:#66d9ef">sans-serif</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">24</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">500</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">nav</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">box-shadow</span>: <span style="color:#ae81ff">-10</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">8</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span><span style="color:#66d9ef">px</span> rgb(<span style="color:#ae81ff">196</span> <span style="color:#ae81ff">181</span> <span style="color:#ae81ff">253</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background</span>: <span style="color:#ae81ff">#0f0f0f</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">white</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">50</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">fixed</span> ;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">top</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">z-index</span>: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">footer</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">fixed</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">left</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">bottom</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: rgb(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">white</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">referral-code</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#080808</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#ae81ff">#fff</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">referral-code</span> <span style="color:#f92672">p</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1.1</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">custom-heading</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-family</span>: <span style="color:#e6db74">&#39;Montserrat&#39;</span>, <span style="color:#66d9ef">sans-serif</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">2.5</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">600</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">letter-spacing</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">text-transform</span>: <span style="color:#66d9ef">uppercase</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">text-decoration</span>: <span style="color:#66d9ef">underline</span> <span style="color:#ae81ff">#fff</span> <span style="color:#66d9ef">solid</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  text-underline-offset: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">custom-table</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">text-transform</span>: <span style="color:#66d9ef">uppercase</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#fff</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: rgba(<span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">255</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">box-shadow</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">-8</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span><span style="color:#66d9ef">px</span> rgb(<span style="color:#ae81ff">253</span> <span style="color:#ae81ff">230</span> <span style="color:#ae81ff">138</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">th</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">td</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.75</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">vertical-align</span>: <span style="color:#66d9ef">middle</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-top</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> rgba(<span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">0.1</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">th</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#66d9ef">bold</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">text-transform</span>: <span style="color:#66d9ef">uppercase</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-bottom</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> rgb(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">text</span><span style="color:#f92672">-</span>align<span style="color:#f92672">:</span> <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-family</span>: <span style="color:#e6db74">&#39;Roboto&#39;</span>, <span style="color:#66d9ef">sans-serif</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">tbody</span> <span style="color:#f92672">tr</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: rgba(<span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">0.1</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">alert</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#fff</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#66d9ef">bold</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">letter-spacing</span>: <span style="color:#ae81ff">0.05</span><span style="color:#66d9ef">em</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">300</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.5</span><span style="color:#66d9ef">rem</span> <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">alert-success</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#007f1e</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: rgb(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>) <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#66d9ef">bold</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">alert-info</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#009cb4</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: rgb(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>) <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#66d9ef">bold</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">alert-danger</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#520008</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: rgb(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>) <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#66d9ef">bold</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">fancy-color</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-color</span>: <span style="color:#ae81ff">#4158D0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background-image</span>: linear-gradient(<span style="color:#ae81ff">43</span><span style="color:#66d9ef">deg</span>, <span style="color:#ae81ff">#4158D0</span> <span style="color:#ae81ff">0</span><span style="color:#66d9ef">%</span>, <span style="color:#ae81ff">#C850C0</span> <span style="color:#ae81ff">46</span><span style="color:#66d9ef">%</span>, <span style="color:#ae81ff">#FFCC70</span> <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">custom-title</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-left</span>: <span style="color:#ae81ff">-175</span><span style="color:#66d9ef">px</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">-30</span><span style="color:#66d9ef">px</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">50</span><span style="color:#66d9ef">px</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.5</span><span style="color:#66d9ef">rem</span> <span style="color:#ae81ff">0.5</span><span style="color:#66d9ef">rem</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">width</span>: fit-content <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">background</span>: rgba(<span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">0.9</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">welcome-user-text</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">500</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">letter-spacing</span>: <span style="color:#ae81ff">0.05</span><span style="color:#66d9ef">em</span> <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Remember we defined the <code>urlpatterns</code> list in the <code>urls.py</code> file? Each URL pattern in the list is mapped to a view function. For example, the <code>home_view</code> function is mapped to the root URL of our app. And we also made a <code>templates</code> folder in our app directory. This is where we will store all of our HTML templates and link them to the corresponding views.</p>
<p>Just to give you a peek into the structure of our app, here is a screenshot of the <code>templates</code> folder:</p>
<p><img loading="lazy" src="/blog/django-crypto-app/2-template.png" alt="template"  />
</p>
<p>We will be creating the following templates in our app so you can go ahead and make empty HTML files for them. Now let&rsquo;s start writing our views and templates.</p>
<p>Before writing the views, let us first create a <code>base.html</code> file in the <code>templates</code> folder. This file will contain the common HTML code that will be used in all of our templates. We will be using the Bootstrap CSS framework for styling our templates. So we will add the Bootstrap CDN link in the <code>base.html</code> file. We will also add the CSS code that we wrote in the <code>style.css</code> file in the <code>base.html</code> file. The <code>base.html</code> file will look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% load static %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!doctype html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- Required meta tags --&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;utf-8&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1, shrink-to-fit=no&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--Custom CSS--&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% static &#39;css/custom.css&#39; %}&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% static &#39;css/style.css&#39; %}&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- Bootstrap CSS --&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css&#34;</span> <span style="color:#a6e22e">integrity</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T&#34;</span> <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--Clipboard--&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--Sweet Alert--&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://unpkg.com/sweetalert/dist/sweetalert.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">title</span>&gt;Crypto App | {% block title %}{% endblock title %}&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>    {% include &#39;navbar.html&#39; %} 
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {% block content %}
</span></span><span style="display:flex;"><span>      {% endblock content %}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    {% include &#39;footer.html&#39; %} 
</span></span><span style="display:flex;"><span>    {% block scripts %}
</span></span><span style="display:flex;"><span>    {% endblock scripts %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- Optional JavaScript --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- jQuery first, then Popper.js, then Bootstrap JS --&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://code.jquery.com/jquery-3.3.1.slim.min.js&#34;</span> <span style="color:#a6e22e">integrity</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo&#34;</span> <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js&#34;</span> <span style="color:#a6e22e">integrity</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1&#34;</span> <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js&#34;</span> <span style="color:#a6e22e">integrity</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM&#34;</span> <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><p>Now, since we are referencing the <code>navbar.html</code> and <code>footer.html</code> files in the <code>base.html</code> file, we need to create these files in the <code>templates</code> folder. The <code>navbar.html</code> file will contain the navigation bar of our app and the <code>footer.html</code> file will contain the footer of our app. The <code>navbar.html</code> file will look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">nav</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;navbar navbar-expand-md&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;navbar-brand text-light my-2 my-sm-0 custom-nav-logo&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;home&#39; %}&#34;</span>&gt;Crypto App&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;navbar-toggler&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">data-toggle</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;collapse&#34;</span> <span style="color:#a6e22e">data-target</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#navbarNav&#34;</span> <span style="color:#a6e22e">aria-controls</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;navbarNav&#34;</span> <span style="color:#a6e22e">aria-expanded</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#a6e22e">aria-label</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Toggle navigation&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;navbar-toggler-icon&#34;</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;collapse navbar-collapse&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;navbarNav&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">ul</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;navbar-nav mr-auto&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">ul</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;navbar-nav&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {% if user.is_authenticated %}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn-group&#34;</span> <span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary my-2 my-sm-0 mr-2&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;portfolio&#39; %}&#34;</span>&gt;View My Wallet&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-danger my-2 my-sm-0 mr-2&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;logout&#39; %}&#34;</span>&gt;Logout&lt;/<span style="color:#f92672">a</span>&gt;  
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        {% else %}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn-group&#34;</span> <span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary my-2 my-sm-0 mr-2&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;login&#39; %}&#34;</span>&gt;Login&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-success my-2 my-sm-0&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;signup&#39; %}&#34;</span>&gt;Signup&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        {% endif %}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">nav</span>&gt;
</span></span></code></pre></div><p>The <code>footer.html</code> file will look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% load static %}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">footer</span>&gt;
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row justify-content-center&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col-lg-12 col-md-12 col-sm-12 col-xs-12&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;copy-right text-center&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">p</span>&gt;Â© 2023 Crypto App. Developed By &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-light&#34;</span>&gt;Atharva Shah&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">footer</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><p>Now, the final step for the template setup is to write the <code>alerts.html</code> file. This file will contain the code for displaying alerts to the user. In Django, alerts are messages that can be displayed to users after certain events or actions have occurred, such as a successful login or a failed form submission. They are a way to provide feedback to the user about what has happened, and can be used to convey important information or instructions.</p>
<p>Django provides a built-in messaging framework that makes it easy to use alerts in your application. This framework allows you to create different types of messages, such as success, warning, or error messages, and to customize the way they are displayed.</p>
<p>The <code>alerts.html</code> file will look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% if messages %}
</span></span><span style="display:flex;"><span>{% for message in messages %}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-{{message.tags}} alert-dismissible fade show w-50 d-flex justify-content-center align-items-center ml-auto mr-auto  &#34;</span> <span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    {{ message }}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;close&#34;</span> <span style="color:#a6e22e">data-dismiss</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert&#34;</span> <span style="color:#a6e22e">aria-label</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Close&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">aria-hidden</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span>&gt;&amp;times;&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{% endfor %}
</span></span><span style="display:flex;"><span>{% endif %}
</span></span></code></pre></div><h2 id="setting-up-views">Setting Up Views<a hidden class="anchor" aria-hidden="true" href="#setting-up-views">#</a></h2>
<p>To use views and templates in Django, we first need to import the necessary modules. The <code>requests</code> module is used for sending HTTP requests to external APIs. The <code>auth</code> module is used for user authentication related functionality. The <code>messages</code> module is used for displaying messages to the user. The <code>decorators</code> module is used for adding functionality to views based on certain conditions, such as requiring the user to be logged in or having certain permissions. The <code>forms</code> module is used for creating HTML forms that map to Django models. The <code>models</code> module is used for defining the database schema and ORM of the application.</p>
<p>We can import these modules using the following code snippet in <code>views.py</code> since we will be using them in our views:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> requests
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib <span style="color:#f92672">import</span> auth, messages
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib.auth <span style="color:#f92672">import</span> authenticate, login, logout
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib.auth.decorators <span style="color:#f92672">import</span> login_required, user_passes_test
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib.auth.forms <span style="color:#f92672">import</span> AuthenticationForm, UserCreationForm
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib.auth.hashers <span style="color:#f92672">import</span> make_password
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib.auth.models <span style="color:#f92672">import</span> User
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib.auth.tokens <span style="color:#f92672">import</span> default_token_generator
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.core.exceptions <span style="color:#f92672">import</span> PermissionDenied
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.db <span style="color:#f92672">import</span> IntegrityError
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.http <span style="color:#f92672">import</span> HttpResponse, HttpResponseNotAllowed
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.shortcuts <span style="color:#f92672">import</span> redirect, render
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.template.defaultfilters <span style="color:#f92672">import</span> slugify
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.utils.http <span style="color:#f92672">import</span> urlsafe_base64_decode
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .forms <span style="color:#f92672">import</span> CustomUserCreationForm
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .models <span style="color:#f92672">import</span> Cryptocurrency, Portfolio, Profile, Referal
</span></span></code></pre></div><p>Once we have imported these modules, we can start writing our views and templates to create the desired functionality for our application.</p>
<blockquote>
<p>ðŸš¨ Please note that most of these views depend on each other so we recommend that you follow the order in which they are presented here. and test them at the very end since they are all interconnected and you may get errors if the dependent views/templates are not created yet.</p>
</blockquote>
<h3 id="signup">Signup<a hidden class="anchor" aria-hidden="true" href="#signup">#</a></h3>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/signup.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/signup.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p>Let&rsquo;s start with the <code>signup_view</code> function. This view is mapped to the <code>/signup/</code> URL pattern in the <code>urls.py</code> file. The <code>signup_view</code> function is responsible for displaying the signup form to the user and creating a new user account if the form is valid.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">signup_view</span>(request):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># check if user is already logged in</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>user<span style="color:#f92672">.</span>is_authenticated:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> redirect(<span style="color:#e6db74">&#39;portfolio&#39;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;POST&#39;</span>:
</span></span><span style="display:flex;"><span>            form <span style="color:#f92672">=</span> CustomUserCreationForm(request<span style="color:#f92672">.</span>POST)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> form<span style="color:#f92672">.</span>is_valid():
</span></span><span style="display:flex;"><span>                user <span style="color:#f92672">=</span> form<span style="color:#f92672">.</span>save(commit<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>                user<span style="color:#f92672">.</span>password <span style="color:#f92672">=</span> make_password(form<span style="color:#f92672">.</span>cleaned_data[<span style="color:#e6db74">&#39;password1&#39;</span>])
</span></span><span style="display:flex;"><span>                user<span style="color:#f92672">.</span>email <span style="color:#f92672">=</span> form<span style="color:#f92672">.</span>cleaned_data[<span style="color:#e6db74">&#39;email&#39;</span>]
</span></span><span style="display:flex;"><span>                user<span style="color:#f92672">.</span>save()
</span></span><span style="display:flex;"><span>                messages<span style="color:#f92672">.</span>success(request, <span style="color:#e6db74">&#39;You have successfully signed up!&#39;</span>, extra_tags<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;success&#39;</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> redirect(<span style="color:#e6db74">&#39;login&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        form <span style="color:#f92672">=</span> CustomUserCreationForm()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> render(request, <span style="color:#e6db74">&#39;signup.html&#39;</span>, {<span style="color:#e6db74">&#39;form&#39;</span>: form})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># block access to signup page if user is already logged in</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">signup_with_referrer_view</span>(request, referral_code):
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># check if user is already logged in</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>user<span style="color:#f92672">.</span>is_authenticated:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> redirect(<span style="color:#e6db74">&#39;portfolio&#39;</span>)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># get the User Profile of the referrer</span>
</span></span><span style="display:flex;"><span>        referrer <span style="color:#f92672">=</span> User<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(profile__referral_code<span style="color:#f92672">=</span>referral_code)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> User<span style="color:#f92672">.</span>DoesNotExist:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># show error message if referrer does not exist</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> HttpResponse(<span style="color:#e6db74">&#34;Referrer does not exist&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;POST&#39;</span>:
</span></span><span style="display:flex;"><span>        form <span style="color:#f92672">=</span> CustomUserCreationForm(request<span style="color:#f92672">.</span>POST)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> form<span style="color:#f92672">.</span>is_valid():
</span></span><span style="display:flex;"><span>            user <span style="color:#f92672">=</span> form<span style="color:#f92672">.</span>save(commit<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>            user<span style="color:#f92672">.</span>password <span style="color:#f92672">=</span> make_password(form<span style="color:#f92672">.</span>cleaned_data[<span style="color:#e6db74">&#39;password1&#39;</span>])
</span></span><span style="display:flex;"><span>            user<span style="color:#f92672">.</span>email <span style="color:#f92672">=</span> form<span style="color:#f92672">.</span>cleaned_data[<span style="color:#e6db74">&#39;email&#39;</span>]
</span></span><span style="display:flex;"><span>            user<span style="color:#f92672">.</span>save()
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># create a referral instance</span>
</span></span><span style="display:flex;"><span>            referral <span style="color:#f92672">=</span> Referal<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>create(user<span style="color:#f92672">=</span>user, referrer<span style="color:#f92672">=</span>referrer)
</span></span><span style="display:flex;"><span>            referral<span style="color:#f92672">.</span>save()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> referrer <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>                referrer<span style="color:#f92672">.</span>profile<span style="color:#f92672">.</span>bonus <span style="color:#f92672">+=</span> <span style="color:#ae81ff">100</span>  <span style="color:#75715e"># add referral bonus to referrer</span>
</span></span><span style="display:flex;"><span>                referrer<span style="color:#f92672">.</span>profile<span style="color:#f92672">.</span>save()
</span></span><span style="display:flex;"><span>                messages<span style="color:#f92672">.</span>success(request, <span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{</span>referrer<span style="color:#f92672">.</span>username<span style="color:#e6db74">}</span><span style="color:#e6db74"> recieved a bonus of 100 points from you because you signed up using their referral link!&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            messages<span style="color:#f92672">.</span>success(request, <span style="color:#e6db74">&#39;You have successfully signed up!&#39;</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> redirect(<span style="color:#e6db74">&#39;login&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        form <span style="color:#f92672">=</span> CustomUserCreationForm()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> render(request, <span style="color:#e6db74">&#39;signup.html&#39;</span>, {<span style="color:#e6db74">&#39;form&#39;</span>: form, <span style="color:#e6db74">&#39;referrer&#39;</span>: referrer})
</span></span></code></pre></div><p>These are two views that handle user signup with and without a referral code.</p>
<p>The first view is <code>signup_view</code>. It checks whether the user is already logged in. If the user is logged in, then they will be redirected to their portfolio page. If the request method is POST, it will validate the user&rsquo;s input, create a new user, and save them in the database. The password is hashed before it is saved. If the form is not valid, it will render the same template with the form and display the errors. If the request method is not POST, then the view will render the signup form. In both cases, the view will render the <code>signup.html</code> template with the form.</p>
<p>The second view is <code>signup_with_referrer_view</code>. It first checks if the user is already logged in. If they are, they will be redirected to their portfolio page. Then it will try to find the referrer user using the referral code passed in the URL. If the referrer doesn&rsquo;t exist, it will display an error message. If the request method is POST, it will validate the form input and create a new user and save it in the database. It will also create a new referral instance and save it in the database. The referral instance will link the new user to the referrer. It will also add a referral bonus of 100 points to the referrer&rsquo;s profile. Finally, it will redirect the user to the login page with a success message. If the request method is not POST, then the view will render the signup form with the referrer&rsquo;s username displayed on the page. In both cases, the view will render the signup.html template with the form and the referrer&rsquo;s username (if present).</p>
<p>Now, the <code>signup.html</code> template will be rendered by both views. It will display the signup form to the user. To make the form and render it in the template, we will use the Django forms module. We will create a new file called <code>forms.py</code> in the cryptoapp directory and add the following code to it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> django <span style="color:#f92672">import</span> forms
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib.auth.forms <span style="color:#f92672">import</span> UserCreationForm
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib.auth.models <span style="color:#f92672">import</span> User
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CustomUserCreationForm</span>(UserCreationForm):
</span></span><span style="display:flex;"><span>    username <span style="color:#f92672">=</span> forms<span style="color:#f92672">.</span>CharField(required<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Username&#39;</span>, help_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.&#39;</span>, widget<span style="color:#f92672">=</span>forms<span style="color:#f92672">.</span>TextInput(attrs<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;form-control&#39;</span>}))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    email <span style="color:#f92672">=</span> forms<span style="color:#f92672">.</span>EmailField(required<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Email&#39;</span>, help_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Required. Enter a valid email address.&#39;</span>, widget<span style="color:#f92672">=</span>forms<span style="color:#f92672">.</span>TextInput(attrs<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;form-control&#39;</span>}))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    password1 <span style="color:#f92672">=</span> forms<span style="color:#f92672">.</span>CharField(required<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Password&#39;</span>, help_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Required. Enter a valid password.&#39;</span>, widget<span style="color:#f92672">=</span>forms<span style="color:#f92672">.</span>PasswordInput(attrs<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;form-control&#39;</span>}))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    password2 <span style="color:#f92672">=</span> forms<span style="color:#f92672">.</span>CharField(required<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Password confirmation&#39;</span>, help_text<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Enter the same password as before, for verification.&#39;</span>, widget<span style="color:#f92672">=</span>forms<span style="color:#f92672">.</span>PasswordInput(attrs<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;form-control&#39;</span>})) 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Meta</span>:
</span></span><span style="display:flex;"><span>        model <span style="color:#f92672">=</span> User
</span></span><span style="display:flex;"><span>        fields <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;username&#39;</span>, <span style="color:#e6db74">&#39;email&#39;</span>, <span style="color:#e6db74">&#39;password1&#39;</span>, <span style="color:#e6db74">&#39;password2&#39;</span>]
</span></span></code></pre></div><p>Now that the form is ready, we can render it in the signup.html template. We will create a new file called <code>signup.html</code> in the templates directory and add the following code to it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% extends &#39;base.html&#39; %}
</span></span><span style="display:flex;"><span>{% block title %}
</span></span><span style="display:flex;"><span>Sign Up
</span></span><span style="display:flex;"><span>{% endblock title %}
</span></span><span style="display:flex;"><span>{% block content %}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h1</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-4&#34;</span>&gt;Signup&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my-4 p-4 border border-dark rounded&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  {% csrf_token %}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;username&#34;</span>&gt;Username&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>        {{ form.username }} 
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;email&#34;</span>&gt;Email address&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>    {{ form.email }}
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;password1&#34;</span>&gt;Password&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>    {{ form.password1 }}
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;password2&#34;</span>&gt;Confirm Password&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>    {{ form.password2 }}
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary mt-3&#34;</span>&gt;Signup&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% if form.errors %}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-danger mt-3 mb-5&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">strong</span>&gt;Error:&lt;/<span style="color:#f92672">strong</span>&gt; {{ form.errors }}
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{% endif %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mt-3&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  Already have an account? &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;login&#39; %}&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-primary font-weight-bold&#34;</span>&gt;Login&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% endblock %}
</span></span></code></pre></div><p>This is a Django template for the sign-up page that extends the base template. It displays a sign-up form with fields for username, email, password and confirm password. If there are any form errors, they are displayed in an alert box. It also includes a link to the login page. The template uses Django&rsquo;s template language to display the form fields and errors.</p>
<p>Since after the user signup we want to make a profile for them, we will create a new file called <code>signals.py</code> in the cryptoapp directory and add the following code to it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> shortuuid
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.contrib.auth.models <span style="color:#f92672">import</span> User
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.db.models.signals <span style="color:#f92672">import</span> post_save
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> django.dispatch <span style="color:#f92672">import</span> receiver
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .models <span style="color:#f92672">import</span> Profile
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This file is used to generate a referral code for each user as soon as they sign up.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">generate_referral_code</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> shortuuid<span style="color:#f92672">.</span>ShortUUID()<span style="color:#f92672">.</span>random(length<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@receiver</span>(post_save, sender<span style="color:#f92672">=</span>User)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">create_profile</span>(sender, instance, created, <span style="color:#f92672">**</span>kwargs):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> created:
</span></span><span style="display:flex;"><span>        profile <span style="color:#f92672">=</span> Profile<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>create(user<span style="color:#f92672">=</span>instance, referral_code<span style="color:#f92672">=</span>generate_referral_code())
</span></span><span style="display:flex;"><span>        profile<span style="color:#f92672">.</span>save()
</span></span></code></pre></div><p>This signal code generates a referral code for a user as soon as they sign up. It does this by listening for the <code>&quot;post_save&quot;</code> signal sent by the User model. When a new User instance is created, this signal triggers the <code>&quot;create_profile&quot;</code> function which creates a Profile instance for that user and generates a unique referral code using shortuuid library. This generated referral code is then saved to the Profile instance.</p>
<p>Now to register this signal, we will change the <code>apps.py</code> file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> django.apps <span style="color:#f92672">import</span> AppConfig
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainappConfig</span>(AppConfig):
</span></span><span style="display:flex;"><span>    default_auto_field <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;django.db.models.BigAutoField&#34;</span>
</span></span><span style="display:flex;"><span>    name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mainapp&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">ready</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">import</span> mainapp.signals
</span></span></code></pre></div><h3 id="login-screen">Login Screen<a hidden class="anchor" aria-hidden="true" href="#login-screen">#</a></h3>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/Login.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/Login.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p>The view for the login page will be similar to the signup view. In <code>views.py</code> continue to add the following code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">login_view</span>(request):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># check if user is already logged in</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>user<span style="color:#f92672">.</span>is_authenticated:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> redirect(<span style="color:#e6db74">&#39;portfolio&#39;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;POST&#39;</span>:
</span></span><span style="display:flex;"><span>        form <span style="color:#f92672">=</span> AuthenticationForm(request, data<span style="color:#f92672">=</span>request<span style="color:#f92672">.</span>POST)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> form<span style="color:#f92672">.</span>is_valid():
</span></span><span style="display:flex;"><span>            username <span style="color:#f92672">=</span> form<span style="color:#f92672">.</span>cleaned_data<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;username&#39;</span>)
</span></span><span style="display:flex;"><span>            raw_password <span style="color:#f92672">=</span> form<span style="color:#f92672">.</span>cleaned_data<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;password&#39;</span>)
</span></span><span style="display:flex;"><span>            user <span style="color:#f92672">=</span> authenticate(request, username<span style="color:#f92672">=</span>username, password<span style="color:#f92672">=</span>raw_password)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> user <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>                login(request, user)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> redirect(<span style="color:#e6db74">&#39;portfolio&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            messages<span style="color:#f92672">.</span>error(request, <span style="color:#e6db74">&#34;Invalid username or password.&#34;</span>, extra_tags<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;danger&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        form <span style="color:#f92672">=</span> AuthenticationForm()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> render(request, <span style="color:#e6db74">&#39;login.html&#39;</span>, {<span style="color:#e6db74">&#39;form&#39;</span>: form})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@login_required</span>(login_url<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;login&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">logout_view</span>(request):
</span></span><span style="display:flex;"><span>    logout(request)
</span></span><span style="display:flex;"><span>    messages<span style="color:#f92672">.</span>success(request, <span style="color:#e6db74">&#39;You have successfully logged out!&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> redirect(<span style="color:#e6db74">&#39;home&#39;</span>)
</span></span></code></pre></div><p>These are two views related to user authentication in a Django web application.</p>
<p>login_view handles the user login process. It checks if the user is already logged in, and if not, it accepts a POST request with login credentials (username and password) from a form, validates them using Django&rsquo;s built-in AuthenticationForm form, and logs the user in if they are authenticated. If the form is invalid, it displays an error message. If the request is not a POST request, it displays the login form.</p>
<p>logout_view handles the user logout process. It logs out the user using Django&rsquo;s logout function, displays a success message, and redirects the user to the home page. This view requires the user to be logged in, and if they are not, it redirects them to the login page specified in the login_url argument of the login_required decorator.</p>
<p>The html template for the login page is similar to the signup page. Create a new file called <code>login.html</code> in the templates directory and add the following code to it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% extends &#39;base.html&#39; %}
</span></span><span style="display:flex;"><span>{% block title %}
</span></span><span style="display:flex;"><span>Login
</span></span><span style="display:flex;"><span>{% endblock title %}
</span></span><span style="display:flex;"><span>{% block content %}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">h1</span>&gt;Login&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>  {% for message in messages %}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-{{ message.tags }}&#34;</span>&gt;{{ message }}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>  {% endfor %}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my-4 p-4 border border-dark rounded&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    {% csrf_token %}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;username&#34;</span>&gt;Username&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;username&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;password&#34;</span>&gt;Password&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;password&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;password&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary btn-block my-2&#34;</span>&gt;Login&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">p</span>&gt;Don&#39;t have an account? &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;signup&#39; %}&#34;</span>&gt;Register&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">p</span>&gt;Forgot your password? &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;password_reset&#39; %}&#34;</span>&gt;Reset Password&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>{% endblock %}
</span></span></code></pre></div><p>Now that the login view is ready, we can also take care of the forgot password functionality.</p>
<h3 id="forgot-password-page">Forgot Password Page<a hidden class="anchor" aria-hidden="true" href="#forgot-password-page">#</a></h3>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/reset-password.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/reset-password.png?raw=true" alt="Screenshot 1"  />
</a></p>
<h3 id="password-reset-email">Password Reset Email<a hidden class="anchor" aria-hidden="true" href="#password-reset-email">#</a></h3>
<p>For convience, we will group the forgot password view templates and save them in the <code>reset</code> folder inside the <code>templates</code> directory. Create a new file called <code>password_reset.html</code> in the <code>reset</code> directory and add the following code to it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% extends &#34;base.html&#34; %}
</span></span><span style="display:flex;"><span>{% load crispy_forms_tags %}
</span></span><span style="display:flex;"><span>{% block content %}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;content-section&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;POST&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            {% csrf_token %}
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">fieldset</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">legend</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;border-bottom mb-4&#34;</span>&gt;Reset Password&lt;/<span style="color:#f92672">legend</span>&gt;
</span></span><span style="display:flex;"><span>                {{ form|crispy }}
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">fieldset</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-outline-info&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span>&gt;Request Password Reset&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{% endblock content %}
</span></span></code></pre></div><p>Now, make a file called <code>password_reset_done.html</code>. It will show a message that an email has been sent to the user&rsquo;s email ID.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% extends &#34;base.html&#34; %}
</span></span><span style="display:flex;"><span>{% block content %}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-info&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        An email has been sent with instructions to reset your password
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{% endblock content %}
</span></span></code></pre></div><p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/password-reset-email.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/password-reset-email.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p>Once the user clicks this link he will be redirected to the password reset page. Here he can enter his new password and confirm it.
So for this purpose</p>
<p>Now,make a file called <code>password_reset_confirm.html</code>. It will prompt for the new password.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% extends &#34;base.html&#34; %}
</span></span><span style="display:flex;"><span>{% load crispy_forms_tags %}
</span></span><span style="display:flex;"><span>{% block content %}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;content-section&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;POST&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            {% csrf_token %}
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">fieldset</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">legend</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;border-bottom mb-4&#34;</span>&gt;Reset Password&lt;/<span style="color:#f92672">legend</span>&gt;
</span></span><span style="display:flex;"><span>                {{ form|crispy }}
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">fieldset</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-outline-info&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span>&gt;Reset Password&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{% endblock content %}
</span></span></code></pre></div><p>Make a final file called <code>password_reset_complete.html</code>. It will show a message that the password has been changed successfully.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% extends &#34;base.html&#34; %}
</span></span><span style="display:flex;"><span>{% block content %}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-info&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        Your password has been set.
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;login&#39; %}&#34;</span>&gt;Sign In Here&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>{% endblock content %}
</span></span></code></pre></div><h3 id="password-reset-success">Password Reset Success<a hidden class="anchor" aria-hidden="true" href="#password-reset-success">#</a></h3>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/password-reset-success.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/password-reset-success.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p>Remember we need not define any custom views here since Django provides us with the default views for password reset. Please refer the <code>urls.py</code> file.</p>
<h3 id="home-page">Home Page<a hidden class="anchor" aria-hidden="true" href="#home-page">#</a></h3>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/home-1.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/home-1.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/home-blank.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/home-blank.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/user-price-change.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/user-price-change.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p>Now let us focus on the home page. We will show the top 10 cryptocurrencies on the home page. We will use the CoinGecko API to fetch the data.</p>
<p>The view for this page will be:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">home_view</span>(request):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get the top 10 crypto currencies by market cap</span>
</span></span><span style="display:flex;"><span>    top_10_crypto_url_global <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://api.coingecko.com/api/v3/coins/markets?vs_currency=USD&amp;order=market_cap_desc&amp;per_page=10&amp;page=1&amp;sparkline=true&#39;</span>
</span></span><span style="display:flex;"><span>    top_10_crypto_data_global <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(top_10_crypto_url_global)<span style="color:#f92672">.</span>json()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># check if user is logged in    </span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>user<span style="color:#f92672">.</span>is_authenticated:
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># get user&#39;s crypto currencies</span>
</span></span><span style="display:flex;"><span>        user_cryptocurrencies <span style="color:#f92672">=</span> Cryptocurrency<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(user<span style="color:#f92672">=</span>request<span style="color:#f92672">.</span>user)
</span></span><span style="display:flex;"><span>        user_portfolio <span style="color:#f92672">=</span> Portfolio<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(user<span style="color:#f92672">=</span>request<span style="color:#f92672">.</span>user)<span style="color:#f92672">.</span>first()
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># get the prices and price changes for user&#39;s cryptocurrencies</span>
</span></span><span style="display:flex;"><span>        names <span style="color:#f92672">=</span> [crypto<span style="color:#f92672">.</span>name <span style="color:#66d9ef">for</span> crypto <span style="color:#f92672">in</span> user_cryptocurrencies]
</span></span><span style="display:flex;"><span>        symbols <span style="color:#f92672">=</span> [crypto<span style="color:#f92672">.</span>symbol <span style="color:#66d9ef">for</span> crypto <span style="color:#f92672">in</span> user_cryptocurrencies]
</span></span><span style="display:flex;"><span>        ids <span style="color:#f92672">=</span> [crypto<span style="color:#f92672">.</span>id_from_api <span style="color:#66d9ef">for</span> crypto <span style="color:#f92672">in</span> user_cryptocurrencies]
</span></span><span style="display:flex;"><span>        prices<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># NOTE: Only showing the price change for the last 24 hours for now and not the percentage change to reduce the number of api calls. Only 10-20 api calls per minute are allowed for free users. Otherwise, I could have used the /coins/{id}/market_chart?vs_currency=usd&amp;days=1 endpoint to get the price change for the last 24 hours and calculate the percentage change from that.</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> crytpo_id <span style="color:#f92672">in</span> ids:  
</span></span><span style="display:flex;"><span>            prices_url <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;https://api.coingecko.com/api/v3/simple/price?ids=</span><span style="color:#e6db74">{</span>crytpo_id<span style="color:#e6db74">}</span><span style="color:#e6db74">&amp;vs_currencies=usd&amp;include_24hr_change=true&#39;</span>
</span></span><span style="display:flex;"><span>            prices_data <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(prices_url)<span style="color:#f92672">.</span>json()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            price_change <span style="color:#f92672">=</span> prices_data[crytpo_id][<span style="color:#e6db74">&#39;usd_24h_change&#39;</span>]
</span></span><span style="display:flex;"><span>            prices<span style="color:#f92672">.</span>append(price_change)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># make a dictionary out of the names and prices</span>
</span></span><span style="display:flex;"><span>        crypto_price_changes <span style="color:#f92672">=</span> dict(zip(names, prices))
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>        context <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;top_10_crypto_data_global&#39;</span>: top_10_crypto_data_global,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;user_cryptocurrencies&#39;</span>: user_cryptocurrencies,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;user_portfolio&#39;</span>: user_portfolio,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;crypto_price_changes&#39;</span>: crypto_price_changes,
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        context <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;top_10_crypto_data_global&#39;</span>: top_10_crypto_data_global}    
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> render(request, <span style="color:#e6db74">&#39;home.html&#39;</span>, context)
</span></span></code></pre></div><p>The function does the following:</p>
<ol>
<li>Sends a GET request to the Coingecko API to retrieve data for the top 10 cryptocurrencies by market capitalization in USD.</li>
<li>Checks if the user is authenticated.</li>
<li>If the user is authenticated, it retrieves the user&rsquo;s cryptocurrencies from the database and makes an API call to get their prices and price changes for the last 24 hours.</li>
<li>Creates a dictionary mapping the cryptocurrencies&rsquo; names to their price changes.</li>
<li>Renders the home page template with a context dictionary containing the top 10 cryptocurrencies data, user&rsquo;s cryptocurrencies, user&rsquo;s portfolio, and cryptocurrencies&rsquo; price changes.</li>
</ol>
<p>The view function handles the case where the user is not authenticated, in which case it only renders the home page template with the top 10 cryptocurrencies data.</p>
<p>The json response for the CoinGecko API <a href="https://api.coingecko.com/api/v3/coins/markets?vs_currency=USD&amp;order=market_cap_desc&amp;per_page=10&amp;page=1&amp;sparkline=true">can be found here</a>.</p>
<p><img loading="lazy" src="/blog/django-crypto-app/2-json-response.png" alt="json response"  />
</p>
<p>Create a new file called <code>home.html</code> in the templates directory and add the following code to it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% extends &#39;base.html&#39; %}
</span></span><span style="display:flex;"><span>{% block title %}
</span></span><span style="display:flex;"><span>Home 
</span></span><span style="display:flex;"><span>{% endblock title %}
</span></span><span style="display:flex;"><span>{% block content %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!--Print messages--&gt;</span>
</span></span><span style="display:flex;"><span>{% if messages %}
</span></span><span style="display:flex;"><span>  {% for message in messages %}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-success alert-dismissible fade show&#34;</span> <span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {{ message }}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;close&#34;</span> <span style="color:#a6e22e">data-dismiss</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert&#34;</span> <span style="color:#a6e22e">aria-label</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Close&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">aria-hidden</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span>&gt;&amp;times;&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  {% endfor %}
</span></span><span style="display:flex;"><span>{% endif %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% if user.is_authenticated %}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row justify-content-left custom-title&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">h2</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-uppercase text-primary welcome-user-text&#34;</span>&gt;Welcome {{ user.username | capfirst }} &lt;/<span style="color:#f92672">h2</span>&gt; 
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{% endif %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!--SEARCH BAR--&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container mt-5 mb-5&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row justify-content-center&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">h2</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-center custom-heading&#34;</span>&gt;Search Cryptocurrency&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row mt-3 justify-content-center&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col-md-6 col-lg-4&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;search&#39; %}&#34;</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        {% csrf_token %}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input-group&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Search cryptocurrencies...&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;search_query&#34;</span> <span style="color:#a6e22e">required</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input-group-append&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span>&gt;Search&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!--GLOBAL CRYPTO CURRENCIES--&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row justify-content-center&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h2</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-center mt-5 mb-0 custom-heading&#34;</span>&gt; Top 10 CryptoCurrency Rankings &lt;/<span style="color:#f92672">h2</span>&gt; 
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">br</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;flex-container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  {% if top_10_crypto_data_global %}
</span></span><span style="display:flex;"><span>    {% for obj in top_10_crypto_data_global %}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;crypto-item&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">{{obj.image}}</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;70&#39;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;crypto-info&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">h3</span>&gt;{{obj.name}}&lt;/<span style="color:#f92672">h3</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">p</span>&gt;&lt;<span style="color:#f92672">b</span>&gt;Rank&lt;/<span style="color:#f92672">b</span>&gt;: {{obj.market_cap_rank}}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">p</span>&gt;&lt;<span style="color:#f92672">b</span>&gt;Market&lt;/<span style="color:#f92672">b</span>&gt; cap: {{obj.market_cap}}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">p</span>&gt;&lt;<span style="color:#f92672">b</span>&gt;Price&lt;/<span style="color:#f92672">b</span>&gt;: {{obj.current_price}}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">p</span>&gt;&lt;<span style="color:#f92672">b</span>&gt;Price Change 24H&lt;/<span style="color:#f92672">b</span>&gt;: {{obj.price_change_24h|floatformat:5 }}
</span></span><span style="display:flex;"><span>            {% if obj.price_change_percentage_24h &gt; 0 %}
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fa fa-arrow-up green-arrow&#34;</span>&gt;&lt;/<span style="color:#f92672">i</span>&gt;
</span></span><span style="display:flex;"><span>            {% else %}
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fa fa-arrow-down red-arrow&#34;</span>&gt;&lt;/<span style="color:#f92672">i</span>&gt;
</span></span><span style="display:flex;"><span>            {% endif %} 
</span></span><span style="display:flex;"><span>          <span style="color:#960050;background-color:#1e0010">&lt;</span>/p&lt;<span style="color:#f92672">b</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">p</span>&gt;&lt;<span style="color:#f92672">b</span>&gt;Price Change 24H (%)&lt;/<span style="color:#f92672">b</span>&gt;: {{obj.price_change_percentage_24h|floatformat:3 }}
</span></span><span style="display:flex;"><span>            {% if obj.price_change_percentage_24h &gt; 0 %}
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fa fa-arrow-up green-arrow&#34;</span>&gt;&lt;/<span style="color:#f92672">i</span>&gt;
</span></span><span style="display:flex;"><span>            {% else %}
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fa fa-arrow-down red-arrow&#34;</span>&gt;&lt;/<span style="color:#f92672">i</span>&gt;
</span></span><span style="display:flex;"><span>            {% endif %} 
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    {% endfor %}
</span></span><span style="display:flex;"><span>  {% else %}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">h3</span>&gt;No data&lt;/<span style="color:#f92672">h3</span>&gt;
</span></span><span style="display:flex;"><span>  {% endif %}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!--USER CRYPTO CURRENCIES--&gt;</span>
</span></span><span style="display:flex;"><span>{% if user.is_authenticated %}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row justify-content-center&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">h2</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-center mt-5 mb-3 custom-heading&#34;</span>&gt;24H Summary of Your Cryptos &lt;/<span style="color:#f92672">h2</span>&gt; 
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{% if user_cryptocurrencies %}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;table-responsive&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">table</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;table table-striped table-bordered custom-table&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">thead</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">th</span>&gt;#&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">th</span>&gt;Owned&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">th</span>&gt;Price Shift&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">thead</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">tbody</span>&gt;
</span></span><span style="display:flex;"><span>        {% for k, v in crypto_price_changes.items %}
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;{{ forloop.counter }}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;{{ k }}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;{{ v | floatformat:5}}
</span></span><span style="display:flex;"><span>              {% if v &gt; 0 %}
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fa fa-arrow-up green-arrow&#34;</span>&gt;&lt;/<span style="color:#f92672">i</span>&gt;
</span></span><span style="display:flex;"><span>              {% else %}
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fa fa-arrow-down red-arrow&#34;</span>&gt;&lt;/<span style="color:#f92672">i</span>&gt;
</span></span><span style="display:flex;"><span>              {% endif %}
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>        {% endfor %}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">tbody</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">table</span>&gt;
</span></span><span style="display:flex;"><span>{% else %}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h3</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-center alert alert-danger&#34;</span>&gt;No Cryptocurrencies added to wallet. Use the search bar above. &lt;/<span style="color:#f92672">h3</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{% endif %}
</span></span><span style="display:flex;"><span>{% endif %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">br</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;
</span></span><span style="display:flex;"><span>{% endblock content %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% block scripts %}
</span></span><span style="display:flex;"><span>{% endblock scripts %}
</span></span></code></pre></div><p>This Django template is used to display a cryptocurrency dashboard with two sections: global top 10 cryptocurrencies and user&rsquo;s owned cryptocurrencies with their price changes in the last 24 hours. It also includes a search bar to find specific cryptocurrencies. The logic involves checking if the user is authenticated, displaying data using a for loop, and using conditional statements to display appropriate messages and symbols.</p>
<h3 id="add-currency--search-result-page">Add Currency / Search Result Page<a hidden class="anchor" aria-hidden="true" href="#add-currency--search-result-page">#</a></h3>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/add-currency.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/add-currency.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/search-2.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/search-2.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p>Let us move to the search page which can be accessed via looking up a cryptocurrency in the home page search box at the top. Add the following view:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@login_required</span>(login_url<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;login&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">search_view</span>(request):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;POST&#39;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># return HTTP status code 405 if the request method is not POST along with a message</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> HttpResponseNotAllowed([<span style="color:#e6db74">&#39;POST&#39;</span>], <span style="color:#e6db74">&#39;Only POST requests are allowed for this view. Go back and search a cryptocurrency.&#39;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> (search_query <span style="color:#f92672">:=</span> request<span style="color:#f92672">.</span>POST<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;search_query&#39;</span>)):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> HttpResponse(<span style="color:#e6db74">&#39;No crypto currency found based on your search query.&#39;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    api_url <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;https://api.coingecko.com/api/v3/search?query=</span><span style="color:#e6db74">{</span>search_query<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>    response <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(api_url)
</span></span><span style="display:flex;"><span>    search_results <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>json()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        data <span style="color:#f92672">=</span> search_results[<span style="color:#e6db74">&#39;coins&#39;</span>][<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">IndexError</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> HttpResponse(<span style="color:#e6db74">&#39;No crypto currency found based on your search query.&#39;</span>)
</span></span><span style="display:flex;"><span>    coin_id <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;id&#39;</span>]
</span></span><span style="display:flex;"><span>    image <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;large&#39;</span>]
</span></span><span style="display:flex;"><span>    symbol <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;symbol&#39;</span>]
</span></span><span style="display:flex;"><span>    market_cap <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;market_cap_rank&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># check if the crypto currency is already in the users portfolio and pass that information to the template</span>
</span></span><span style="display:flex;"><span>    current_user <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>user
</span></span><span style="display:flex;"><span>    is_already_in_portfolio <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    user_cryptocurrencies <span style="color:#f92672">=</span> Cryptocurrency<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(user<span style="color:#f92672">=</span>current_user)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> cryptocurrency <span style="color:#f92672">in</span> user_cryptocurrencies:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> cryptocurrency<span style="color:#f92672">.</span>name<span style="color:#f92672">.</span>lower() <span style="color:#f92672">==</span> coin_id<span style="color:#f92672">.</span>lower():
</span></span><span style="display:flex;"><span>            is_already_in_portfolio <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    context <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;data&#39;</span>: data,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;coin_id&#39;</span>: coin_id,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;image&#39;</span>: image,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;symbol&#39;</span>: symbol,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;market_cap&#39;</span>: market_cap,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;is_already_in_portfolio&#39;</span>: is_already_in_portfolio,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> render(request, <span style="color:#e6db74">&#39;search.html&#39;</span>, context)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@login_required</span>(login_url<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;login&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_to_portfolio_view</span>(request):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> request<span style="color:#f92672">.</span>method <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;POST&#39;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> HttpResponse(<span style="color:#e6db74">&#39;Need a crypto currency to add to your portfolio. Go back to the home page and search for a crypto currency.&#39;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get values from the form</span>
</span></span><span style="display:flex;"><span>    coin_id <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>POST<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;id&#39;</span>)
</span></span><span style="display:flex;"><span>    quantity <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>POST<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;quantity&#39;</span>)
</span></span><span style="display:flex;"><span>    print(coin_id)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get the crypto currency data from the coingecko api based on the coin id</span>
</span></span><span style="display:flex;"><span>    api_url <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;https://api.coingecko.com/api/v3/coins/</span><span style="color:#e6db74">{</span>coin_id<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>    response <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(api_url)
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>json()
</span></span><span style="display:flex;"><span>    print(data)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># store the name, symbol, current price, and market cap rank of the crypto currency</span>
</span></span><span style="display:flex;"><span>    user <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>user
</span></span><span style="display:flex;"><span>    name <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;name&#39;</span>]
</span></span><span style="display:flex;"><span>    id_from_api <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;id&#39;</span>]
</span></span><span style="display:flex;"><span>    symbol <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;symbol&#39;</span>]
</span></span><span style="display:flex;"><span>    current_price <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;market_data&#39;</span>][<span style="color:#e6db74">&#39;current_price&#39;</span>][<span style="color:#e6db74">&#39;usd&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># save the crypto currency to the database</span>
</span></span><span style="display:flex;"><span>        crypto_currency <span style="color:#f92672">=</span> Cryptocurrency<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>create(
</span></span><span style="display:flex;"><span>            user <span style="color:#f92672">=</span> user,
</span></span><span style="display:flex;"><span>            name<span style="color:#f92672">=</span> name,
</span></span><span style="display:flex;"><span>            id_from_api<span style="color:#f92672">=</span> id_from_api,
</span></span><span style="display:flex;"><span>            symbol<span style="color:#f92672">=</span> symbol,
</span></span><span style="display:flex;"><span>            quantity<span style="color:#f92672">=</span> quantity,
</span></span><span style="display:flex;"><span>            current_price<span style="color:#f92672">=</span>current_price,
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> IntegrityError:
</span></span><span style="display:flex;"><span>        crypto_currency <span style="color:#f92672">=</span> Cryptocurrency<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(user<span style="color:#f92672">=</span>user, name<span style="color:#f92672">=</span>name)
</span></span><span style="display:flex;"><span>        crypto_currency<span style="color:#f92672">.</span>quantity <span style="color:#f92672">+=</span> int(quantity)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    crypto_currency<span style="color:#f92672">.</span>save()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># calculate the total value of the crypto currency</span>
</span></span><span style="display:flex;"><span>    total_value <span style="color:#f92672">=</span> int(quantity) <span style="color:#f92672">*</span> int(current_price)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># save the total value of the crypto currency to the database in the portfolio model</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># check if the user already has a portfolio</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> Portfolio<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(user<span style="color:#f92672">=</span>user)<span style="color:#f92672">.</span>exists():
</span></span><span style="display:flex;"><span>        portfolio <span style="color:#f92672">=</span> Portfolio<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(user<span style="color:#f92672">=</span>user)
</span></span><span style="display:flex;"><span>        portfolio<span style="color:#f92672">.</span>total_value <span style="color:#f92672">+=</span> total_value
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>: 
</span></span><span style="display:flex;"><span>        portfolio <span style="color:#f92672">=</span> Portfolio(user<span style="color:#f92672">=</span>user, total_value<span style="color:#f92672">=</span>total_value)     
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    portfolio<span style="color:#f92672">.</span>save()
</span></span><span style="display:flex;"><span>    messages<span style="color:#f92672">.</span>success(request, <span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74"> has been added to your portfolio.&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># if all the above steps are successful, redirect the user to the portfolio page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> redirect(<span style="color:#e6db74">&#39;portfolio&#39;</span>) 
</span></span></code></pre></div><p>The code provided consists of two Django views: <code>search_view</code> and <code>add_to_portfolio_view</code>. Both views require users to be logged in before accessing them, which is enforced by the <code>@login_required</code> decorator.</p>
<p>The <code>search_view</code> allows users to search for a cryptocurrency by sending a POST request to the view with a search query. The view then queries the Coingecko API with the search query to retrieve data on the cryptocurrency. If the query returns a result, the view extracts relevant information from the response and renders a template with the retrieved data.</p>
<p>If the user has already added the searched cryptocurrency to their portfolio, the view passes that information to the template to inform the user.</p>
<p>The <code>add_to_portfolio_view</code> is responsible for adding a cryptocurrency to the user&rsquo;s portfolio. The view expects a POST request with the cryptocurrency ID and quantity. Once received, the view queries the Coingecko API to retrieve data on the cryptocurrency and saves it to the database. If the cryptocurrency already exists in the user&rsquo;s portfolio, the view updates the quantity. The view then calculates the total value of the cryptocurrency based on the current price and quantity and saves it to the user&rsquo;s portfolio. Finally, the view redirects the user to their portfolio page.</p>
<p>If the user tries to access the view with a GET request, the view returns an error message.</p>
<p>Both views make use of the <code>requests</code> library to query the Coingecko API and the <code>HttpResponse</code> and <code>HttpResponseNotAllowed</code> classes to send HTTP responses to the user. The views also make use of the Django <code>messages</code> framework to send success messages to the user.</p>
<p>Now, the template for the search page -&gt; <code>search.html</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% extends &#39;base.html&#39; %} {% block title %} Search Results {% endblock title %} {% block content %} 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-white border-0 col-md-8 mx-auto mt-5&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">&lt;!-- NOTIFY USER IF THEY HAVE ALREADY ADDED THIS CURRENCY IN THEIR WALLET. ANY NEW ADDITIONS WILL BE INCREMENTED, NOT OVERWRITTEN. --&gt;</span>
</span></span><span style="display:flex;"><span>  {% if is_already_in_portfolio %}   
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-body&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-text text-uppercase mb-0&#34;</span>&gt;&lt;<span style="color:#f92672">small</span>&gt;{{ coin_id }} is already in your portfolio.&lt;/<span style="color:#f92672">small</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-text&#34;</span>&gt;&lt;<span style="color:#f92672">small</span>&gt;Any changes to the quantity will be reflected in your portfolio. Units will be added to the existing quantity.&lt;/<span style="color:#f92672">small</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">hr</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;border-white&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  {% endif %} 
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card mb-3 text-center border-0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row justify-content-center align-items-center p-5&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col-md-4&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ image }}&#34;</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;150&#34;</span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;150&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;img-fluid&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ symbol }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col-md-4&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-body text-dark&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">h5</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-title text-uppercase mb-2&#34;</span>&gt;&lt;<span style="color:#f92672">b</span>&gt;{{ coin_id }}&lt;/<span style="color:#f92672">b</span>&gt;&lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-subtitle mb-2 text-muted&#34;</span>&gt;&lt;<span style="color:#f92672">b</span>&gt;[{{ symbol }}]&lt;/<span style="color:#f92672">b</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;&lt;/<span style="color:#f92672">h5</span>&gt;
</span></span><span style="display:flex;"><span>          
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-text text-uppercase mb-2&#34;</span>&gt;&lt;<span style="color:#f92672">small</span>&gt;&lt;<span style="color:#f92672">b</span>&gt;MARKET CAP:&lt;/<span style="color:#f92672">b</span>&gt; {{ market_cap }}&lt;/<span style="color:#f92672">small</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;add_to_portfolio&#39; %}&#34;</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;d-inline-block&#34;</span>&gt; 
</span></span><span style="display:flex;"><span>            {% csrf_token %} 
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hidden&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ coin_id }}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mr-2 font-weight-bold text-uppercase&#34;</span>&gt;Units Owned&lt;/<span style="color:#f92672">label</span>&gt; 
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;quantity&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;500&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control d-inline-block w-auto mr-2 mb-2&#34;</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary text-uppercase&#34;</span>&gt;Add to Portfolio&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">div</span>&gt;        
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;    
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt; 
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;   
</span></span><span style="display:flex;"><span>{% endblock content %} {% block scripts %}  {% endblock scripts %}
</span></span></code></pre></div><p>This template is used for displaying search results for a cryptocurrency in a portfolio management application. It allows the user to add the selected cryptocurrency to their portfolio by specifying the quantity owned. If the cryptocurrency is already in the portfolio, the template notifies the user and provides an option to increment the quantity. The template uses Bootstrap classes for styling and Django tags to handle form submissions.</p>
<h3 id="wallet-page">Wallet Page<a hidden class="anchor" aria-hidden="true" href="#wallet-page">#</a></h3>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/bonus.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/bonus.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/wallet-blank.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/wallet-blank.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/wallet-1.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/wallet-1.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p><a href="https://github.com/HighnessAtharva/django-crypto-app/blob/main/assets/wallet-2.png?raw=true"><img loading="lazy" src="https://github.com/HighnessAtharva/django-crypto-app/raw/main/assets/wallet-2.png?raw=true" alt="Screenshot 1"  />
</a></p>
<p>Now, moving on to the final and the most important part of the project, the wallet page. The wallet page is the page where the user can see all the cryptocurrencies they have added to their portfolio. The wallet page also displays the total value of the user&rsquo;s portfolio. The wallet page is the most important page of the application as it is the page where the user can see the total value of their portfolio and the profit/loss they have made on their investments.</p>
<p>The view for the wallet page is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a6e22e">@login_required</span>(login_url<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;login&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">portfolio_view</span>(request):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get the current logged in user</span>
</span></span><span style="display:flex;"><span>    current_user <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>user
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get the referal code of the current user</span>
</span></span><span style="display:flex;"><span>    referral_code <span style="color:#f92672">=</span> current_user<span style="color:#f92672">.</span>profile<span style="color:#f92672">.</span>referral_code
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get a list of all users who have the current user as their referrer</span>
</span></span><span style="display:flex;"><span>    referrals <span style="color:#f92672">=</span> Referal<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(referrer<span style="color:#f92672">=</span>current_user)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get total bonus earned by the current user</span>
</span></span><span style="display:flex;"><span>    total_bonus <span style="color:#f92672">=</span> current_user<span style="color:#f92672">.</span>profile<span style="color:#f92672">.</span>bonus
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get the list of cryptocurrencies owned by the current user</span>
</span></span><span style="display:flex;"><span>    user_cryptocurrencies <span style="color:#f92672">=</span> Cryptocurrency<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(user<span style="color:#f92672">=</span>current_user)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> user_portfolio <span style="color:#f92672">:=</span> Portfolio<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(user<span style="color:#f92672">=</span>current_user)<span style="color:#f92672">.</span>first():
</span></span><span style="display:flex;"><span>        portfolio <span style="color:#f92672">=</span> Portfolio<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(user<span style="color:#f92672">=</span>current_user)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># get all the crypto currencies in the portfolio and recalculate the total value of the portfolio</span>
</span></span><span style="display:flex;"><span>        new_portfolio_value <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        user_cryptocurrencies <span style="color:#f92672">=</span> Cryptocurrency<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(user<span style="color:#f92672">=</span>current_user)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> cryptocurrency <span style="color:#f92672">in</span> user_cryptocurrencies:
</span></span><span style="display:flex;"><span>            total_value <span style="color:#f92672">=</span> cryptocurrency<span style="color:#f92672">.</span>quantity <span style="color:#f92672">*</span> cryptocurrency<span style="color:#f92672">.</span>current_price
</span></span><span style="display:flex;"><span>            new_portfolio_value <span style="color:#f92672">+=</span> total_value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        portfolio<span style="color:#f92672">.</span>total_value <span style="color:#f92672">=</span> new_portfolio_value
</span></span><span style="display:flex;"><span>        portfolio<span style="color:#f92672">.</span>save()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        context <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;current_user&#39;</span>: current_user,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;referral_code&#39;</span>: referral_code,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;user_cryptocurrencies&#39;</span>: user_cryptocurrencies,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;user_portfolio&#39;</span>: user_portfolio,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;referrals&#39;</span>: referrals, 
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;total_bonus&#39;</span>: total_bonus,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;new_portfolio_value&#39;</span>: new_portfolio_value,
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        context <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;current_user&#39;</span>: current_user,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;referral_code&#39;</span>: referral_code,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;user_cryptocurrencies&#39;</span>: user_cryptocurrencies,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;user_portfolio&#39;</span>: user_portfolio,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;referrals&#39;</span>: referrals, 
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;total_bonus&#39;</span>: total_bonus,
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> render(request, <span style="color:#e6db74">&#39;portfolio.html&#39;</span>, context)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@login_required</span>(login_url<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;login&#34;</span>)      
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">delete_from_portfolio_view</span>(request, pk):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get the current logged in user</span>
</span></span><span style="display:flex;"><span>    user <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span>user
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get the crypto currency object from the database</span>
</span></span><span style="display:flex;"><span>    crypto_currency <span style="color:#f92672">=</span> Cryptocurrency<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(pk<span style="color:#f92672">=</span>pk)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># delete the crypto currency from the database</span>
</span></span><span style="display:flex;"><span>    crypto_currency<span style="color:#f92672">.</span>delete()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># update the total value of the portfolio</span>
</span></span><span style="display:flex;"><span>    portfolio <span style="color:#f92672">=</span> Portfolio<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>get(user<span style="color:#f92672">=</span>user)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># get all the crypto currencies in the portfolio and recalculate the total value of the portfolio</span>
</span></span><span style="display:flex;"><span>    user_cryptocurrencies <span style="color:#f92672">=</span> Cryptocurrency<span style="color:#f92672">.</span>objects<span style="color:#f92672">.</span>filter(user<span style="color:#f92672">=</span>user)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> cryptocurrency <span style="color:#f92672">in</span> user_cryptocurrencies:
</span></span><span style="display:flex;"><span>        total_value <span style="color:#f92672">=</span> cryptocurrency<span style="color:#f92672">.</span>quantity <span style="color:#f92672">*</span> cryptocurrency<span style="color:#f92672">.</span>current_price
</span></span><span style="display:flex;"><span>        portfolio<span style="color:#f92672">.</span>total_value <span style="color:#f92672">+=</span> total_value
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    portfolio<span style="color:#f92672">.</span>save()    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># send an alert to the user that the crypto currency has been deleted from the portfolio</span>
</span></span><span style="display:flex;"><span>    messages<span style="color:#f92672">.</span>warning(request, <span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{</span>crypto_currency<span style="color:#f92672">.</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74"> has been deleted from your portfolio.&#39;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> redirect(<span style="color:#e6db74">&#39;portfolio&#39;</span>)
</span></span></code></pre></div><p>The first function, <code>portfolio_view</code>, is responsible for rendering the user&rsquo;s portfolio page. It retrieves the current user&rsquo;s information and their cryptocurrency holdings from the database, as well as their referral code, referrals, and total bonus. If the user has a portfolio, the function recalculates its total value based on the current prices of the cryptocurrencies they own, updates the portfolio in the database, and adds the new value to the context. Finally, it renders the portfolio.html template with the retrieved information.</p>
<p>The second function, <code>delete_from_portfolio_view</code>, handles deleting a specific cryptocurrency from the user&rsquo;s portfolio. It first retrieves the current user&rsquo;s information and the specific cryptocurrency object from the database based on its primary key. Then, it deletes the cryptocurrency from the database and recalculates the total value of the user&rsquo;s portfolio based on their remaining holdings. Finally, it sends a warning message to the user notifying them that the cryptocurrency has been deleted, and redirects them back to their portfolio page.</p>
<p>Now, all that remains is to make the HTML template for the portfolio page. The template is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% extends &#39;base.html&#39; %}
</span></span><span style="display:flex;"><span>{% block title %}
</span></span><span style="display:flex;"><span>Wallet 
</span></span><span style="display:flex;"><span>{% endblock title %}
</span></span><span style="display:flex;"><span>{% block content %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% if messages %}
</span></span><span style="display:flex;"><span>  {% for message in messages %}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-success&#34;</span> <span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {{ message }}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  {% endfor %}
</span></span><span style="display:flex;"><span>{% endif %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h1</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-4 custom-heading&#34;</span>&gt;REFERRALS&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my-4 py-3 px-4 rounded-lg referral-code&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;d-flex align-items-center justify-content-between&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-0&#34;</span>&gt;Your Referral Code is &lt;<span style="color:#f92672">strong</span>&gt;http://localhost:8000/signup/{{ referral_code }}&lt;/<span style="color:#f92672">strong</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-dark btn-md copy-btn&#34;</span> <span style="color:#a6e22e">onclick</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sendToClipboard()&#34;</span>&gt;&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fas fa-copy&#34;</span>&gt;&lt;/<span style="color:#f92672">i</span>&gt;&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ml-0 mt-3 mb-0&#34;</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://localhost:8000/signup/{{ referral_code }}&#34;</span>&gt;Share this link with your friends to earn 100 points for each friend who signs up!&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% if referrals %}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-5&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">table</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;table table-striped table-hover custom-table mt-5&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">thead</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;#&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Referral User&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Date Joined&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">thead</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">tbody</span>&gt;
</span></span><span style="display:flex;"><span>      {% for referral in referrals %}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">td</span>&gt;{{ forloop.counter }}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">td</span>&gt;{{ referral.user }}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">td</span>&gt;{{ referral.user.date_joined }}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>      {% endfor %}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">tbody</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">table</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row mt-5&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col-md-6&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-success py-3 mb-3&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">h4</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-0&#34;</span>&gt;Total Referrals&lt;/<span style="color:#f92672">h4</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-0 display-4&#34;</span>&gt;{{ referrals|length }}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col-md-6&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-info py-3 mb-3&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">h4</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-0 text-dark&#34;</span>&gt;Total Points Earned&lt;/<span style="color:#f92672">h4</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-0 display-4 text-dark&#34;</span>&gt;{{ total_bonus }}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{% else %}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-danger my-4 p-3 rounded text-center text-light&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  You have not referred any friends yet.
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% endif %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h1</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-4 mt-5 custom-heading&#34;</span>&gt;Wallet for {{ current_user|upper }}&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% if user_cryptocurrencies %}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;table-responsive&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">table</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;table table-striped mb-4 mt-2 custom-table&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">thead</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Cryptocurrency&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Current Price&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Amount Owned&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">scope</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col&#34;</span>&gt;Action&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">thead</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">tbody</span>&gt;
</span></span><span style="display:flex;"><span>        {% for crypto in user_cryptocurrencies %}
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;{{ crypto.name }}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;{{ crypto.current_price }}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;{{ crypto.quantity }}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;delete_from_portfolio&#39; crypto.id %}&#34;</span>&gt;&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fa fa-trash red-arrow&#34;</span>&gt;&lt;/<span style="color:#f92672">i</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>        {% endfor %}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">tbody</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">table</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-info py-3 mb-3 fancy-color&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">h4</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mb-0 text-light&#34;</span>&gt;Total Portfolio Value&lt;/<span style="color:#f92672">h4</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mt-2 display-4 text-light&#34;</span>&gt;${{ new_portfolio_value }}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>{% else %}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;alert alert-danger my-3 p-3 rounded text-center text-light&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  You have not added any cryptocurrencies to your portfolio yet.
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">p</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{% url &#39;home&#39; %}&#34;</span>&gt;Add Cryptocurrencies&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>{% endif %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">br</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">sendToClipboard</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">copyText</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#34;.referral-code strong&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">copyText</span>.<span style="color:#a6e22e">textContent</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://localhost:8000/signup/&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">copyText</span>.<span style="color:#a6e22e">textContent</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">textArea</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">createElement</span>(<span style="color:#e6db74">&#34;textarea&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">textArea</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">copyText</span>.<span style="color:#a6e22e">textContent</span>;
</span></span><span style="display:flex;"><span>    document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">appendChild</span>(<span style="color:#a6e22e">textArea</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">textArea</span>.<span style="color:#a6e22e">select</span>();
</span></span><span style="display:flex;"><span>    document.<span style="color:#a6e22e">execCommand</span>(<span style="color:#e6db74">&#34;Copy&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">textArea</span>.<span style="color:#a6e22e">remove</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;Copied to clipboard&#34;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>{% endblock %}
</span></span></code></pre></div><p>This Django template generates a web page that displays two main sections: referrals and cryptocurrency portfolio. The referral section shows the user&rsquo;s referral link and a table of all the referrals made by the user. The user can copy the referral link to share with friends and earn bonus points for each successful referral. The cryptocurrency portfolio section displays a table of all the cryptocurrencies owned by the user along with their current price and quantity. The total portfolio value is also shown. If the user has not added any cryptocurrencies to the portfolio, a message is displayed prompting them to add some. The template also includes a JavaScript function to copy the referral link to the clipboard when the user clicks on the copy button.</p>
<h3 id="run-the-crypto-app">Run the crypto app<a hidden class="anchor" aria-hidden="true" href="#run-the-crypto-app">#</a></h3>
<p>Now that about wraps up the crypto app. Let&rsquo;s run the app and see how it looks. Run the following command in the terminal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python manage.py makemigrations
</span></span><span style="display:flex;"><span>python manage.py migrate
</span></span><span style="display:flex;"><span>python manage.py runserver
</span></span></code></pre></div><p>Now, open the following URL <a href="http://localhost:8000/signup">http://localhost:8000/signup</a> in your browser. The app should show you the home page of the application. You can sign up for a new account and then log in to the application. Once you log in, you will be redirected to the home page. You can add cryptocurrencies to your portfolio and then view your portfolio and referrals on the portfolio page. You can also copy your referral link to the clipboard and share it with your friends to earn bonus points.</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>In the second part of this massive tutorial we learned how to build a cryptocurrency portfolio web application using Django.</p>
<p>In our Django development journey, we covered the following topics:</p>
<ul>
<li>Using the CoinGecko API to fetch the latest cryptocurrency prices and how to use the Django ORM to store the data in the database.</li>
<li>Django&rsquo;s authentication system to create user accounts.</li>
<li>Django messages framework to display messages to the user.</li>
<li>Django&rsquo;s template system to generate dynamic web pages.</li>
<li>Django ORM to query the database and perform various operations such as fetch data, update and delete data from the database, as well as write complex queries.</li>
<li>perform aggregate queries and joins on the database using the Django ORM.</li>
<li>perform transactions,  date and time queries, and queries on specific data types such as JSON, arrays , UUID in the database.</li>
<li>Writing highly specifc views, decorators and request methods to handle complex business backend logic such as adding cryptocurrencies to the portfolio, deleting cryptocurrencies from the portfolio, and so on.</li>
</ul>
<p>Overall, we covered various aspects of Django development that will help us build robust and scalable web applications. In the final part of this tutorial, in the next post we will cover testing all endpoints, views and models so definitely do not miss that.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://atharvashah.netlify.app/tags/django/">Django</a></li>
      <li><a href="https://atharvashah.netlify.app/tags/python/">Python</a></li>
      <li><a href="https://atharvashah.netlify.app/tags/tutorial/">tutorial</a></li>
    </ul>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Django Crypto App Part 2: Templates, Views and URLs on twitter"
        href="https://twitter.com/intent/tweet/?text=Django%20Crypto%20App%20Part%202%3a%20Templates%2c%20Views%20and%20URLs&amp;url=https%3a%2f%2fatharvashah.netlify.app%2ftech%2fdjango-crypto-app%2fpart2%2f&amp;hashtags=Django%2cPython%2ctutorial">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Django Crypto App Part 2: Templates, Views and URLs on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fatharvashah.netlify.app%2ftech%2fdjango-crypto-app%2fpart2%2f&amp;title=Django%20Crypto%20App%20Part%202%3a%20Templates%2c%20Views%20and%20URLs&amp;summary=Django%20Crypto%20App%20Part%202%3a%20Templates%2c%20Views%20and%20URLs&amp;source=https%3a%2f%2fatharvashah.netlify.app%2ftech%2fdjango-crypto-app%2fpart2%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Django Crypto App Part 2: Templates, Views and URLs on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fatharvashah.netlify.app%2ftech%2fdjango-crypto-app%2fpart2%2f&title=Django%20Crypto%20App%20Part%202%3a%20Templates%2c%20Views%20and%20URLs">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Django Crypto App Part 2: Templates, Views and URLs on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fatharvashah.netlify.app%2ftech%2fdjango-crypto-app%2fpart2%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Django Crypto App Part 2: Templates, Views and URLs on whatsapp"
        href="https://api.whatsapp.com/send?text=Django%20Crypto%20App%20Part%202%3a%20Templates%2c%20Views%20and%20URLs%20-%20https%3a%2f%2fatharvashah.netlify.app%2ftech%2fdjango-crypto-app%2fpart2%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Django Crypto App Part 2: Templates, Views and URLs on telegram"
        href="https://telegram.me/share/url?text=Django%20Crypto%20App%20Part%202%3a%20Templates%2c%20Views%20and%20URLs&amp;url=https%3a%2f%2fatharvashah.netlify.app%2ftech%2fdjango-crypto-app%2fpart2%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer><div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "https-atharvashah-netlify-app" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    (function() {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        var disqus_shortname = 'https-atharvashah-netlify-app';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://atharvashah.netlify.app/">Atharva Shah</a></span> 
    | <span><a href="/privacy-policy/" target="_blank">Privacy Policy</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function() {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function(e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function() {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {};
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>
